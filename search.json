[{"title":"Pokémon","url":"https://blog.ykqmain.com/bkm/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<p>Pokémon GET daze 😆</p>\n<h3 id=\"2021年11月24日\"><a href=\"#2021年11月24日\" class=\"headerlink\" title=\"2021年11月24日\"></a>2021年11月24日</h3><p>一句“最近还好吗？”就像多年未见的好友重逢，说不出的时光易逝、沧海桑田。</p>\n<p>感谢陪伴，跟大家一起登入名人堂。</p>\n<p>走在这泥泞的道路上，就在想有时候陪伴我们的不一定是人，各种事物都可以。不仅仅是快乐，还有陪伴的回忆。有童年的遗憾，大学的渴望，还有北京的孤独。随着年龄增长，很多东西不仅没有得到，反而失去了更多。</p>\n<p>「回忆是珍珠，友情是钻石。」宝可梦可以告一段落了。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/bkm/1.jpeg\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/bkm/2.jpeg\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/bkm/3.jpeg\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/bkm/4.jpeg\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/bkm/5.jpeg\"></p>\n<p>我喜爱的宝可梦伙伴。</p>\n<table>\n<thead>\n<tr>\n<th>表头</th>\n<th>表头</th>\n<th>表头</th>\n<th>表头</th>\n<th>表头</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>#059</td>\n<td>风速狗</td>\n<td>火</td>\n<td>无印/关都</td>\n<td></td>\n</tr>\n<tr>\n<td>#183</td>\n<td>玛力露</td>\n<td>水/妖精</td>\n<td>无印/城都</td>\n<td></td>\n</tr>\n<tr>\n<td>#334</td>\n<td>青鸟</td>\n<td>龙/飞行</td>\n<td>超世代/丰缘</td>\n<td></td>\n</tr>\n<tr>\n<td>#131</td>\n<td>乘龙</td>\n<td>水/冰</td>\n<td>橘子/关都</td>\n<td>小智</td>\n</tr>\n<tr>\n<td>#143</td>\n<td>卡比兽</td>\n<td>一般</td>\n<td>橘子/关都</td>\n<td>小智</td>\n</tr>\n<tr>\n<td>#418</td>\n<td>鼬哥</td>\n<td>水</td>\n<td>珍钻/神奥</td>\n<td>小光</td>\n</tr>\n</tbody></table>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/bkm/6.JPG\"></p>\n<br>\n\n\n<h3 id=\"2021年11月29日\"><a href=\"#2021年11月29日\" class=\"headerlink\" title=\"2021年11月29日\"></a>2021年11月29日</h3><p>当初Switch Lite买来玩宝可梦，晶灿钻石通关以后，基本告别任天堂了，</p>\n<p>于是闲鱼出了我的Switch Lite。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/bkm/7.jpeg\"></p>\n<br>\n\n","categories":["游戏"],"tags":["童年","动画","游戏","宝可梦","伙伴","回忆"]},{"title":"《史记》二三事","url":"https://blog.ykqmain.com/shiji/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2020年09月06日\"><a href=\"#2020年09月06日\" class=\"headerlink\" title=\"2020年09月06日\"></a>2020年09月06日</h3><p>文可分为二，文学艺术为文，经天纬地亦为文；武也可分为二，武力勇猛为武，统帅三军亦为武。</p>\n<p>吴起争议很大，《史记》记载其杀妻求将、母丧不归，孤证不可取，不过通过后来的事迹，仍能看出吴起人品确实不够受欢迎，但能力没话说。</p>\n<p>早年从师孔子弟子曾参的儿子曾申（孔子去世后，儒分为八，曾参是非常有成就的弟子，相传《大学》为曾参所作。孟子也是受业孔子之孙子思门人，这种私学在战国非常流行。）。吴起一生大概三件事。</p>\n<p>第一件事，齐伐鲁，吴起因妻为齐国人，鲁国君不信任，吴起杀妻求将，大败齐军。功成之后，鲁公仍然怀疑，吴起投奔魏国。这里展现了吴起的军事才能。</p>\n<p>第二件事，那时候应该还不算魏国，而是魏家，魏文侯破格提拔，改革魏国兵制，创立魏武卒，这是较早的特种部队。在魏国期间于秦国战争无数，最著名的是阴晋之战，以少胜多。后因魏相公叔痤排挤，出走楚国。</p>\n<p>到这里来看，吴起的军事才能已经充分展现了，更有理论著作《吴起兵法》，或称《吴子》，和春秋末期孙武相提并论，以至于兵书别称“孙吴之书”，可以说是无上荣耀。既有实战战绩，又有理论著作传世，姜太公之下，孙、吴而已。</p>\n<p>如果到这里就完了的话，吴起的成就估计还不足以跟孙武并论，也就是一般名将，不会誉为“兵家亚圣”。之所以说吴起文武双全，不能不提后面楚国的“吴起变法”。</p>\n<p>战国生产力发展，最重要的是铁器应用。变法者无数，魏有李悝变法，齐有邹忌变法，韩有申不害变法，楚有吴起变法，当然还有最成功的秦国商鞅变法。</p>\n<p>变法无有不流血牺牲者。从结果来看，商鞅死后车裂，而吴起同样被射死后车裂，为什么商鞅变法成了，而吴起变法就失败了呢？<br>从表象来看，商鞅变法深入人心了，这是表面的，<br>从客观来讲，楚悼王死的太早，楚悼王雄心壮志，也是破格提拔吴起担任令尹（相当于相国），可惜死的太早，楚王一去世，旧贵族群起攻之，竟然将吴起万箭射死在楚悼王尸体旁，楚王尸体未能幸免，如此大逆不道竟没有让楚国贵族退却，可见吴起变法之剧烈。楚肃王继位后，命（新任）令尹把射杀吴起同时射中楚悼王尸体的人全部处死，受牵连被灭族的有七十多家，这是后话。</p>\n<p>只要私有制存在，就有人与人的斗争，就有资源的兼并，就有资本的积累，就有阶级的固化，就有贫与富的差距，欲望的不可控导致斗争和兼并无穷无尽从而巨大化差距，就会有矛盾的不可调和。</p>\n<p>穷则变，变则通，通则久。不仅对于个人要与时俱进，对于国家而言，改革也是无时不在的。春秋战国诸子百家各抒己见，各有见地和价值，只有法家，与时俱进，顺应时代潮流，用他们的鲜血，将中国送入了新的封建时代。时代的变迁都是鲜血流出来的，“法家”代表一般不得善终。</p>\n<p>从主观上来讲，吴起变法的失败是楚国贵族势力过大，而秦国经过献公把秦国贵族榨了一遍，加上连年与魏战争，相对落后，便于下猛药。</p>\n<p>更重要的原因，吴起只打压了旧贵族，旧的秩序下，必定有大批的受益者，这些既得利益者正是改革最大的困难。。而商鞅则打压旧贵族的同时，扶植与生产力相符、对战争有利的新贵族，再借用新贵族打压旧贵族，两个最重要的政策，重农抑商和军功制，让秦国的军功地主崛起，底层有晋升的通道，虎狼之师也就水到渠成了。即使商鞅身死，新贵族已经崛起，他们自然会维护既得利益。</p>\n<p>反观楚国，吴起变法失败，楚国三大贵族屈、景、昭继续把持朝政，被称为“三闾”。腐败不堪，人才得不到选拔和重用，被吞并只是时间问题了。</p>\n<p>多插一嘴，凡是大兴之世，无不是人才济济，百花齐放。至于人才的发现选拔和任用，说的容易做起来难——「任人唯贤」，而不是门第世族。从察举征辟到科举，大唐盛世又不言自明的证明了。</p>\n<p>再说回吴起，兼具儒家，兵家，法家之外，还有一个身份，史家。也是和儒家有重叠的地方，即《春秋左氏传》。</p>\n<p>杨伯峻先生在《春秋左传注》里提到的观点，《左传》并非左丘明所作，起码不是《论语》里面提到的左丘明，“巧言令色鲜矣，左丘明耻之，丘亦耻之”。他认为《左传》在战国已流行，成书在“三家灭知”之前。不太可能是与孔子同时的左丘明。《左传》的作者可能受孔子影响，但可能为儒家别派（儒分为八）。</p>\n<p>他还认为，左传作者不是左丘明，但它的作者传给曾申，曾申再传给吴起，未尝没有可能。《左传》尤其善于描写战争，视作半部兵书也未尝不可。</p>\n<p>至于我刚开始为什么偏偏提到吴起，杜预，《左传》就是他们之间这“毫不相干”的一丝联系。</p>\n<p>杜预，<del>明天再说</del>。</p>\n<br>\n\n\n<h3 id=\"2021年02月14日\"><a href=\"#2021年02月14日\" class=\"headerlink\" title=\"2021年02月14日\"></a>2021年02月14日</h3><p>“我太难了。”也许在不知不觉中成了我最近说的比较多的一句话，回过神来的时候，感觉翻翻书就可以静静心。（《大学》里面有一句话说的好，知止而后有定；定而后能静；静而后能安；安而后能虑；虑而后能得。）</p>\n<p>（之前自我介绍的时候提到过我的兴趣有中国古代史，今天就跟大家分享一下最近看过的《史记》一篇文章——《李斯列传》）</p>\n<p>《史记•李斯列传》记载，李斯是楚国上蔡人，年轻的时候做郡小吏，可以理解为很小的基层干部，他看到宿舍的厕所中有老鼠在吃不干净的东西，人和狗一旦靠近它就会吓得直接逃跑；后来李斯又看到粮仓的老鼠，吃的是囤积在那里的粮食，住的是大庑wǔ（很大的房子），“不见人犬之忧”，没有人或狗来找事，所以李斯感叹说，“人之贤不肖譬如鼠矣，所在自处尔！”意思就是你混的好或者不好，就跟这个老鼠一样，完全归结于你在什么位置在什么处境中。如果说人一生中有一个精确时刻，意识到了现实的残酷，对于李斯而言，可能就是这一刻了。于是他辞去了他的官，然后去齐国的稷下学宫找荀子拜师，学帝王之术。（知识和学历的重要性，那个时候的名师就相当于名牌大学，有了目标就勇往直前，毅然决然付诸行动）</p>\n<p>他的帝王之术学成了，不打算回国（楚国）帮楚王了，因为他觉得楚王不足以成事，而六国皆弱，没有可以建功的地方了。秦国一家独大，所以想西入秦国。然后就去找荀子告辞，说了一大段话，不像某些剧里写的那样，并不是统一天下为国为民，让百姓安居乐业之类的话。（“为建万世太平之根基，使万民免受乱政之苦，李斯就是碰个头破血流，又如何？”摘自《大秦赋》电视剧，主角光环的错误引导）而《史记》记载的是“斯闻得时无怠，今万乘方争时，游者主事。”游者就是游说之人，比如张仪苏秦。“今秦王欲吞天下，称帝而治，此布衣驰骛之时而游说者之秋也。”意思是说这个时候正好是我们这些布衣谋士的好机会。接下来的这段话就暴露了李斯的性格，也暴露了他这个人对于人生的期待，“处卑贱之位而计不为者，此禽鹿视肉，人面而能强行者耳。”如果你处在一个非常卑贱的位置上，你还不想着（改变），不思进取，就像一个禽兽一样，只有等肉到你眼前了，你才会去吃，你不去追逐它，不会主动出击，相当于白长了一张脸能走路而已。后面一句则更加直白，也许他的命运在这个时候，就已经决定了。“故诟莫大於卑贱，而悲莫甚於穷困。久处卑贱之位，困苦之地，非世而恶利，自讬於无为，此非士之情也。故斯将西说秦王矣。”意思就是说世界上最耻辱的事情就是卑贱，而最悲惨的事情就是穷困，当一个人很长时间处在卑贱和穷困这种环境，他就会非议这个世界，变得愤世嫉俗，“恶利”就是非常讨厌（不屑）荣华富贵。“自讬於无为”就是自诩一种淡泊名利的状态，不与世人争的感觉，然后李斯表达了这绝对不是我想要的东西，所以我打算西入秦国。</p>\n<p>看到这里，李斯的性格跃然纸上，同时可见老鼠的事情对他的影响之深远。当一只厕鼠成为一只仓鼠，他最怕的就是回到原来的位置（由奢入俭难），李斯就是如此。要不然他也不会被赵高的几句话就诱导，同意杀死扶苏和蒙恬，因为赵高说的话一针见血“你（难道）可以跟蒙恬对比吗？”谋害韩非也是同样的道理，害怕失去自己的地位，嫉贤妒能，最后多行不义必自毙。</p>\n<p>（《史记》记载，“高曰：“君侯自料能孰与蒙恬？功高孰与蒙恬？谋远不失孰与蒙恬？无怨於天下孰与蒙恬？长子旧而信之孰与蒙恬？”斯曰：“此五者皆不及蒙恬，而君责之何深也？”）</p>\n<p>秦二世二年，被赵高诬陷谋反，判李斯腰斩于市，临刑前，跟他的儿子说，“吾欲与若复牵黄犬俱出上蔡东门逐狡兔，岂可得乎？”最后夷三族，残酷和血腥不言而喻。</p>\n<p>（（秦）二世二年七月，具斯五刑，论腰斩咸阳市。斯出狱，与其中子俱执，顾谓其中子曰：“吾欲与若复牵黄犬俱出上蔡东门逐狡兔，岂可得乎！”遂父子相哭，而夷三族。）</p>\n<p>每个人都是复杂的，就事论事是最客观也最有利的学习方法，中国古代有两个制度影响深远，一个郡县制，一个科举制。李斯曾力排众议建议实行郡县制，并得到秦始皇的采纳，这是一个成就。李斯的言论是否有道理跟李斯是不是一个好人，或者跟李斯的结局好坏，没有关系。每个人都能看到不一样的东西。</p>\n<p>一方面，李斯那段与荀子告别的话，去除他极端的性格，还是有一定道理的，“久处卑贱之位，困苦之地，非世而恶利，自讬於无为”，这个现象，一个人久处于无能为力的状态之后，他就会合理化自己的处境，虽然我没有这些名利，但是我不在乎，但实际上是真的不在乎吗？可能只是给自己的处境一个安慰而已。所以一个人无力，当他认命的那一刻是无能的，但是可能比认命更危险的一点就是，自欺欺人。久而久之，则合理化处境，不再进取。</p>\n<p>另一方面，李斯被腰斩于市，夷三族。他临死前，想的却是希望能够和儿子牵着小黄狗在老家东门去打猎。临死想着的是亲人、是家乡、是柴米油盐的生活气息。早知今日，何必当初！所谓的荣华富贵，又何在呢？原来幸福也并不是非要“辅秦皇以成帝业”，还可以是“复牵黄犬俱出东门逐狡兔”。</p>\n<p>仅仅讲“开拓进取”和“知足常乐”是抽象且没有力量的，“非世而恶利，自讬於无为”和不择手段地追求荣华富贵也是两个极端，一个失去了生活的色彩、虚度光阴；另一个手中沾满“鲜血”、万事皆空。把握其中的平衡，才能怡然自得。希望能够以此为鉴，避免后人复哀。（然而史书上却写满了四个大字，“重蹈覆辙”，仅仅懂得道理远远不够，不能转为行动，那“我太难了”还是一句口头禅。）</p>\n<p>正如《逍遥游》所言，万物皆有所待，希望大家能够找到自己的世界。（我仍然找不到我的期待）</p>\n<br>\n\n\n<h3 id=\"2021年02月27日\"><a href=\"#2021年02月27日\" class=\"headerlink\" title=\"2021年02月27日\"></a>2021年02月27日</h3><p>再看司马迁的《报任安书》，略有所思。</p>\n<p>受历史影响，我始终认为，对于一个人来说最高的荣誉，无疑是「名垂青史」，这即是所谓的“长生不老”之术。将自己的名字和精神刻进一个民族、一个国家，甚至全人类的文明基因中，如同DNA复制一样传承下去，流芳百世。</p>\n<p>「人固有一死，或重于泰山，或轻于鸿毛，用之所趋异也。」</p>\n<p>早在高中时期我就感受到前人内心的孤独与苦闷，然而我的内心，既能认识到人力渺小，又渴望有所建树，以至于无法描述。</p>\n<p>「所以隐忍苟活，幽于粪土之中而不辞者，恨私心有所不尽，鄙陋没世，而文采不表于后也。」</p>\n<p>我也唯愿留下一部传世之作，让它在未来的某一天被后人欣赏，能与我的思想或经历谈谈心，那就不枉此生了。</p>\n<p>「仆窃不逊，近自托于无能之辞，网罗天下放失旧闻，略考其行事，综其终始，稽其成败兴坏之纪，上计轩辕，下至于兹，为十表，本纪十二，书八章，世家三十，列传七十，凡百三十篇。亦欲以究天人之际，通古今之变，成一家之言。草创未就，会遭此祸，惜其不成，是以就极刑而无愠色。」</p>\n<p>现在看来，我当然没有太史公的悲惨遭遇，也没有太史公的「历史」使命，更没有太史公的才华横溢。对我来说，“传世之作”早已化为了虚无，“风骚”之作亦无能为力，“平凡”才是最后的归宿。</p>\n<p>甘于平凡，可以说是不思进取的理由；积极入世，也可以说是追名逐利之徒。其中的平衡，难以把握。可以肯定的是，平凡有平凡的意义。孟子有三乐：“父母兄弟健在；仰不愧于天，俯不怍于人；得天下英才而教育。”这些快乐并不都是遥不可及。而我的快乐，可以建立在精致美妙的MacBook之上，也可以沉浸在形形色色的动画世界之中，还可以透过文字的力量，窥探「人类过去的活动」，特别是黄河和长江这片土地上的沧海桑田。</p>\n<p>两个素不相识的人，即使相隔两千年，仍然可以通过书籍的连接，犹如面对面地交谈、酣畅淋漓，这就是文字的魅力。</p>\n<p>「仆诚以著此书，藏之名山，传之其人，通邑大都，则仆偿前辱之责，虽万被戮，岂有悔哉！然此可为智者道，难为俗人言也！」</p>\n<p>《太史公书》流传至今，无愧于“史记”之名，真的实现了“藏之名山，传之其人，通邑大都”，可以无悔矣。而我奔波至今，终于可以静下心，坐下来，翻开书本，说一句：</p>\n<p>“太史公，见字如面，请指教。”</p>\n<br>\n\n\n<h3 id=\"2021年10月12日\"><a href=\"#2021年10月12日\" class=\"headerlink\" title=\"2021年10月12日\"></a>2021年10月12日</h3><p>历史是如此的迷人，以至于即使告诉了结局、却无可奈何。每个人身陷时代洪流、束手无策，只能重蹈覆辙、走向循环往复。</p>\n<p>因为无知而读书，却又陷入了越读越感到自己无知的无限循环之中，无穷无尽。</p>\n<p>并且觉得来到这个世界就是历经磨难，痛苦且毫无意义，渺小又无可奈何，犹如没有存在过一般，最终湮没在历史长河中，随风而逝。</p>\n<br>\n\n<p>人来到世上的意义难道就是受一遭罪，然后痛苦地离开吗？</p>\n<p>每个人都会老去，牙齿掉了、眼睛瞎了、耳朵聋了、器官逐渐衰竭，疾病缠身，倍受煎熬，直面死亡。每次看到老人，则恻隐之心泛滥，倍感人生之艰，却又自顾不暇。</p>\n<p>小时候曾看到“红白喜事”的说法，红喜事不言而喻，白喜事是有点费解的。在那个时候的认知中，死亡是一件悲伤严肃的事情。</p>\n<p>现在才彻底明白，没有病痛地离开这个世界，确实是一件值得道喜的事，有时候医院比火葬场更加残酷。</p>\n<p>哎，自身处于被动则始终煎熬，化被动为主动才能悠然自得，以自强拒绝依赖。少一些虚假，多一点实际兴趣，随缘吧。</p>\n<p><br><br></p>\n","categories":["读书"],"tags":["历史","史记","太史公书","司马迁"]},{"title":"公园随想","url":"https://blog.ykqmain.com/gongyuan/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2021年08月28日\"><a href=\"#2021年08月28日\" class=\"headerlink\" title=\"2021年08月28日\"></a>2021年08月28日</h3><p>午饭28，板栗20，奶茶20。这还是没吃早饭、没算晚饭的情况，68没了。坐在小公园思考人生。</p>\n<p>本还想去找女朋友玩，奈何明天又要值班。前天的通宵值班毁了三天的睡眠，事前难以入睡，事中睡得难受，事后疲惫不堪睡不醒。</p>\n<p>“通宵”这个词最初的印象是跟网吧绑定在一起的，小时候给我感觉就像是“准备战斗”前的摩拳擦掌，兴奋不已。但我小那时候从来没有机会通宵，更没有体验过在网吧通宵是什么感觉，长大后在长途火车以及某次KTV体验后，给人的印象只剩下头晕脑胀，不想再有下次。网吧是一个神奇且不可抹去的存在，那个年代网吧可以说几乎等于电脑游戏，给童年为数不多的娱乐方式，添加了无限的乐趣、以及无数的烦恼。计算机和互联网的组合，展现了琳琅满目的虚拟新世界，同大多数人一样通过游戏接触计算机，我仍然记得是《红色警戒2》打开了我计算机的大门，从小就感受到了计算机的神奇魅力，0和1竟然就可以组成一个完整的世界，和DNA的4种碱基AGTC表现出生物的多样性异曲同工，只不过更加精简和谐。只要存在两种不同的“元素”，在不限长度前提下，两者交相变换，就可以组成任何事物、表达一切信息，无论是0和1，还是阴和阳，亦或是+和-，还是N和S。今天让我感慨的不是计算机的精妙绝伦，而是「游戏」。</p>\n<p>从家庭游戏机（小霸王），到街机、电脑游戏，从魂斗罗到合金弹头、红色警戒。为什么每次游戏之前都兴奋激动、游戏之中都沉浸其中、游戏之后都回味无穷。回想起来，我想是游戏无与伦比的代入感，虚拟世界的交互性，短时间反馈的挑战性共同作用，以此而来的成就感，则是快乐的源泉。（感叹那个时候游戏的还有「快乐」的本质。）代入感取决于剧情和形象，交互性取决于游戏世界的自由度，挑战性则取决于设计的巧妙，恰恰是深深的代入感，导致了游戏强烈的局限性，因为游戏是设计出来的。在了解一些计算机和编程的知识之后，脑海里就情不自禁地逆向着游戏的if和for、不断地揣测设计者的心思，那么代入的也就是几个像素，交互的是一堆数据，挑战也变得索然无味。天下游戏，皆可归于两类，“文字游戏”和“动作游戏”。文字游戏在一条线性的主干里，即使开枝散叶，也逃不脱由始到终的命运，如同换皮的数值交换。动作游戏在2D或者3D的空间中变动，坐标变化无穷，时间久了也重复枯燥。</p>\n<p>具体而言，超时空之钥作为“文字游戏”的一种，最初是被《龙珠》所吸引的，后来才知道早已享誉盛名。第一次玩的时候摸不着头脑，看了攻略才开始第二次玩，果然是一类游戏的标杆，各种机制都很丰富，名副其实。但是太耗时间，再者，西式的城堡、国王、公主等元素对不上我的胃口。如果我是主角，我会选择在跟“露卡”越狱后浪迹天涯，拯救世界什么的，光是想想就觉得累。但是游戏的设计不允许我走向别的选择，想玩下去，就必须按照设计者的思路、去拯救世界。可惜我没有在合适的时间遇到这款游戏，所以我选择了到「废墟」就适可而止，剩下的就云通关了。对于一款游戏而言，如果没有童年的情怀加成，现在的我很难有心思再沉浸在其中了。</p>\n<p>荒野之息作为“动作游戏”的代表，还附带极其开放的世界，同样享誉盛名。面对一个全新的世界，一个人奔跑、一个人望天、一个人探索，我感到的不是新鲜感、好奇心、探索欲，反而是更加的孤独，是一种无力的疲惫感，犹如人生只有一次，不想再经历摸爬滚打，一次不多不少，刚刚好。生活的奔波已是身心俱疲，可能我已经过了玩游戏的年纪了，猛然又发现我不是不喜欢塞尔达，而是没有想象中的喜欢游戏，我对于游戏的喜欢只是表面的，更深层次的恐怕是「情怀」和「伙伴」，我怀念的只是记忆中跟小伙伴一起奋战的感觉。如今人心浮躁且焦虑，青春一去不复返，只能于生活之中，孤独前行，再也没有闲情逸致来享受一个个美好的虚拟世界了。</p>\n<p>由此看来，游戏的本质不仅仅是快乐，无论这种“快乐”是积极向上的，还是单纯“一刀999”的爽，游戏的本质还有伙伴、更是文化。</p>\n<p>游戏不仅仅是电子游戏，活动游戏，智力游戏，甚至思维想法都能游戏。沉默寡言的人，都有一颗丰富多彩的心。小时候有一个娱乐形式，就是躺在床上，闭上眼睛，角色扮演，开始冒险。或者在一堆玩具中，赋予他们灵魂，演绎着不同的故事，直到我看到《玩具总动员》，才知道世界还有像我一样的想法、同样孤独的人。有时候坐在车上望着窗外，想着变成一只蝴蝶，在广阔天空中傲游；有时候看到一片草地，想变成一只蚂蚁，在千沟万壑中驰骋。无论是电子游戏，还是现实活动游戏，或是思维想法游戏，都有他们的局限性，无论设计多么精巧，始终谈不上完美。但确实存在一种完美游戏，非人设计，每个人都置身其中，这就是人生。</p>\n<p>人生的游戏，拥有最强的代入感，我就是“我”；也有绝佳的交互性，上下四方的自由开放度无与伦比；「挑战」也层出不穷、「成就」各式各样。这个游戏的规则其实非常简单：由已知生的起点，走向必然死的终点，在道德与法律的限制下，度过这一生。</p>\n<p>也许越是简单的系统，组成的世界越是复杂，没有限制，反而走出了一条按部就班的长路。本没有哪一位“造物主”告诉人类应当如何度过这一生，也没有哪位NPC告诉你在多少级接取哪个任务。但社会的强大合力，推动着每一个人向前走：6岁入学、22岁毕业、30岁前结婚生子，再卖30年青春、搭上父母毕生积蓄、只为一套房。前30年吃学习的苦，没有童年回忆；中30年吃工作的苦，没有生活可言，60岁之后将存款往医院送，也挡不住病痛折磨。</p>\n<p>明白了世界是由物质组成的、明白了意识是真实世界的映射，然后可以说“世界因为我而存在”。诚然“我”的消逝，并不影响太阳东升西落，地球依然自转，人们一切如故。世界仍然客观存在，但对“我”而言，死后的客观世界的存在或者不存在，都没有任何意义。每个人都有一个“我的世界”，当“我”存在时，“我的世界”与真实世界重合；当“我”不存在时，“我的世界”也不存在，同时真实世界也失去了最后的光芒、毫无意义。</p>\n<p>既然如此，那么怎么过都是一生。人生只在道德与法律的约束下，我不是法学专业，只知道法律是最低的道德要求，总结两点自己的道德准则：一不侵犯他人权益、不给他人添麻烦，二不危害公共安全。在此之外，正如罗翔老师所言“理想都是骗人的，都是鬼话，还不如及时行乐，还不如放纵一生，还不如今朝有酒今朝醉。可理想还是存在的，只不过追求理想，一定会很痛苦。”</p>\n<p>理想确实存在，也一定痛苦。对我而言，奔波劳累，刻骨铭心。内有衣食住行之忧，外有发收整办之愁。初心易得，始终难守。无赏无罚，满腔热血付于形式；无功无过，能者多劳疲于奔命。踌躇满志意欲平治天下，酸甜苦辣只能图安一隅。自身难保，何谈为民服务？人力渺小，唯有独善其身。要之死日，是非乃定。</p>\n<p>历史看多了，容易悲观，总会有一种“后之视今，亦犹今之视昔”的无力感，无法打破「重蹈覆辙」的绝望。我也想躺平，可是历史带给我的影响，重塑了我的价值观。恰恰是这种影响导致了我绝大部分的痛苦，《我的团长我的团》中有句话很深刻，“死都不怕，就要安逸。”谁不想安逸呢，每当我贪图安逸不想努力了，安慰自己怎么过都是一生时，历史就来打扰我。每当我踌躇满志时，一方面工作的阻碍就已经应接不暇，另一方面还有生活的毒打，无尽的心酸。归结到底，是个人的能力配不上痛苦的理想，在两者之间反复，不堪其扰。明明自己过的并不好，却也看不得人间疾苦。</p>\n<p>越是经历，越是感觉自己的无知、无能、无奈。并不是由于走的太远而忘记为什么出发，也不是由于贪图享乐而失其本心，更多的是心有余而力不足。万物皆有所待，惟愿在人生游戏“game over”时，能够无悔地打出“good game”，并获得“快乐”和“陪伴”的「成就」，无憾离场。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["游戏","随想","公园","人生","世界"]},{"title":"元旦随想","url":"https://blog.ykqmain.com/2022yd/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2022年01月04日\"><a href=\"#2022年01月04日\" class=\"headerlink\" title=\"2022年01月04日\"></a>2022年01月04日</h3><p>元旦随想</p>\n<p>今年的元旦没什么特别的，我甚至在31日晚上10点就睡过去，并没有像往常一样，熬到0点等到新年的到来，也没有那么在乎仪式感，一来是真的困了，二来是也感觉没有太大的意思。</p>\n<p>元旦假期以来，整理了iCloud照片，从2008年的第一张照片开始，删除了近6000张，达总量的三分之一弱。由于我平时喜欢使用iPhone相机记录生活，所以现在看照片，当天发生了啥、什么心情，我都能回忆起来，真切感到时光飞逝，一个个月为单位流逝。这次整理照片主要是为了两个目的，一个是删除冗余重复的照片，清理出空间；另一个就是删除不愉快的回忆，还是那句话“谁走进我的生命，由命运决定；谁停留在我的生命中，由自己决定。”</p>\n<p>不得不感叹iPhone的精致、Mac的舒服、iCloud的方便、以及苹果的美好。</p>\n<p>2022年初实在是没有太大的感触，可能平时就已经抒发殆尽，跨进新的一年，都会有一个新年目标。虽说很多时候目标都是用来麻痹自己、光阴都是虚度的，但还是不可避免的去树立一个方向，没有方向，则虚无缥缈。</p>\n<p>首先是身体方面：</p>\n<ul>\n<li><input disabled=\"\" type=\"checkbox\"> 不再熬夜，充足的睡眠是每一天的基础，2022的首要目标就是每晚11:30前睡觉，最迟坚决不能过0点。</li>\n</ul>\n<p>其次是学习方面：</p>\n<ul>\n<li><p><input disabled=\"\" type=\"checkbox\">  1、读书，用好豆瓣和微信读书平台，至少完成12本书，平均每个月一本。学习是痛苦的，自律是艰难的，“居安思危。思则有备，有备无患。”</p>\n</li>\n<li><p><input disabled=\"\" type=\"checkbox\">  2、随笔和代码，除了照片可以记录生活，还有文字可以承载思想，它能超越时空，让两个不同时空的人，见字如面。输出是最好的输入，把学到的表达出来才是真的学懂了。新的一年一方面在随笔上继续纪录，另一方面继续在Python上耕耘，抓住最后一丝联系，文理兼修。</p>\n</li>\n<li><p><input disabled=\"\" type=\"checkbox\">  3、兴趣，除了文字创作，更想尝试一下视频，重新捡起视频剪辑，缺的是灵感想法。书法和围棋，能学则学。减少玩游戏的时间，花更多的时间在学习上。</p>\n</li>\n</ul>\n<p>再次是工作方面：</p>\n<ul>\n<li><input disabled=\"\" type=\"checkbox\"> 考研，去年一年乱仗，毫无章法和规律可言。无论是工作的困难、还是租房的艰难，工作少说多做、学习厚积薄发。按时吃饭，按时睡觉，不去想烦心事，但要始终牢记“所有的不快乐，都将化为改变现状的动力”。不要等到需要用到的时候，再来懊悔当初为什么没有去追求，特别是学历。自强不息才是真的，谁都靠不住，谁也不值得依靠。</li>\n</ul>\n<p>最后是外部环境：</p>\n<ul>\n<li><p><input disabled=\"\" type=\"checkbox\">  1、言多必失，朋友圈不再更新，人不知而不愠。“年轻的时候，你总是以为会和许多人志同道合，有点风吹草动就忍不住找人倾诉。和恋人吵个架，恨不得让全世界的人来安慰你。稍感寂寞，就狂喊孤独。但是后来你会发现，有的人，是一起成长的；有的人，是用来遗忘的；能伴你走过一程又一程的，也就屈指可数的几个人”。有个宽敞的桌子、有Mac有网络、有大屏外设，就是我的全世界。关心且只关心我在意的人和事，更多的享受自己的生活，在个人的精神世界里傲游，怡然自得。</p>\n</li>\n<li><p><input disabled=\"\" type=\"checkbox\">  2、勤俭节约，开始攒钱，没什么别的废话，“能省尽省，一切从简。”</p>\n</li>\n</ul>\n<p>众生皆苦，苦中作乐。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["游戏","随想","公园","人生","世界"]},{"title":"快乐是什么？","url":"https://blog.ykqmain.com/kuaile/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2021年10月20日\"><a href=\"#2021年10月20日\" class=\"headerlink\" title=\"2021年10月20日\"></a>2021年10月20日</h3><blockquote>\n<p>快乐是什么？</p>\n</blockquote>\n<blockquote>\n<p>快乐就是当你……<br>快乐就是……<br>就像……<br>和那个什么差不多……</p>\n</blockquote>\n<p>//<br>F is for friends who do stuff together<br>U is for u and me<br>N is for anywhere and anytime at all<br>down here in the deep blue sea</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/main/hmbb.png\"></p>\n<br>\n\n<p>屋顶漏了可以补，城墙塌了可以修，人心伤了无可挽回。</p>\n<p>人确实会在经历一些事情之后，就悄悄的换了一种性格。没意思、不值得、无所谓。</p>\n<p>以德报德，以直报怨。</p>\n<br>\n\n<p>所有的不快乐，都将化为改变现状的动力。居安思危，厚积薄发，等待一个机会，哪怕万里挑一，哀兵必胜。</p>\n<p>确实没有必要用“羌笛”吹奏哀怨的《杨柳曲》去埋怨春光迟迟不来，「春风」根本就吹不到“玉门关”，所有的“恩泽雨露”都与“玉门关”外毫无关系。</p>\n<p>与其等待，倒不如自己努力化作“春风”。如果真有那一天，希望还能不忘初心，自反而缩，到玉门关外，去看看那片片“孤烟”。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["快乐","生活","思变"]},{"title":"外设折腾记","url":"https://blog.ykqmain.com/waishe/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2021年11月30日\"><a href=\"#2021年11月30日\" class=\"headerlink\" title=\"2021年11月30日\"></a>2021年11月30日</h3><p>心心念念一个4K27寸显示器已久，一个简简单单的显示器就可以让我沉浸在幸福中、废寝忘食，我的幸福就是这样简单。回过神来，是如此的卑微和渺小。</p>\n<p>呆坐着、不说话、静下来，愤怒、失落、悲伤，突然惊醒、恍然大悟、兴尽悲来，突然觉得好没意思。</p>\n<p>明明上次才过不久，真是可笑，笑自己好了伤疤忘了疼。被一个个任务塞满了日常，等到晚上和周末这些看似应该闲下来的时间点，就放纵自己，与此同时，还不忘给自己一个借口，以此来平复当时内心的负罪感，以获得某某的谅解，然后冠冕堂皇地做着令自己心情愉悦的事。在最后，假惺惺的忏悔一秒，周而复始，一年又尽。</p>\n<blockquote>\n<p>有人说，知道忏悔就是好的，忏悔说明还有羞耻之心，知耻而后勇。但是，这忏悔太假太假，以至于还不足以打破这个恶性循环。这样看来，把忏悔这个词，换成欺骗自己也说得通。</p>\n</blockquote>\n<blockquote>\n<p>其实这就是欺骗。还披上了“我今天学习过了”的外衣，一起来蒙蔽自己的心。周五，就说什么终于周末，学了一周了，恬不知耻地拿出电脑看视频；刚干完一系列工作，就说什么筹备开展收尾太累，悠然自得地掏出手机刷刷刷；节假日，就说什么庆祝某某吃喝玩乐约不约到处浪；生病了，那就更有底气在床上躺一天了。至于到了年末，理由似乎更充分，反正也做不了什么事了，先定个目标，明年再说。</p>\n</blockquote>\n<blockquote>\n<p>之前一直在疑惑时间都去哪了，静下心来想想，其实我是知道的，电脑、手机、吃喝玩乐、躺在床上等等。我不敢面对那些逝去的光阴，因而我就越是情不自禁地欺骗自己，甚至用“理由”这种词语来装饰“借口”，还欺骗得内心浑然不觉。</p>\n</blockquote>\n<p>我心中有恨，恨每天通过白天的繁忙麻痹夜晚的自己，恨人浮于事、逃避时间、明日复明日，恨半个月没有摸过书本。</p>\n<p>“死都不怕，就要安逸。”</p>\n<p>来到这个世界就是历经磨难，痛苦且毫无意义、渺小又无可奈何，犹如没有存在过一般，最终湮没在历史长河中，随风而逝。</p>\n<blockquote>\n<p>每当我失意之时，我总会看《三国演义》动画版或者电视剧，特别是“三顾茅庐”这一段。</p>\n</blockquote>\n<p>在白天的三点一线下、在夜晚的逃避现实中，以白天繁忙之借口、换夜晚偷闲之心安。我是否也髀里复生、书中生草呢？无论是孟子所说“生于忧患，死于安乐。”还是《左传》有言：“居安思危。思则有备，有备无患。”都指明一个方向、一条痛苦又孤独的道路——</p>\n<p><strong>学习。</strong></p>\n<br>\n\n\n<h3 id=\"2021年12月05日\"><a href=\"#2021年12月05日\" class=\"headerlink\" title=\"2021年12月05日\"></a>2021年12月05日</h3><p>以前我都是一个包、一台笔记本电脑走天下，尽可能的简单。我喜欢精简，系统自带的软件足够好则优先使用；免费或开源的软件其次；最后才是买断制软件；订阅制软件几乎不考虑。在满足自己所需要功能的前提下，将自己的互联网帐号降到最低，涉及到的平台和APP减到最少。</p>\n<p>这次终于下狠心弄了人生第一套桌面环境，虽然也很简陋：桌子小、单屏、无独立音箱，没有Windows台式主机、笔记本屏幕也没有空间展开，但确实舒服和感动🥳</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/waishe/b.jpeg\"></p>\n<p>希望明年某大厂能有一款24或25寸的4K显示器，我是不想再用27寸了。</p>\n<br>\n\n<p>说说我的机械键盘历程。</p>\n<p>一直在用MacBook Pro，其实薄膜键盘我还是挺喜欢的，特别是苹果的Magic Keyboard，以及罗技的MX Keys Mini这种类型的。</p>\n<p>mbp自带的键盘用着也还行，想要入一个键盘的想法主要是想配一个显示器，那么键盘和鼠标则必不可少，就想趁这个机会试试机械键盘，多见识是好事。</p>\n<p>于是开始做功课，搜了一番资料，发现普通的机械键盘由于键帽比较高，一般要配一个掌托才会比较舒服（比如罗技POP KEYS这款就送掌托），我是一个“尽简主义”者，同时有选择困难症，能少一点就少一点，本来想放弃机械键盘，不折腾直接入MX Keys Mini，偶然了解到，机械键盘还有矮轴类型，我感觉这就是为我这类人量身定制的。</p>\n<p>然后是配列的选择，首先排除的就是104键，外接键盘数字区完全没用（用mbp多年早已习惯主键区上方的数字了），同时F功能键区必不可少，最后就在87和84之间犹豫。我在搜寻过程中也了解到京东京造这款键盘，后来又是一个偶然，看到一款矮轴机械键盘，那个配色我一眼就看中了，84（75%）配列的，直接就帮我在87和84做了选择，所以我最后选择了NuPhy Air75。</p>\n<p>最后我鼠标选择了罗技MX Anywhere 3，本来想买苹果触控板，为了同时兼容macOS和Windows还是买了鼠标，本来计划组一个2万的Windows游戏机。后来低估了显示器的价格，迫于贫穷以及气不过显卡的价格，暂时搁置。现在的大屏已经可以爽一段时间了。</p>\n<br>\n\n\n<h3 id=\"2021年12月20日\"><a href=\"#2021年12月20日\" class=\"headerlink\" title=\"2021年12月20日\"></a>2021年12月20日</h3><p>为了买显示器，搜各种资料、还买了仨试了试。</p>\n<p>刚开始搞了个Dell U2720QM，戴尔的旗舰爆款，优点很多，该有的一个不落。缺点有三个，<br>第一，27寸太大；<br>第二，太贵；受疫情影响过去两年不仅没有降价，反而涨了几百，史低3500，<br>第三，做工不是很完美，有缝隙，但不影响使用。</p>\n<p>第二个搞了个U2720QM的小弟——U2520DR。网上都说macOS不适合2K，我还是不信邪，2K25寸屏，其他的参数一致，果然很糊，完全没法用，我坚信macOS最低的第一标准是4K。</p>\n<p>后来又了解了LG、AOC、飞利浦、优派，各种品牌，发现现在的主流4K都是27寸，几乎没有4K的24寸或25寸，优派一款2019的4K24寸从刚出来的1700暴涨到2700，物以稀为贵。不仅是显卡暴涨，显示器也涨价，疫情的影响还会持续很久。2020年基本没有什么新款，老款价格居高不下。</p>\n<p>第三个S2722QC，本来以为可以定下来，各方面都还行，4K和TypeC，也是新款。可以说是U2720QM代替。没想到忽略了一个重要的点，护眼低蓝光功能，这款显示器TUV低蓝光认证为“软件解决方案”，并不是硬件防蓝光，对于大屏长时间使用的显示器来说，护眼功能还是必备的。</p>\n<p>不想折腾，显示器直接入戴尔U系列是最省心的，显示器的每个设计点、每个功能，售后服务、品牌溢价都是钱，选择合适才是最好的，了解这一点，就可以罗列需求清单。</p>\n<p>必备：</p>\n<ul>\n<li>4K；macOS的最低要求</li>\n<li>USB Type-C 65W+；一线通除了方便，还可以不接电源合盖使用</li>\n<li>99%sRGB是基本，P3是锦上添花；</li>\n<li>护眼，硬件防蓝光</li>\n</ul>\n<p>可选：</p>\n<ul>\n<li>25寸&gt;24寸&gt;27寸；最喜欢25寸，27是无奈的选择</li>\n<li>HDR400有更好，HDR600才有质变</li>\n<li>窄边框；单屏无所谓，四边窄边框除了非常好看还适合组多屏</li>\n<li>旋转升降支架</li>\n<li>内置电源</li>\n<li>音响</li>\n</ul>\n<p>折腾近一个月的显示器终于定下来了，果然U2720QM才是最终的归宿，回到了原点，就这样吧，累了。</p>\n<p>这样就把一个笔记本核心，扩充出来了：</p>\n<ul>\n<li>MacBook Pro (13-inch, M1, 2020) (16+256) [Anna]<ul>\n<li>Dell U2720QM</li>\n<li>NuPhy Air75</li>\n<li>Logitech MX Anywhere 3</li>\n<li>8BitDo Pro 2</li>\n</ul>\n</li>\n</ul>\n<p>完美。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/waishe/e.jpeg\"></p>\n<p><br><br></p>\n","categories":["计算机"],"tags":["显示器","键盘","鼠标","手柄"]},{"title":"数学二三事","url":"https://blog.ykqmain.com/2021cj/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2021年01月21日\"><a href=\"#2021年01月21日\" class=\"headerlink\" title=\"2021年01月21日\"></a>2021年01月21日</h3><p>2019年的今天，不辞辛苦、飞奔相约，与两三好友见面的喜悦，难以言表。</p>\n<p>吃着甘蔗、磕着瓜子，喝着茶、聊着天。反映的生活惬意且怀念，以至于现在的我羡慕而不得，越看越有感觉，越看越有故事。盯着看久了，恍惚间，仿佛能透过照片嗅到小时候那种悠闲的气息。</p>\n<p>春天鸟语花香、阳光明媚，周末的娱乐方式就是骑着心爱的自行车，从家里出发，沿线呼叫小伙伴，顺着柏油路一路携手高歌，路两边红白交映，暖风拂过，空气中弥漫着桃梨的芬芳，耳边响起的是许嵩的《城府》。</p>\n<p>歌声会存储的一切，即使经过岁月的洗礼可能会显得“并不太美好”，但当旋律响起时，与之绑定的记忆会很清晰得浮现出来，挥之不去。除了春天那阳光下的欢声笑语，春天里还存储着遥不可及的梦想。</p>\n<p>夏天无法阻挡我想要见到小伙伴的决心，头顶骄阳似火，脚下干裂的泥巴路蜿蜒曲折，路边杂草丛生，有桑树、有池塘、还有高速公路下的涵洞。身上汗流浃背，心里想着的却是天马流星拳和庐山升龙霸，就这样把《地球仪》深深印在了夏天的记忆里。</p>\n<p>当然不可能是只有一个小伙伴的，也许只有那个时候的我，才能体会到什么叫“四海之内皆兄弟也”，今天可能是“奥特曼”，明天是《猫和老鼠》，后天是《赤色要塞》，我们谈论着虹猫蓝兔的侠肝义胆，讲述着憨八龟的故事。甚至在洗澡的时候还哼着“满汉全席不过小菜一碟，三山五岳烩作人生百味”。无知有无知的快乐，我不懂小福贵的悲伤。</p>\n<p>秋天是神清气爽的，所谓“秋风萧瑟天气凉，草木摇落露为霜”。秋天最为契合我的性格，昵称也取自“袅袅兮秋风，洞庭波兮木叶下”。要说秋天的小伙伴，不得不提存储在《秋天不回来》的记忆。他在学校附近租房，印象最深的我每天去上学还能去他家蹭半个小时的动画，就这样追完两部动画连续剧《数码宝贝》和《海绵宝宝》，终身难忘。</p>\n<p>冬天的印象不是白色的雪，也没有春夏秋的色彩，而是寒冷和温暖并存的。寒冷的是早晨窗外的冰霜，温暖的是床上的被窝；寒冷的是老家河边的风，温暖的是门前板凳前的冬阳；寒冷的是“家徒四壁”的空荡，温暖的是常年外出务工的家人年终团聚。这是属于亲人的记忆。</p>\n<p>寒冷的还有早自习的黑夜，寒冷的还有晚自习的月光，寒冷的还有上下学时路灯下的自行车；温暖的则是我孤独和奋斗的心。每天骑着自行车，迎着寒风，哼着小曲回到家，是《四季》陪伴我度过了晚自习的整个冬夜。“看人间，又几番迷离，躲不过凄风冷雨”。这是属于青春的记忆。</p>\n<p>昨晚梦到了华中希望读书社，记得5毛钱租一次的彩色漫画都舍不得，碟片更是“天价”。每次只能拿黑白的《哆啦A梦七小子》和《龙珠》，还生怕看完，看完了还可以传阅发挥最大价值。很多时候，有着对动漫世界的无限向往，看完一部动漫，除了感叹一句“太美好了！”之外，还能给内心的一时愉悦，就像进入了一个新的时空，体验一段不一样的人生。总要回味良久，或悲伤不能自拔，或热血自我代入。动漫里的人物，似乎不用为了衣食住行而担忧，有良辰、有美景，还有最好的伙伴、以及那个不离不弃的她，美好得令人心碎。即使有今生的遗憾，却还有来世的希望。</p>\n<p>现在有钱买到小时候梦寐以求、辗转反侧的东西，却再也得不到小时候的快乐、和那些小伙伴们了。只恨朋友各奔东西，物是人非，两年而已！何况十年。</p>\n<p>现在回想起来，《数码宝贝》的吸引人，因为它讲述了8个孩子的成长，其中或多或少有我们自己的影子，而成长必须需要经历。有一段分析令我印象深刻，“知道为什么都是亚古兽第一个进化吗？那是为了告诉你，无论做什么事，先用「勇气」开道。知道为什么巴达兽总是最后一个进化吗？那是因为当你的「友情、诚实、爱心、知识、纯真、光明」都被现实无情的击碎后，仍要充满「希望」”，思考良久。还有所谓的“赛亚人”血统，每次濒死复活后战斗力又会得到极大的提升。其实这是每个“人”都拥有的特性，在实践和磨难中摸爬滚打，只要人还在，就能不断变得强大。</p>\n<p>人生由各种经历组成，一味地从他人嘴里了解一件事，无论他讲得多么生动形象具体，在我看来都是抽象且遥远的，不是不想懂，也不是不懂装懂，而是不能懂。“纸上得来终觉浅，绝知此事要躬行。”无论酸甜苦辣，还是悲欢离合，都是「成长」必经之路，无法避免。</p>\n<p>“欲买桂花同载酒，终不似、少年游。”也许十年后再回过头看现在的时光，也会感概良多，只是希望不要因为走得太远而忘记为什么出发，不忘初心，方得始终。</p>\n<br>\n\n\n<h3 id=\"2021年02月16日\"><a href=\"#2021年02月16日\" class=\"headerlink\" title=\"2021年02月16日\"></a>2021年02月16日</h3><p>送走了最后一个朋友上了车，意味着春节假期即将结束，这个春节短暂且令人怀念。</p>\n<p>短暂的7天，除去拜年的三天和提前一天的启程，在剩余的时间里，实在难以安排，与时间赛跑，见缝插针去见想见的人、说想说的话。</p>\n<p>除夕的上午，终于约到了老朋友，还是老三样，白开水、甘蔗和瓜子，几个凳子一围，吃着甘蔗、磕着瓜子、晒着太阳，这一趟就值了。康哥一言不发，穿上一双彩虹色的鞋，就是整条街上最靓的仔。</p>\n<p>除夕的晚上，则是家庭的常规节目，春晚。一家人躺在沙发，看着春晚聊着天，等新年。窗外万家灯火，年味却越来越淡，不知道是人的成长，或是风气的改变，但亲朋好友的感情还是一如既往。</p>\n<p>第二个老朋友，是风雨里一起走过来的。终于见得一面，从银泰城到万达，讲了这一年想要说的话，在大雾弥漫的公园里，有只鸭子应该很快乐。</p>\n<p>第三个老朋友，是多年没有联系的。还是同样的公园，诉说着近几年的经历。不一样的是天朗气清，阳光和煦。五颜六色的帐篷，温馨的亲子活动，散步拍照的路人，悠闲惬意、热闹非凡。原来真的有人，还在玩着十年前玩过的、现在已经不更新、几乎无人在线的网络游戏，乡音无改，相隔万里，感慨万千。</p>\n<p>对于李斯而言，他最开始想要的幸福就是“辅秦皇以成帝业”，临死前想的却是希望能够和儿子牵着小黄狗在老家东门去打猎，想着的是亲人、是家乡、是柴米油盐的生活气。北上广深的阳光似乎都标好了价格，而家乡的花草树木、清风明月取之无禁，用之不竭。</p>\n<p>我想要的幸福，也许是名垂青史、流芳百世；也许就是能时不时携两三好友在公园散散步、谈谈心，有温馨家庭足矣。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["快乐","生活","改变"]},{"title":"数学二三事","url":"https://blog.ykqmain.com/shuxue/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2021年10月30日\"><a href=\"#2021年10月30日\" class=\"headerlink\" title=\"2021年10月30日\"></a>2021年10月30日</h3><p>今天中午想买个小刀方便开快递，打开手机在淘宝和京东之间辗转。终于找了一个旗舰店，且不错的产品，有一把小刀，还有一个剪刀（图一）。奈何只要19元，京东不包邮，又回到淘宝得力旗舰店，翻烂了都找不到这个组合，不甘心在淘宝第三方店铺买，更不甘心付那8元的快递费[苦涩]。回到京东想凑单，把那个快递费给免了。于是开始了不务正业之旅。<br>本想买个洗面奶凑单，找不到合适的，就想到了搞两本书籍，正好最近需要把高中以下的数学捡起来，就想了解数学类书籍，最好跟计算机有关。</p>\n<p>买书信赖出版社，正如中国古籍权威在中华书局和上海古籍出版社，计算机类图书就在人民邮电出版社和机械工业出版社。<br>在出版社的京东自营店目录下随便翻翻，就发现了这本《具体数学：计算机科学基础》（图二），看着包装精致，点进去看了一下，就在想啥时候“具体”数学成了计算机的数学基础？啥是“具体”数学，难道还有“抽象”数学？数学不都是抽象的吗？[汗]<br>搜了一下，根据此书原序，书名Concrete Mathematics中的 Concrete 系由连续 (CONtinuous） 配上离散 (disCRETE）所组成的词，真正含意并非字面所翻译的“具体”，更不是“混凝土”，而是指该书讲述的数学实质上就是由「连续」数学与「离散」数学共同构成的。如何把一个实际问题一步步演化为数学模型，然后通过计算机解决它。</p>\n<p>说到离散数学，看起来名字有点高大上，其实并不属于数学系，而是地地道道的计算机科学基础课程，我对其有一丝印象，因为学过（图三右六），但又想没学过一样[破涕为笑]。离散数学对算法大有裨益，学一学不会太坏。就决定买一本。<br>然而京东自营图书满100减50，满200减100。没办法，接着凑吧[Emm]。理工之理为科学，理工之工为技术，科学偏理论，技术偏实践，科学抽象化，技术具体化。数学就是科学的代表，接着凑一本技术书籍，既完美又和谐。（图四）<br>抬头一看，夜幕降临，该吃饭了[666]。回想我中午仅仅是想买一个小刀[捂脸]，果然不买立省100%才是真理。半天就这样过去了，等王者的晚会。[让我看看]</p>\n<br>\n\n\n<h3 id=\"2021年12月12日\"><a href=\"#2021年12月12日\" class=\"headerlink\" title=\"2021年12月12日\"></a>2021年12月12日</h3><p>看着数学中那些熟悉的概念，明明知道它在讲什么，但无论如何努力去回忆，就是无法具体化，可能这就是「既熟悉又陌生」的感觉，甚至从小到大每个数学老师讲课的情形都能在我的脑海中清晰地浮现，因式分解、相似三角形、恒有f(x1)&gt;f(x2)的单调性、给几何插上向量的翅膀化为代数问题、插空分组、函数的连续和间断、夹逼定理、常微分方程等等，就像水中月、镜中花，美好的事物明明就在眼前、貌似触手可及，却是永远无法触碰到的。这种无力感在于熟悉老师们在讲台上授课的情形、却陌生于我在课堂外的人生实践；在于熟悉曾经的一切还印在我心里、却陌生于未来的目标抛诸脑后；在于熟悉012的和差积商、却陌生于xyz的排列组合。</p>\n<p>不禁感叹高三真的就是人生巅峰，小球的落点、分子的变化、豌豆的性状，专注而沉浸其中，现在我甚至看不懂abandon是什么意思。已知小球的初始状态，能推测出不同时刻的坐标，貌似轨迹早已注定。人就像其一样，也许出生的那一刻，人生历程已经由某个黑盒函数计算得出，剩下的仅仅是随着时间流逝慢慢经历，由未知走向已知罢了。</p>\n<p>太多两难之事。<br>害怕上班了。<br>却不得不工作。</p>\n<p>我们都因为贫穷而变得现实，忘了我们的生活追求到底是什么，成为金钱的奴隶，太容易向现实低头，最终失去了所有的浪漫。</p>\n<p>退求其次，我只想要一个显示器点缀我灰色的生活，使得我能找到遗失已久的、短暂的专注，任它窗外狂风怒号，我沉浸在我的世界怡然自得。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["快乐","生活","改变"]},{"title":"高考随想","url":"https://blog.ykqmain.com/gaokao/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2021年06月06日\"><a href=\"#2021年06月06日\" class=\"headerlink\" title=\"2021年06月06日\"></a>2021年06月06日</h3><p>看着仅存的几张高中照片，一晃高考过去7年了，天南地北经历了太多，以武汉为大本营，北到北京，南至深圳，东达杭州，西边是个遗憾。</p>\n<p>我们现在羡慕学生时代，等到了中年又怀念青年，老了悔恨不是中年，最后到头来，哪个阶段都没有过好。其实每个时期都有烦恼，未来也有美景，但最重要的还是现在。</p>\n<p>人生就是各种经历组成的，总想着过了这个坎就好了，小时候等长大就好了、高中等高考就“解放”了、大学等毕业就“独立自由”了。事实上人生自从成年了就不会好了，大人就没有容易的，坎坷无穷无尽，烦恼至死方休。完全没有必要急着赶下一趟旅途，每个阶段都是不一样的风景，时光飞逝，珍惜当下。</p>\n<p>事非经过不知难，人非经历不能懂。光经历还远远不够，善于总结、类比、归纳演绎所得的经验才是无价的。然而对一个事情的经验无论讲得多么生动形象，在没有经历的人看来，都是抽象且遥远的，不是不想懂，也不是不懂装懂，而是不能懂。</p>\n<p>我相信对于绝大多数的高中生都“懂得”高考的重要性，所以要努力学习。但这种“懂得”是来源于自己学识的推理、来源于家庭的教育、来源于社会的共识，由于他们没有真正经历过，所以这种“懂得”是理性且极其抽象的，高考到底有多重要？我该以各种程度应对这种重要？在绝大多数考生的意识里，是空中阁楼，看似懂得重要性，实则是不能懂。</p>\n<p>同时我更相信，对于踏入社会3、4年的成年人来讲，对于高考的重要性则是感性且具体的，这个时候再来谈重要性是不言而喻的，这种显而易见的转变既不是来源于知识的推理，也不是来源于他人的忠告，而是源于亲身体会了。</p>\n<p>有的坑是必须自己去踩了才明白有多深，人生有太多的事情要去经历，多经历并不是坏事。但值得注意的是人的生命是有限的，夕阳西下第二天还会升起，人生过一年少一年。在很多时候，亲身经历懂了之后，往往到了这个时候，为时已晚，再无回头的时间。</p>\n<p>这个时候就非常迫切想要获得预见能力，否则我们的见识和决定总感觉晚了一步。</p>\n<p>知晓过去才能把握当下，进而决定未来。历史简直就像是人生试卷的答案，然而后人照着抄都抄不好。“以史为鉴”此言貌似极度精炼，一针见血颇有道理，并且古今中外皆有共识。</p>\n<p>然而现实也许并没有那么简单直接明了。对个人而言吸取教训都是如此之难，何况是整个人类社会呢？以史为鉴？吸取教训是不可能的，这辈子都不可能的，下辈子也不行。</p>\n<p>「已有之事，后必再有；已行之事，后必再行。」人类从历史中学到的唯一的教训，就是没有从历史中吸取到任何教训。除了科学技术发达了，改变了生活，本质却没有变。科技是表，人与人之间的关系才是里，科技只能改变人与自然的绝对距离，改变不了人与人的相对距离，而人与人的关系才是社会的本质。</p>\n<p>“以史为鉴”的不可能，不是由你我他所能左右，但“顺势而为”，也许能够有些作用。某些矛盾不可调和，换个思路也许能够跳出这个矛盾的漩涡。</p>\n<p>每个时期都有烦恼，追求完美浪费时间、徒增悲伤，倒不如把握当下、享受生活。</p>\n<p>每当我失意之时，我总会看《三国演义》电视剧或者动画版，特别是“三顾茅庐”这一段，大概算起来起码有二十次。</p>\n<p>「求田问舍，怕应羞见，刘郎才气。可惜流年，忧愁风雨，树犹如此。倩何人唤取，红巾翠袖，揾英雄泪。」</p>\n<p>刘备除了姓刘，一无所有。白手起家，起起伏伏。历经磨难，百折不饶。终于称帝，令人向往。中道崩殂，为其遗憾。“髀里肉生，慨然流涕。”非经历不能懂刘玄德也。给了我很多力量，多少年后，我也就是个统计数字罢了。</p>\n<p>为了弥补西边的遗憾，成都之旅板上钉钉，为了去看看备备和亮亮，还有那个我心中最伟大的、从未年轻的诗人。</p>\n<p>对于高考，虽然不是人生唯一出路，在我看来，却是寒门唯一捷径。</p>\n<p>“总有一天，你回过头来看看，<br>你就会发现，你的每个经历、每次错误、每次失败，<br>都帮助你走向了——<br>你应该成为的那个人。”</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["随想","高考","教育","经历"]},{"title":"博客重启暨2021年词云图","url":"https://blog.ykqmain.com/2021wc/","content":"<blockquote>\n<p>只是在我心中还有一方净土，即使在别人眼里寸草不生，却始终一尘不染。</p>\n</blockquote>\n<p><strong>The Blog is Online, again.</strong></p>\n<p><a href=\"https://blog.ykqmain.com/\">https://blog.ykqmain.com</a></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/2021wc/Blog.png\"></p>\n<hr>\n<br>\n\n<p>思虑再三，决定重启博客，并升级了<code>Hexo</code>，果然生成速度快了很多，也清理了冗余数据，开始逐渐整理文章。重新出发，在这一方网络天地。</p>\n<p>博客再次上线之后，自然是常规的动作，年终总结。</p>\n<p>今年发现一个不一样的玩意<code>wordcloud</code>，那就来折腾一番，对2021年34篇长短不一样的随想进行词频分析，一篇少则一段话二三十字，最多的一篇公园随想有三千多字，主题就是游戏和人生。</p>\n<p>文件夹结构如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── cy.py</span><br><span class=\"line\">├── re</span><br><span class=\"line\">│ ├── 1.jpg</span><br><span class=\"line\">│ └── baidu_stopwords.txt</span><br><span class=\"line\">└── txt</span><br><span class=\"line\"></span><br><span class=\"line\">2 directories, 3 files</span><br></pre></td></tr></table></figure>\n\n<p>代码如下，注释完备：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">环境需求：</span></span><br><span class=\"line\"><span class=\"string\">Python 3.6+</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">安装依赖：</span></span><br><span class=\"line\"><span class=\"string\">pip3 install jieba wordcloud matplotlib Pillow</span></span><br><span class=\"line\"><span class=\"string\">可选依赖</span></span><br><span class=\"line\"><span class=\"string\">pip3 install python-docx scikit-learn</span></span><br><span class=\"line\"><span class=\"string\">如有网络问题先设置镜像，</span></span><br><span class=\"line\"><span class=\"string\">pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">使用方法：</span></span><br><span class=\"line\"><span class=\"string\">打开终端，输入&quot;python FileName.py&quot;回车</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">命名习惯：</span></span><br><span class=\"line\"><span class=\"string\">变量：下划线</span></span><br><span class=\"line\"><span class=\"string\">常量：全大写</span></span><br><span class=\"line\"><span class=\"string\">函数、方法：小驼峰</span></span><br><span class=\"line\"><span class=\"string\">类名：大驼峰</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Creation Date: 2022-01-18</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> jieba  <span class=\"comment\"># 结巴库对中文分词</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> wordcloud <span class=\"keyword\">import</span> WordCloud  <span class=\"comment\"># wordcloud库生成词云图</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt  <span class=\"comment\"># matplotlib库用来画图</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image  <span class=\"comment\"># Pillow库处理图片</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np  <span class=\"comment\"># 科学计算库，matplotlib的依赖，安装matplotlib时会自动安装numpy</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os  <span class=\"comment\"># 系统库</span></span><br><span class=\"line\"><span class=\"comment\"># 可选功能</span></span><br><span class=\"line\"><span class=\"comment\"># from docx import Document  # python-docx库处理docx文件</span></span><br><span class=\"line\"><span class=\"comment\"># from sklearn.feature_extraction.text import CountVectorizer  # scikit-learn机器学习库统计词频</span></span><br><span class=\"line\"><span class=\"comment\"># import csv</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fileName</span>(<span class=\"params\">file_dir</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&#x27;遍历文件夹，返回指定后缀的文件名列表&#x27;</span></span><br><span class=\"line\">    L = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> root, dirs, files <span class=\"keyword\">in</span> os.walk(file_dir):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> file <span class=\"keyword\">in</span> files:</span><br><span class=\"line\">            <span class=\"comment\"># if os.path.splitext(file)[1] == &quot;.docx&quot;:  # 筛选.docx文件</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> os.path.splitext(file)[<span class=\"number\">1</span>] == <span class=\"string\">&quot;.txt&quot;</span>:  <span class=\"comment\"># 筛选.txt文件</span></span><br><span class=\"line\">                L.append(os.path.join(root, file))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> L</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27; 备用方式，从docx读取数据</span></span><br><span class=\"line\"><span class=\"string\">def readDoc(docx_name):</span></span><br><span class=\"line\"><span class=\"string\">    &#x27;借助python-docx库读取.docx文档，不支持.doc后缀&#x27;</span></span><br><span class=\"line\"><span class=\"string\">    document = Document(docx_name)  # 打开word文档</span></span><br><span class=\"line\"><span class=\"string\">    # 获取所有段落</span></span><br><span class=\"line\"><span class=\"string\">    all_paragraphs = document.paragraphs</span></span><br><span class=\"line\"><span class=\"string\">    # 打印看all_paragraphs类型</span></span><br><span class=\"line\"><span class=\"string\">    print(type(all_paragraphs))  # &lt;class &#x27;list&#x27;&gt;，打印后发现是列表</span></span><br><span class=\"line\"><span class=\"string\">    # 是列表就开始循环读取</span></span><br><span class=\"line\"><span class=\"string\">    L = []</span></span><br><span class=\"line\"><span class=\"string\">    for paragraph in all_paragraphs:</span></span><br><span class=\"line\"><span class=\"string\">        # 打印每一个段落的文字</span></span><br><span class=\"line\"><span class=\"string\">        # print(paragraph.text)</span></span><br><span class=\"line\"><span class=\"string\">        L.append(paragraph.text)</span></span><br><span class=\"line\"><span class=\"string\">        # 循环读取每个段落里的run内容</span></span><br><span class=\"line\"><span class=\"string\">        # for run in paragraph.runs:</span></span><br><span class=\"line\"><span class=\"string\">            # print(run.text)  # 打印run内容</span></span><br><span class=\"line\"><span class=\"string\">    return L</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">file_list = fileName(<span class=\"string\">r&#x27;./txt/&#x27;</span>)  <span class=\"comment\"># 获取文档文件夹下所有文件名</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(file_list, <span class=\"built_in\">len</span>(file_list))  <span class=\"comment\"># 文档列表，文档数量</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27; 备用方式，处理docx文档</span></span><br><span class=\"line\"><span class=\"string\">temp_text = []</span></span><br><span class=\"line\"><span class=\"string\">for x in range(len(file_list)):</span></span><br><span class=\"line\"><span class=\"string\">    docx = &#x27; &#x27;.join(readDoc(file_list[x]))</span></span><br><span class=\"line\"><span class=\"string\">    temp_text.append(docx)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># # 导入文本数据并进行简单的文本处理</span></span><br><span class=\"line\">temp_text = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(file_list)):</span><br><span class=\"line\">    txt = <span class=\"built_in\">open</span>(file_list[x], encoding=<span class=\"string\">&#x27;utf8&#x27;</span>).read()</span><br><span class=\"line\">    temp_text.append(txt)</span><br><span class=\"line\"><span class=\"comment\"># print(temp_text)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">text = <span class=\"string\">&#x27; &#x27;</span>.join(temp_text)</span><br><span class=\"line\">text = text.replace(<span class=\"string\">&#x27;\\n&#x27;</span>, <span class=\"string\">&quot;&quot;</span>).replace(<span class=\"string\">&quot;\\u3000&quot;</span>, <span class=\"string\">&quot;&quot;</span>)  <span class=\"comment\"># 去掉换行符和空格</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 结巴库分词，返回结果为词的列表</span></span><br><span class=\"line\">text_cut = jieba.lcut(text)</span><br><span class=\"line\"><span class=\"comment\"># 将分好的词用某个符号分割开连成字符串</span></span><br><span class=\"line\">text_cut = <span class=\"string\">&#x27; &#x27;</span>.join(text_cut)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(text_cut)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 导入停词</span></span><br><span class=\"line\"><span class=\"comment\"># 用于去掉文本中类似于&#x27;啊&#x27;、&#x27;你&#x27;，&#x27;我&#x27;之类的词，网上有现成的成熟的停词表</span></span><br><span class=\"line\">stop_words = <span class=\"built_in\">open</span>(<span class=\"string\">&quot;./re/baidu_stopwords.txt&quot;</span>, encoding=<span class=\"string\">&quot;utf8&quot;</span>).read().split(<span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 图像的形状</span></span><br><span class=\"line\">background = Image.<span class=\"built_in\">open</span>(<span class=\"string\">&quot;./re/1.jpg&quot;</span>)</span><br><span class=\"line\">graph = np.array(background)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用WordCloud生成词云</span></span><br><span class=\"line\">word_cloud = WordCloud(</span><br><span class=\"line\">    font_path=<span class=\"string\">r&#x27;/Users/yang/Library/Fonts/HanyiSentyTang.ttf&#x27;</span>,  <span class=\"comment\"># 设置词云字体，macOS</span></span><br><span class=\"line\">    <span class=\"comment\"># font_path=r&#x27;C:\\Users\\Yang\\字体\\仿宋_GB2312.ttf&#x27;,  # 设置词云字体，Windows</span></span><br><span class=\"line\">    collocations=<span class=\"literal\">False</span>,</span><br><span class=\"line\">    background_color=<span class=\"string\">&quot;white&quot;</span>,  <span class=\"comment\"># 词云图的背景颜色</span></span><br><span class=\"line\">    width=<span class=\"number\">2560</span>, height=<span class=\"number\">1440</span>,</span><br><span class=\"line\">    max_words=<span class=\"number\">2000</span>,</span><br><span class=\"line\">    mask=graph,  <span class=\"comment\"># 指定词云的形状</span></span><br><span class=\"line\">    stopwords=stop_words  <span class=\"comment\"># 去掉的停词</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;开始生成词云&#x27;</span>)</span><br><span class=\"line\">word_cloud.generate(text_cut)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 运用matplotlib展现结果</span></span><br><span class=\"line\">plt.subplots(figsize=(<span class=\"number\">12</span>, <span class=\"number\">8</span>))</span><br><span class=\"line\">plt.imshow(word_cloud)</span><br><span class=\"line\">plt.axis(<span class=\"string\">&quot;off&quot;</span>)  <span class=\"comment\"># 关闭x,y轴</span></span><br><span class=\"line\">plt.show()  <span class=\"comment\"># 显示</span></span><br><span class=\"line\"></span><br><span class=\"line\">word_cloud.to_file(<span class=\"string\">&#x27;ciyun.jpg&#x27;</span>)  <span class=\"comment\"># 保存词云图</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;已保存图片&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># # 使用CountVectorizer统计词频</span></span><br><span class=\"line\"><span class=\"comment\"># cv = CountVectorizer()</span></span><br><span class=\"line\"><span class=\"comment\"># contents_count = cv.fit_transform([text_cut])</span></span><br><span class=\"line\"><span class=\"comment\"># # 词有哪些</span></span><br><span class=\"line\"><span class=\"comment\"># list1 = cv.get_feature_names()</span></span><br><span class=\"line\"><span class=\"comment\"># # 词的频率</span></span><br><span class=\"line\"><span class=\"comment\"># list2 = contents_count.toarray().tolist()[0] </span></span><br><span class=\"line\"><span class=\"comment\"># # 将词与频率一一对应</span></span><br><span class=\"line\"><span class=\"comment\"># contents_dict = dict(zip(list1, list2))</span></span><br><span class=\"line\"><span class=\"comment\"># # 输出csv文件,newline=&quot;&quot;，解决输出的csv隔行问题</span></span><br><span class=\"line\"><span class=\"comment\"># with open(&quot;cipin.csv&quot;, &#x27;w&#x27;, newline=&quot;&quot;) as f:</span></span><br><span class=\"line\"><span class=\"comment\">#     writer = csv.writer(f)</span></span><br><span class=\"line\"><span class=\"comment\">#     for key, value in contents_dict.items():</span></span><br><span class=\"line\"><span class=\"comment\">#         writer.writerow([key, value])</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># print(&#x27;完成&#x27;)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n<br>\n\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/2021wc/ciyun.jpg\"></p>\n<br>\n\n<p>从图可知2021年想的最多的关键词是：游戏、世界、人生、经历和学习。</p>\n<p>2021年的经历，让我对所有制、民主、以及形式主义三个方面有了更加辩证、理性、深刻地认识，看待事物和问题也更加全面和长远。就像我之前总是一味地把历史的轮回归结于私有制的斗争和兼并，对形式主义也深恶痛绝，现在我有了更多的想法，以海纳百川的态度和眼光去走出固有思维的偏见，将会发现不一样的世界。</p>\n<p>历史总是有惊人的相似，缩小到个人也有似曾相识的感觉，在北京的那个夏天，和现在的处境，让我读懂了孟子说的“生于忧患死于安乐”，事与愿违的未来也有可能是如愿以偿，后之视今，亦犹今之视昔。</p>\n<p>希望2022年的关键词是「奋斗」，为个人理想而奋斗、为家庭幸福而奋斗、为国家发展而奋斗，毕竟奋斗的样子最迷人。</p>\n<p>无论成败。</p>\n<p><br><br></p>\n","categories":["生活"],"tags":["回忆","Python","博客","编程","2021"]},{"title":"计算机之路","url":"https://blog.ykqmain.com/cs/","content":"<p>随便聊聊我的计算机之路，以及我的近况，本文的主题也许算是「离别」。留个记录，给人生一个节点，再开启新的征程。</p>\n<br>\n\n<hr>\n<br>\n\n\n<p>小学时期，<strong>《红色警戒2》</strong>打开了我的计算机大门，从此开启了我的计算机之旅。沉迷在新世界，这里探索一下、那里折腾一番，没有体系。</p>\n<p>我接触编程语言不算早，初中时期家里才拥有了第一台电脑（联想台式），这时候我才第一次接触编程语言——<strong>C语言</strong>。犹如昙花一现，埋没在少年的记忆中，唯独<strong>函数</strong>这个思想深深印在脑海。</p>\n<br>\n\n<p>时间过得很快，再见面，就已经是高中毕业了，由于对计算机的喜爱，大学专业毫不犹豫地选择了<strong>计算机科学与技术</strong>。</p>\n<p>高考后我拥有了人生中第一台笔记本电脑（联想），取了一个名字——<strong>Anna</strong>。</p>\n<p>抱着我的第一代Anna来到学校，伴随着高考失败，心态爆炸。然后辗转到图书馆做了一学期管理员，心稍微静了下来。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/anna1.jpg!sy\"></p>\n<p>大学的开始毫无疑问是C语言，关于C语言的学习，教材的每一个例子我都动手敲了，用的是Visual Studio，一个章节建一个项目。除此之外，还把<a href=\"https://book.douban.com/subject/1240002/\">《C Primer Plus》</a>和<a href=\"https://book.douban.com/subject/1139336/\">《C程序设计语言》</a>学了若干遍，当然这时候我开始用上了编辑器，把VS中的<code>cl.exe</code>单独拿出来在cmd中编译运行C。当时的想法是，赶紧学完C，复习一遍，再巩固一遍，最后告别一遍。<strong>每种流行的编程语言都有适合的场景以及它自己的生态</strong>，在我看来，C是系统级别和硬件级别的语言，不得不学、但又不是那么称手，适合入门编程，作为自己的基础，隐藏在底层。</p>\n<p>在大一寒假初次接触Linux，在我的Anna上折腾Ubuntu和windows的双系统，浏览器全面转向Firefox，遇到有趣的游戏——韦诺之战(The Battle for Wesnoth)。</p>\n<p>到了大一下学期，手机已经坏了2个，本来想尝试小米，奈何总是无货，一气之下打开了Apple的官网，从此打开了更大世界的大门。得到了人生第一部Apple设备——iPhone 6，与我的笔记本电脑对应，我给她取名<strong>Nana</strong>，她们是我最好的朋友。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/nana.jpg!sy\" width=\"480\">\n\n<p>如果说C带领我踏上编程之路，那么Java就让我深刻理解了<strong>「面向对象」</strong>思想。</p>\n<p>即使我学习了面向对象，可我对Java仍然不喜欢，甚至说有点厌恶。最直观的感受，就是从C的语法到Java的语法不适应感。但不喜欢归不喜欢，我仍然把教材的例子全部敲了一遍，这时候接触到了Eclipse，以及尝试用记事本写Java（现在看来完全没必要记事本，还是专业文本编辑器好一些）。要说也得益于记事本手敲代码，我对面向对象思想确实有一种理解了的感觉。完美主义的驱使下，即使不喜欢Java，但我仍然想给它一个句号，自己买了<a href=\"https://book.douban.com/subject/25762168/\">《Java核心技术》</a>两本，学了一遍。也是这个时候接触的<strong>Sublime Text</strong>，养成了能不用IDE就不用的习惯，反正都是些几行代码的小玩意。</p>\n<p>大一的暑假来临，由于自己更偏向于C系语言，很自然地想要向C++进发。那个夏天我去北京跟父母一起度过，那个房间的微风，我至今记忆犹新。<a href=\"https://book.douban.com/subject/25708312/\">《C++ Primer》</a>和下载的动漫，陪伴了我整个暑假。随着对计算机行业的深入了解，以及对C++的学习体会，我发现他的复杂确实如网友所言，以我的能力无法驾驭，C++也就在这里不了了之，不过<strong>C++的迭代器和Vector</strong>令我印象深刻。暑假之末，我得到了父母“馈赠”的人生中第一台苹果笔记本——MacBook Pro (Retina, 13-inch, Early 2015)，我把这台笔记本仍然取名Anna（很显然她是第二代Anna了）。<strong>OS X</strong>这个全新的系统，毫无疑问是非常有吸引力的，折腾了好久，热情至今丝毫不减，喜爱程度难以言表。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/anna2.jpg!sy\"></p>\n<br>\n\n<p>大二新学期的开始，学校的课程大多是数学、物理、电工、数电之类的课程，我又刚接触OS X，在折腾新系统各个功能、探访各个角落的同时，我的目光转向了iOS开发，即Objective-C，虽然当时Apple已经发布了Swift，因为还不成熟，我仍然打算先过一遍Objective-C，然后再来一遍Swift。沉浸于图书馆几个月，看了几本书和一些视频。我认为iOS开发也许并不是一个好选择，需求不大，市场饱和，再加上Apple Developer账号的收费机制，我又放弃了一个方向。不过，我仍然在这个过程收获了<strong>MVC模式</strong>。</p>\n<p>知识和见识越来越广，之前在编译型语言兜兜转转，放弃iOS之后，打算找一门解释型语言玩一玩。层层筛选下来，最后在Perl、Ruby和Pyhton之间举棋不定，至于JavaScript，当时的我认为它只适合前端，遂没有考虑。我的印象中，在图书馆找了好几本书对比，甚至夜晚跑步的时候也在纠结选哪个，网上也搜了很多资料。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/language.JPG\"></p>\n<p>当时比较了很多项，也纠结了很久，如果我没记错的话，决定的最主要原因是：Perl因为太老而首先排除，Ruby资源的母语是日语，而Python是英语。要知道一门外语对我而言是非常困难的，我就是那种没有一丝外语天赋的人，即使英语学了这么多年，还是这个水样子，而英语明显更为通用。<strong>我最后选择了Python</strong>，之后在图书馆通过<a href=\"https://book.douban.com/subject/25880388/\">《Python基础教程》</a>正式接触Python。</p>\n<p>Python基础之后，也没有上手什么项目。厌烦了通过hosts方式上Google，极其不稳定和慢速。偶然得知了VPS，便开启了SS之门，就像打开潘多拉魔盒。我的行动完全转向，重访Google，开启Twitter之旅。写了第一个网页，又萌生写博客的想法，于是立即动手，折腾WordPress废寝忘食。觉得博客应该专注内容，又了解到Hexo，于是把Blog迁移到Hexo。期间买了几个域名，最后还是在com稳定下来。</p>\n<p>这一折腾，就是寒假来临。这个寒假，我又复习了一遍《C Primer Plus》和《C++ Primer》，后来我还偶尔翻过C，但再也没有看过C++了。</p>\n<p>大二下学期，学校的课程关于编程语言的很少了，开始安排上了数据库、数据结构、汇编语言、计算机网络等课程。把重心放在了数据库上，同时买了一个iPad，新玩意又沉浸其中很久，不过不到一学期我就发现了iPad的鸡肋，自此将其给我妈用了。开始尝试Web开发。HTML很好，但是JavaScript则是浅尝则止，CSS更是无从下手，对我而言，太繁杂了，技术更新太快，毫无头绪。而且我自认为前端需要一点设计技能，这对一个强迫症患者，简直是噩梦。即使说JavaScript是每个程序员应该掌握的技能，但至今我仍然只敢说我仅仅熟悉HTML，而对JavaScript了解还算不上。期间我又看了一遍《Java核心技术》，博客也一直在更新。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/tsg.jpeg!sy\" width=\"480\">\n\n<br>\n\n<p>大三的时候，学校开始教C++，由于我已经重复翻过多次，但又不打算深入学习，应付考试完全足够，所以没啥感觉就上完了。同时还有编译原理、操作系统、计算机组成原理、微型计算机原理与接口技术、以及PHP，对PHP无感，只记得做了一个成绩信息系统就过了。</p>\n<p>在那之后，我基本不接触新的编程语言了，而是暂时专注在计算机的其他的方面，比如数据库和计算机网络，对macOS和Linux的探索也足够的多。经历了这么多，对Java的讨厌，也逐渐转变为不喜欢，即使不喜欢，却还是隔三差五就把《Java核心技术》拿出来翻翻。也许这就是缘分，不喜欢Java，整个大学在这门语言上花的时间却最多。</p>\n<br>\n\n<p>2017年开始，大三下学期的课程主要有计算方法、软件工程、R语言、数据仓库和数据挖掘、信息安全，以及各种设计报告的实践课程，内容丰富，加上要准备考研事宜，时光飞逝；连接大四上学期，基本就彻底没有时间跟计算机打交道了，大四的课程我印象中只有大数据和人工智能而已，时间大多在备考。</p>\n<p>考研一战失败，大四下学期的任务只有实习和毕业设计。期间去深圳屡屡碰壁，让我决心考研二战，于是回来天天在图书馆专心搞毕业设计。这段时间对互联网有了更深的认识，也沉浸折腾了一番，最后完成了一个Java实现的FTPClient。</p>\n<p>时间过得真的很快，就这样毕业了。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/book1.JPG!sy\"></p>\n<br>\n\n<hr>\n<br>\n\n\n<p>考研二战也以失败告终，家里有些变故、社会的险恶，中间的一些插曲就不在此谈了。</p>\n<p>2019年必须得出去找工作了，在综合考虑后，那个春节我又全面深入学习了Python，没等元宵节就北上开启了北漂之旅。原本我更希望找一份关于Python的工作，后来看到招聘网站寥寥无几的岗位开始投Java，最后去了运维，市场需求和自身能力的局限，没办法。</p>\n<p>在经历了一些事之后，逐渐改变了自己的一些想法。</p>\n<p><strong>人生，就是各种经历组成的。</strong>下定决心考虑转行，2019年底毅然辞职回老家，另谋出路。</p>\n<p>突遇疫情，2020年初滞留在家有点闲，开了一个算法新坑，算法一直以来都很头疼，如果这个计划半途而废也不奇怪，<strong>但我希望对于计算机、对于编程更多一点兴趣，而不是饭碗。</strong></p>\n<p>于是想着找一门新玩意，我的目光追寻到新时代特性的语言，Go或Rust。上个世纪的潮流没能赶上，这波不能掉队。至于为啥选择了Rust，一来是Go对标的的是Java，Rust用来代替C++，对现在我的而言，我早已不再讨厌Java，保留Java，Rust能作为C++很好的补充；二来是因为Mozilla情怀。即使Rust的学习曲线陡峭，我也希望在这里竖一块里程碑。哪怕我将要转行了，如果真是那样，那么Rust也算是一个很好的纪念。</p>\n<p>打算复习一些计算机的知识，最后再看一下<a href=\"https://kaisery.github.io/trpl-zh-cn/\">《Rust程序设计语言》</a>，我就不再展开了，太累了。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/book2.JPG!sy\" width=\"480\">\n\n<p>看完Rust官方文档后，深感精力不足、能力不够，我是真的学不动了，Rust<del>从入门到放弃</del>，到此为止吧。</p>\n<br>\n\n<hr>\n<br>\n\n<p>语言之争是激烈的，有时候比电影还精彩。还是那句话，<strong>每种流行的编程语言都有适合的场景以及它自己的生态</strong>，除了看一门语言本身的设计之外，必须要看到这们语言周围的生态，争论语言好坏的意义不大。</p>\n<p>很多时候我们可以说，语言只是表达工具，更重要的是深处的算法和设计模式等等；我们也可以说，不同的语言有不同的适用领域，用得好了，事半功倍。</p>\n<p>其实这两种看法并不是相反的，而是相辅相成的。比如说，C/C++更适合系统编程和硬件、有很高的运行效率，但是上手难度大，不易控制。Java虽然语法啰嗦，但正是这一套规范，适合大型项目的协作开发，再加上Java强大的生态，成为目前最流行的企业语言不足为奇，在Web、大数据方面无人能敌，还带一个Android。对于脚本语言PHP、Python都有使用场景，PHP和网页的契合度，以及Python的开发效率，都是非常棒的优点。对于前端，几乎就是JavaScript没得选。</p>\n<p>陷于语言之争只会让自己变得偏执，以及浪费时间。一门语言以及它周围的生态是不容易改变的，但是个人完全有一些小余地选择自己喜欢的。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/code.png!sy\"></p>\n<p>一名程序员必须学习3种以上的编程语言（HTML属于标记语言，SQL属于查询语言不在此列，另外Shell也不算在里面），其中一门编译型语言、一门脚本语言、一门工作吃饭/喜欢兴趣的语言。不同的语言可以学到不一样的思想，见识到不一样的世界。</p>\n<p>要我说需要学习和自己喜欢的编程语言选出5种，无论是缘分也好、选择也罢，结合已有的经历结果来看，按时间顺序那就是<code>C</code>、<code>Java</code>、<code>C++</code>、<code>Python</code>、<code>JavaScript</code>。</p>\n<ul>\n<li><p>C：入门的首选，打好基础。一开始就从脚本入手，容易走偏，由奢入俭难；（对于非程序员，还是非常推荐Python的）</p>\n</li>\n<li><p>Java：面向对象目前还是主流，可选C++或Java等等，我偏向Java，虽然啰嗦，但是工整、规范；</p>\n</li>\n<li><p>C++：无论喜不喜欢，它就在我的记忆中、经历里。买纸质书学习的语言不多，C++是一个，一字一句敲过字符的感觉永远不会忘记；</p>\n</li>\n<li><p>Python：脚本语言是程序员的必备工具，对我而言毫不犹豫选Python；（现在看来Ruby的哲学不是我喜欢的，过多的语法糖令人有些混乱，选择困难症，对于方法的调用不能适应）</p>\n</li>\n<li><p>JavaScript：跟C语言一样，几乎是程序员必备技能；（我不算了解）</p>\n</li>\n</ul>\n<p>虽然我把C和C++视为两种语言，但由于他们的渊源，很多人也将其看作整体C/C++，这样的话，5种语言还可以添加一门，那必然是Rust。按时间、喜好和缘分综合排序的话，最后就成了<code>Python</code>、<code>Java</code>、<code>C/C++</code>、<code>JavaScript</code>、<code>Rust</code>。</p>\n<p>以前我也在不断寻找一门契合自己的编程语言，最后发现每种都有这样那样的缺点，但是不能掩盖他们的光芒，有它们各自的应用场景，果然这个世界上只有两种语言，被人骂的和没人用的。深感我的编程之路会告一段落了，<strong>从C到Rust之旅，非常美好、感慨良多。</strong></p>\n<p>我想我过多的涉猎了不同的方向，却没有在一个方向上足够深入，实在可惜。总结一点经验就是，<strong>三分钟热度要不得，坚持难能可贵，深度比广度重要</strong>。</p>\n<p>不管怎么样，<strong>学无止境</strong>，无论是技术还是文史。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/xx.jpeg!sy\"></p>\n<p><br><br></p>\n<p><mark><em><strong>Update: 2021-04</strong></em></mark></p>\n<p>2020年底转行成功，正式告别计算机行业。</p>\n<p>陪伴了我5年多的第二代Anna，终于顶不住了。迫于贫穷，入了联想 小新 Pro14 2021，被视为第三代Anna。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/anna3.jpeg!sy\" width=\"480\">\n\n<p>很长时间没用Windows，回归之后有各种不适。系统环境变量混乱不堪，没有原生终端；反斜杠的路径也非常难受。许多功能强制依赖着一个个GUI的窗口（Windows之名名副其实，Window的复数），将细节过度藏匿于无形之中，拉开人机之间的距离，对于用户而言是简单而高效，对于开发商也是有大量需求的市场，对我而言则是始终有种隔阂，成功戒了我喜欢捣鼓电脑的兴趣，完全不想折腾。</p>\n<p>对于笔记本而言，以前我觉得仅仅是喜欢macOS，后来有了对比才发现Mac是软硬一体的精致、无与伦比的美妙。计算机对我而言，是一个完整的个人世界，各种软件精挑细选，海量的数据皆有所归，哪里存放些什么，一丝不苟，什么该与什么在一起，整整齐齐，犹如一座图书馆，是精巧的外在建筑美学，也有精神海洋的丰富内涵，完完美美；同时又像一个伙伴，陪伴着我、记录着经历，书写着这个世界的故事。光是目之所及，手之所触就心情愉悦不已。</p>\n<p>仔细想了想，用着难受还不如不用。虽然是最短暂的Anna3，也有了一定的感情，有一丝的不舍。正好给我爸使用，避免造成浪费，也减轻我的愧疚感。以后坚决不买Windows笔记本了，<strong>将Windows留给台式，把Linux留在服务器，还是MacBook更适合作为伙伴、形影不离。</strong></p>\n<br>\n\n<hr>\n<br>\n\n<p>2021年开启了新的生活，度过了一段没有电脑的时光，每天抱着iPhone刷，于3月份终于按捺不住，还是入了MacBook Pro (13-inch, M1, 2020)。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cs/anna4.jpeg!sy\"></p>\n<p>虽然我告别了程序员，但我不想告别编程；虽然我已经离开计算机行业，但我离不开计算机。不再是一个职业程序员，再没有对新技术的无尽焦虑，一路走来，折腾过C++、PostgreSQL，发现还是熟悉的Java、MySQL比较适合我，如无必要，勿增实体。我对于计算机的兴趣依然不减，反而由于不再焦虑，感觉更加轻松和愉快，不再有那么多必须的技术去学习，唯一能够保持与时俱进的，只要有Python就足够了，将更多的时间和精力向历史和动画倾斜，毕竟我个人的兴趣爱好就是<code>历史</code>、<code>计算机</code>和<code>动画</code>。</p>\n<p>这种状态真的舒服，macOS和Python常伴左右、在历史和动画的海洋里遨游，逛着B站、豆瓣标记书影音、偶尔看看GitHub和Twitter，时不时有Java、MySQL、Node.js等老朋友的身影，关注着Rust的发展，继续深耕Python，至于C/C++，可以“拿来主义”直接调用它们现有的成果，作为后盾提供坚实的保障。工作和生活中遇到的某些问题，打开精致的Sublime、用Python愉悦、高效、快速地解决，不去争论语言的长短，，<strong>以实用为主，享受生活即可。</strong></p>\n<p>本博客可能不再更新了，有缘人可以在 <a href=\"https://space.bilibili.com/7216933\">B站</a> 或者 <a href=\"https://douban.com/people/250982855\">豆瓣</a> 找到我。</p>\n<blockquote>\n<p>人生如梦，一尊还酹江月。</p>\n</blockquote>\n<p><br><br> </p>\n","categories":["文章"],"tags":["回忆","编程","计算机","TimeLine"]},{"title":"Windows List","url":"https://blog.ykqmain.com/windows/","content":"<p>精简的Windows办公、娱乐软件推荐列表。</p>\n<br>\n\n<ul>\n<li><p><strong>办公</strong></p>\n<ul>\n<li><a href=\"https://www.mozilla.org/en-US/firefox/all/#product-desktop-release\">Firefox</a></li>\n<li><a href=\"http://www.sublimetext.com/\">Sublime</a></li>\n<li><a href=\"https://www.wps.cn/\">WPS</a></li>\n<li><a href=\"https://im.qq.com/\">QQ</a></li>\n<li><a href=\"https://support.hp.com/cn-zh/drivers/printers\">HP LaserJet M1005驱动</a><br>&nbsp;</li>\n<li><a href=\"https://www.7-zip.org/\">7z</a></li>\n<li><a href=\"http://www.bandisoft.com/honeyview/\">Honeyview</a></li>\n<li><a href=\"https://www.videolan.org/\">VLC</a></li>\n<li><a href=\"https://obsproject.com/\">OBS</a></li>\n<li><a href=\"https://www.adobe.com/cn/products/photoshop.html\">Adobe Photoshop</a><br>&nbsp;</li>\n<li><a href=\"https://www.python.org/\">Python</a></li>\n<li><a href=\"https://nodejs.org/zh-cn/\">Node.js</a></li>\n<li><a href=\"https://www.oracle.com/java/technologies/downloads/\">JDK</a></li>\n<li><a href=\"https://dev.mysql.com/downloads/\">MySQL</a></li>\n<li><a href=\"https://git-scm.com/\">Git</a></li>\n<li><a href=\"https://github.com/microsoft/terminal\">Windows Terminal</a></li>\n<li><a href=\"https://visualstudio.microsoft.com/zh-hans/visual-cpp-build-tools/\">Microsoft C++ 生成工具</a><br>&nbsp;</li>\n<li><a href=\"https://www.huorong.cn/\">火绒</a></li>\n<li><a href=\"https://iknow.lenovo.com.cn/detail/dc_178562.html\">关闭Win10更新</a></li>\n</ul>\n</li>\n</ul>\n<br>\n\n<ul>\n<li><p><strong>娱乐</strong></p>\n<ul>\n<li><a href=\"https://y.qq.com/\">QQ音乐</a></li>\n<li><a href=\"https://v.qq.com/\">腾讯视频</a></li>\n<li><a href=\"https://www.youku.com/\">优酷</a></li>\n<li><a href=\"https://www.iqiyi.com/\">爱奇艺</a><br>&nbsp;</li>\n<li><a href=\"https://store.steampowered.com/\">Steam</a></li>\n<li><a href=\"https://cor-games.com/\">红色警戒3：日冕</a></li>\n</ul>\n</li>\n</ul>\n<p><br><br></p>\n","categories":["计算机"],"tags":["工具","Windows","SoftWare","办公","娱乐"]},{"title":"中国断代史系列","url":"https://blog.ykqmain.com/duandaishi/","content":"<p>还是感觉豆瓣评论数据不可靠，动不动就没了。所以豆瓣仅用来标记作品和寻找兴趣，评论或者笔记还是放在自己手里比较安心。</p>\n<p>下面是关于<a href=\"https://book.douban.com/series/2895\">中国断代史系列</a>的一些简单想法。</p>\n<br>\n\n<h4 id=\"《春秋史》-顾德融-朱顺龙，上海人民出版社\"><a href=\"#《春秋史》-顾德融-朱顺龙，上海人民出版社\" class=\"headerlink\" title=\"《春秋史》(顾德融/朱顺龙，上海人民出版社)\"></a><a href=\"https://book.douban.com/subject/30448888/\">《春秋史》</a>(顾德融/朱顺龙，上海人民出版社)</h4><p>网上对这部书有很多看法，我在没有对比的情况下，觉得此书令我受益匪浅，值得一看。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/duandaishi/cq.JPG\" width=\"480\">\n\n<p><br><br></p>\n<h4 id=\"《战国史》-杨宽，上海人民出版社\"><a href=\"#《战国史》-杨宽，上海人民出版社\" class=\"headerlink\" title=\"《战国史》(杨宽，上海人民出版社)\"></a><a href=\"https://book.douban.com/subject/30448904/\">《战国史》</a>(杨宽，上海人民出版社)</h4><p>网上对此书评价很好，确实是战国入门的好材料，但我却没有同系列《春秋史》看的酣畅淋漓。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/duandaishi/zg.JPG\" width=\"480\">\n\n<p><br><br></p>\n<h4 id=\"《秦汉史》-林剑鸣，上海人民出版社\"><a href=\"#《秦汉史》-林剑鸣，上海人民出版社\" class=\"headerlink\" title=\"《秦汉史》(林剑鸣，上海人民出版社)\"></a><a href=\"https://book.douban.com/subject/30426281/\">《秦汉史》</a>(林剑鸣，上海人民出版社)</h4><p>本来对“秦汉史”没有太大的兴趣，看了同系列的春秋和战国，觉得本系列是很好的断代史入门书籍，就又买了《秦汉史》和《宋史》填补两个窟窿。</p>\n<p>本书很多马列之言，这是时代的印记。最有价值的还是点出了王朝兴衰的本质，深得我心。即“无穷无尽的人与人斗争和资源兼并导致贫富差距极大化，矛盾冲突不可调和，农民起义能推倒，但内部不能团结被第三者窃取果实，屠龙少年变成恶龙，进入下一个循环。”</p>\n<p>还有“党锢之祸”的内容值得深思。再者了解一下东汉官制，对三国有些许帮助。</p>\n<p>本书的不足还在于文化史过少。至于时代局限性，也是没有办法苛责的了，毕竟我也有我所在的时代局限。</p>\n<center class=\"half\">\n    <img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/duandaishi/qh1.JPG\" width=\"360\"/><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/duandaishi/qh2.JPG\" width=\"360\"/>\n</center>\n\n<p><br><br></p>\n<h4 id=\"《魏晋南北朝史》-王仲荦，上海人民出版社\"><a href=\"#《魏晋南北朝史》-王仲荦，上海人民出版社\" class=\"headerlink\" title=\"《魏晋南北朝史》(王仲荦，上海人民出版社)\"></a><a href=\"https://book.douban.com/subject/35085843/\">《魏晋南北朝史》</a>(王仲荦，上海人民出版社)</h4><p>进入三国的世界，直到东晋，动辄十万，二十万「所过多屠戮」、「百姓大饥，竞相食。」史书的字里行间充满了血腥和残酷。 东晋的偏安和九品中正制，更让我深刻理解为什么说“郡县制”和“科举制”是封建社会的两大创举，也让我更加感受到了蜀汉的“汉贼不两立，王业不偏安”是多么的浪漫。在看重温三国之余，还能关注一些之前忽视的人物和事件，温故而知新，总会有新的东西。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/duandaishi/wj.JPG\" width=\"480\">\n\n<p><br><br></p>\n<h4 id=\"《隋唐五代史》-王仲荦，上海人民出版社\"><a href=\"#《隋唐五代史》-王仲荦，上海人民出版社\" class=\"headerlink\" title=\"《隋唐五代史》(王仲荦，上海人民出版社)\"></a><a href=\"https://book.douban.com/subject/26969624/\">《隋唐五代史》</a>(王仲荦，上海人民出版社)</h4><p>看了下藩镇和文化史，其他部分反倒没有印象了。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/duandaishi/st.JPG\" width=\"720\">\n\n<p><br><br></p>\n<h4 id=\"《宋史》-陈振，上海人民出版社\"><a href=\"#《宋史》-陈振，上海人民出版社\" class=\"headerlink\" title=\"《宋史》(陈振，上海人民出版社)\"></a><a href=\"https://book.douban.com/subject/26962119/\">《宋史》</a>(陈振，上海人民出版社)</h4><p>宋史入门，内容全面。</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/duandaishi/song.JPG\" width=\"480\">\n\n<p><br><br></p>\n","categories":["读书"],"tags":["历史","中国","断代史","春秋史","战国史","秦汉史","魏晋南北朝史","隋唐五代史","宋史"]},{"title":"学不可以已","url":"https://blog.ykqmain.com/xuexi/","content":"<p><strong>「君子博学而日参省乎己，则知明而行无过矣。」</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xuexi/0.JPG!sy\"></p>\n<p>无论是《左传·襄公十一年》：“居安思危，思则有备，有备无患。”还是《孟子·告子下》：“生于忧患，死于安乐。”无不在强调“危机意识”，而解决该问题的方案之一，则是九年义务教育一直所提倡的<strong>“终身学习”</strong>，这一论述古已有之，即《荀子·劝学》开篇第一句：“学不可以已”，遂以为题。</p>\n<p>学习的重要性是不言而喻的，然而《庄子·养生主》又说了：“吾生也有涯，而知也无涯。”庄子的意思不是「无知」，而是知识不能简单地说“越多越好”或“越少越好”，而是要区别清楚。顺道知识越多越好，悖道知识越少越好。所以，求知既是知识增加的过程，也是鉴别所得知识是否合道，并剔除悖道知识的过程。</p>\n<p>至于学什么？对于个人而言，<strong>一方面就是立足的「专攻」知识，另一方面则是“兴趣爱好”了。</strong>对我之前而言，有“理工通以自足，文史晓以怡情。”之论，站在这个时间节点来看，之后则可能会有方向的转变。然而兴趣爱好却不太会发生较大的转变，早在《人生如梦》一文中有所提及：</p>\n<blockquote>\n<p>毕竟要问我最感兴趣的方面，「中国古代史」是唯一的答案，没有之一。</p>\n</blockquote>\n<blockquote>\n<p>具体来说，就是从 <strong>西周到南宋</strong> (公元前1046～1279年) 的这一段时间，“兴趣之最”当属 <strong>春秋战国</strong> (前770年～前221年)、<strong>三国时期</strong> (广义的，184年～280年) 以及 <strong>唐宋</strong> (618年～907年)(960年～1279年)。</p>\n</blockquote>\n<blockquote>\n<p>…………</p>\n</blockquote>\n<blockquote>\n<p>总的来说，我喜欢的，<strong>是春秋战国的思想哲学，是唐宋的诗词歌赋。对于三国，情感是复杂、且随年龄变化的。</strong></p>\n</blockquote>\n<p>可见我的兴趣爱好是<strong>以「中国古代史」为核心，向「诸子百家」和「诗词歌赋」稍有发散的。</strong>我的另一大爱好则是「动画」，就不在此展开了。如此来看，我的知识是严重偏科的，好在高中是理科，以及大学的“计算机科学与技术”专业，能略微补足理工方面的些许欠缺。不仅仅能清楚的认识到在于文理的偏科，还在于中外的偏科，对于国外哲学、艺术、科技、经济、政治、法律等方方面面，则实实在在成为了我的知识盲区，既可惜、又无可奈何。</p>\n<p>我真的一无所知。<br><br></p>\n<hr>\n<br>\n\n<p>有这样一个既简单又复杂的问题，<strong>“你为什么喜欢历史？”</strong></p>\n<p>对于这个问题，我曾不止一次思考过，也许现在正是一个好的契机好好记录一番了。</p>\n<p>如果放在以前，我可能会毫不犹豫脱口而出、并且一言蔽之，<strong>“以史为鉴”</strong>。此言貌似极度精炼，一针见血颇有道理，并且古今中外皆有共识，<br>唐太宗有言：“以史为鉴，可知兴替。”<br>杜牧《阿房宫赋》：“后人哀之而不鉴之，亦使后人而复哀后人也。”<br>司马光《资治通鉴》之名取自：“鉴于往事，有资于治道。”<br>英国Francis Bacon也说过：“读史使人明智。”</p>\n<p>然而<strong>现实</strong>也许并没有那么简单直接明了。以史为鉴？吸取教训是不可能的，这辈子都不可能的，下辈子也不行。</p>\n<br>\n\n<p>宏观上来讲，《圣经》里面说：“已有之事，后必再有；已行之事，后必再行。日光之下，并无新事。”通俗来讲就是<strong>“太阳底下没有新鲜事”</strong>，除了科学发达了，技术改变了生活，本质却没有变。科技是表，人与人之间的关系才是里，何为本质？以我才疏学浅的见识妄自揣摩一番、随便看看就行，答曰私有制。</p>\n<p><strong>「天下熙熙，皆为利来；天下壤壤，皆为利往。」</strong>（【汉】司马迁《史记·货殖列传》）</p>\n<p>从来就没什么真相，你能看到的、大多数都是、他们想让你看到的，背后大多是利益的驱使罢了。</p>\n<p>“利益”并不是一个贬义词，它能促进社会的发展，也是唯物史观的有力支持。我们从小学开始，接受的正规历史教育都是<strong>唯物史观</strong>。但是令人尴尬的事实却是，没有多少人发自心底的理解并相信唯物史观，包括我。</p>\n<p>我们都在期望一位<strong>「英雄」</strong>，一位改变时代的英雄，一位“圣君”经天纬地、国泰民安，一位“清官”为民请命、镇守四方，一位“侠客”打抱不平、伸张正义，一位“天才”科技兴国，改变世界……</p>\n<p>可书本告诉我们，<strong>“经济基础决定上层建筑”</strong>，还告诉我们<strong>“唯物史观认为历史绝不是英雄人物创造的”</strong>，但是书本中并不会给出足够的解释和论证，使得“唯物史观”变成镜花水月。</p>\n<p>但是太史公告诉我们了，也就是历史课本、一直有意无意的回避两个字，<strong>「利益」</strong>。</p>\n<p>唯物史观最核心的内容只有两个字，那就是“利益”。抛开“利益”二字，几乎就无法理解唯物史观。但是“利益”这两个字，在我们的教育中、文化中，大多是一个邪恶的、至少是庸俗的字眼，大多时候讲的是天下为公，秉公无私奉献。所以我们的历史课本在分析历史时，有意无意就要绕过利益这两个字。这样一来，所谓的经济基础决定上层建筑，人民群众创造历史，就变成了空中阁楼。因为没有“利益”作为纽带，经济基础与上层建筑，人民群众与英雄之间，就丧失了真正的联系。实际上，哪个利益群体在现实博弈中占据了优势，代表他们利益的上层建筑就会占据统治地位。任何英雄人物，都是作为某个利益群体代言人存在的。</p>\n<p>只要私有制存在，就有人与人的斗争，就有资源的兼并，就有资本的积累，就有阶级的固化，就有贫与富的差距，欲望的不可控导致斗争和兼并无穷无尽从而巨大化差距，就会有矛盾的不可调和，直至再来一次。<strong>该犯的错误，还是会一次又一次地再犯，历史不过是一出又一出的轮回悲剧罢了。</strong>翻遍史书，「重蹈覆辙」这个词已经司空见惯了。秦、汉、唐、宋的循环，已经事实胜于雄辩、不言自明地证明了。</p>\n<p>就像公司存在就是以盈利为目的，有这个目的就决定了跟员工的矛盾是不可调和的，一切幻想都是那么不切实际。但我们并不能批判公司赚钱，就如同不能批判人活着要吃饭一样。如果公司在站着赚钱的同时，能够造福社会、改变世界，就像人在吃饱穿暖后为社会作出贡献就值得铭记一样。</p>\n<p>私有制是有弊端，但却不是错误的，而恰恰是符合当前生产力水平的，能够激发人们的创造和生产，促进社会进步。在这个过程，<strong>国家能发挥再分配的职能</strong>，因国而异，是一个问题；<strong>生产力水平极大进步，人们精神境界极大提高</strong>，则又是另一个问题，都不在我的认知水平之内了。作为一只无所作为的井底之蛙，我还是在此“妄议”一番，<em>政治做的就是分蛋糕，而科技才能把蛋糕做大，地球资源一定的情况下，资源采集效率和利用率是增产的关键。和平崛起的核心在于科技，无论生产力还是精神境界，落到基础上则是教育。</em> 还是那句话，「明知不可为而为之」讲的是做事不问可不可能，但问应不应该。多少伟大的理想，发展进步和追求美好一直在路上，永不停歇。</p>\n<p>（然而，在公元1700年，全球有将近7亿人。到了1800年，只增加到9.5亿人。但到了1900年，人口增长将近一倍达到16亿。而到了2000年，更是已经翻了两番，达到60亿。在2014年，已经达到足足70亿。了解历史的都知道，这期间人类爆发三次重大的科技革命。未来的事，则不是我这凡人说得清、道得明了。）</p>\n<br>\n\n<p>对个人来说，青史留名的他，或飞黄腾达，或失意没落，对他本人是几十年，对我而言，也许只有两三页纸、甚至寥寥数语，前一页很牛，后一页可能就没了。少数人尚且如此，大多数则犹如尘埃，<strong>“历史只告诉了我们极少数人在做些什么，而其他绝大多数人的生活就是不停地挑水耕田。”</strong>多少年后，当我沦为一个统计数字时，我的名字应该叫<strong>「七十亿分之一」</strong>，无功无名，随风而逝，那时候我能想到的应该会有这样一句话，<strong>「兴，百姓苦；亡，百姓苦。」</strong>（【元】张养浩 《山坡羊·潼关怀古》）</p>\n<p>“以史为鉴”的不可能，不是由你我他所能左右，而是一只强大无形的手推着向前，如同江水东流。</p>\n<p>人生如梦，没意思，真的没意思。</p>\n<p><strong>然而我还是会崇尚史册</strong>，本人天生内敛，不善言辞，借用《大明王朝1566》一段对话略表一二。</p>\n<p>🎬 《大明王朝1566》 video<br><video height=\"auto\" width=\"720\" controls=\"controls\" type=\"video/mp4\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xuexi/E46.mp4\"><br>    Your browser does not support the Video tag.<br></video></p>\n<p><strong>「在史册里，在人心里。」</strong></p>\n<br>\n\n<hr>\n<br>\n\n<p>在「无知」的焦虑下，在「求知」的道路上，有「乐知」足以。</p>\n<p>很多时候并不需要去思考有意义，或者没意义。非要说没意义，那整个人生确实没有意义；非要说有意义，那世界都是丰富多彩的。也不必从理性上来说“认识过去，能够把握当下，才能选择未来。”完全可以从感性角度来考虑，当我看历史时，我是「快乐」的，这就够了。</p>\n<p>收藏书籍是我的乐趣之一，最近断断续续买了好几波，现在算起来，竟达将近2000元，算是把自己想要的都集齐了，以下简单聊聊几本书。</p>\n<p>既然中国古代史是我的兴趣核心，就先从「史书」开始。</p>\n<p>中国古代史书第一，非<strong>《春秋左传》</strong>莫属。甚至史书的别称就有「春秋」，周代各国国史均名《春秋》，只是仅有鲁国《春秋》传世，其他已失传。且「春秋」不仅有史书之意，更是时间（知我罪我，其惟春秋）和文化（微言大义）的象征。而《左传》则是古籍“经传注疏”之“传”，若古籍无注，则极难传承和学习，《左传》之于《春秋》不仅在于“经而无传，使圣人闭门思之十年，不能知也。”还在于《左传》的叙事详备，是极其重要的史料。仅仅是《春秋经》，几乎无法看下去。现在的《春秋》几乎都是经传并刊，《春秋左氏传》、《春秋公羊传》、《春秋榖梁传》。另有《春秋邹氏传》和《春秋夹氏传》在汉朝已失传。</p>\n<p>从网上搜集资料信息，很幸运得知了杨伯峻先生的<strong>《春秋左传注》</strong>，正是这本书，让我意识到，一个有注的古籍，是多么重要。若是古籍无注、原汁原味，则无法入门、看个热闹；若是只看今人译文，则浮于表面、容易走偏。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xuexi/cqzzz.JPG!sy\"></p>\n<p>我在拿到这本书之后，便爱不释手，顶礼膜拜。《春秋史》评价其：“该书用力甚勤，多有创见，尤将考古资料和文献相结合作注，甚有价值。”</p>\n<p>古籍认准出版社能省不少时间，市面上也没有几家有能力对古籍做校对。<strong>中华书局</strong>，<strong>上海古籍出版社</strong>，<strong>岳麓书社</strong>三个是值得信赖的，中华书局就不多说了，古籍第一家；上海古籍出版社刚开始就是中华书局的上海分局；岳麓书社则是我初中历史书的出版社，所以印象深刻。古籍的版本也是需要斟酌的，不仅要有注，还得认出版社，对我而言再加一条，简体字。是的，横排竖排对我而言无所谓，但是繁体字实事求是的说，确实吃力，我没有必要为了形式而将就，但是之前的古籍权威版本大多是繁体竖排，好在近些年中华书局出了一套“中华国学文库”，将那些繁体竖排的善本重新排版为简体横排，对我而言，这是极大的方便，非常感激！</p>\n<p>对应我喜欢的时代，<strong>春秋战国、三国、唐宋</strong>。“二十四史”对我而言没有意义，这点是非常清楚的。一来是极其繁杂且昂贵，我也不是专业研究人员，《旧唐书》《新唐书》《宋史》就已经很庞大了，完全没有必要。二来后面官修史书对前朝贬低，对本朝多有讳饰，而且对于同朝权贵也不得不加以敷衍，为这些贵族的祖父编撰佳传，过多溢美之词。</p>\n<p>“前四史”相比起来则有意义的多，其中我对汉代不是特别有兴趣，加之“史记”的特殊性，所以《史记》《三国志》的突出就很明显了。加上中国历史上还有一本与《史记》相提并论的编年体通史——《资治通鉴》，记录从战国到五代的历史，正好包含了战国、三国、唐代。缺的春秋正好可以依赖《左传》，所以《资治通鉴》又可看作是《左传》的延续，只是他延的够长。以编年体为线索，理清事件的发展过程和逻辑，再用纪传体加以补充个人的生平，是比较完美的。</p>\n<p>就这样<strong>《左传》</strong>、<strong>《史记》</strong>、<strong>《三国志》</strong>、<strong>《资治通鉴》</strong>在不同的分类标准“编年体”、“纪传体”、“断代史”、“通史”四个方面，可以两两别类，不得不说是一种<strong>对称之美</strong>。即使仅这四部史书，估计能看一辈子了，也必须作为朋友，见字如面，陪伴一辈子。</p>\n<p>所以这四部史书就构成了<strong>“我的四史”</strong>，中华书局“中华国学文库”系列简体横排版《春秋左传注》（2册），《史记》（4册），《三国志》（2册），《资治通鉴》（12册），共计20册，将近1000元，物有所值。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xuexi/ss.JPG!sy\"></p>\n<p>也许还应该补充一篇《汉书·艺文志》，则是后话了。</p>\n<br>\n\n<p>“四史”告一段落，再谈谈「经典」。</p>\n<p>选书的原则就是兼顾“四书五经”和“十三经”两种说法，又增加「诸子百家」。</p>\n<p>上海古籍出版社的“国学典藏”丛书更偏向原计原味的古籍，对于查阅收藏是较好的，但对于深入学习可能还不够。“经传注疏”是学习古籍必需的，对于诗歌类古籍而言，只要注解足够优秀，现代译文也许是没必要的。</p>\n<p>「诗书易礼春秋」，</p>\n<p><strong>《诗经》</strong>版本为朱熹的《诗集传》，此版本近乎原汁原味，仅有《诗》原文，以及少量序和注，几乎只能作为查阅的工具书，这也正是我想要的用途。 然而想要深入学习，“经传注疏”是必要的，请寻他本。（比如程俊英和蒋见元的《诗经注析》）</p>\n<p><strong>《尚书》</strong>佶屈聱牙，相较于「风骚」相提，我更愿意「诗书」并论。我购此版本的意义在于研习《春秋左传注》以及“孔孟荀”学说之时，以备《诗》和《书》查阅之需。 至于《诗》《书》本身的学习，则不在于我的兴趣和能力之内了。</p>\n<p><strong>《周易》</strong>，到目前为止，我仍然认为《易》是一本占卜书，或许也是哲学书。才疏学浅不能懂，没有太大兴趣，仅作收藏。</p>\n<p>增加<strong>《山海经》</strong>，载有怪奇悠谬之说、荟萃珍奇博物的神话地理志，仅作查阅收藏之用。</p>\n<p>《春秋》被我分到四史，不在此赘述。</p>\n<br>\n\n<p>然后是「诸子百家」，其实也是“儒道法墨兵”五家而已。</p>\n<p>我本不会崇拜任何人，起码不会崇拜活着的人，毕竟人死了才能“盖棺定论”。人性复杂且多面，标签容易造成遮蔽或者偏见，就事论事才是最好的。非说要有，也还是能数出一些的，但很难说“最”。古往今来，孟子也许算一个。所以先买的《孟子》，因为切身感受到杨伯峻先生的治学厉害，毫不犹豫选择了其<strong>《孟子译注》</strong>。</p>\n<p>孔孟并论，其实在很长一段时间，我都是更倾向孟子，现在看来，对孔子的偏见和误解太久了，「人不知而不愠」，一言难尽。最早从《春秋左传注》了解到杨伯峻先生，很快便收藏了一本《孟子译注》，再到这本<strong>《论语译注》</strong>似乎只是时间问题了。</p>\n<p>“礼”又分为“三礼”，我的感觉就是枯燥无味且难懂，原本不愿意买。王文锦的<strong>《大学中庸译注》</strong>和上面的《论语译注》《孟子译注》是一套书，所以我买了，为了凑一套。现在看来，这本书包含了《礼记》的十四篇文章，有“大学中庸”，还有“礼运”篇，仅对我而言，此书可以替代“三礼”的位置，完美满足我的强迫症。</p>\n<p><strong>《荀子》</strong>、<strong>《老子》</strong>、<strong>《庄子》</strong>、<strong>《韩非子》</strong>、<strong>《墨子》</strong>、<strong>《孙子》</strong>则是买的“上古”版本，也是有凑一套的因素。其中不乏优秀的注本，比如《孙子》的十一家注版本。相较于《孙子兵法》，去掉“兵法”直称《孙子》也是完全配得上「子」这一专有名称和荣誉的，或许这不仅仅是一部兵书。</p>\n<p>「儒道」是我较为熟悉的，先秦儒家，孔孟之余，不该遗忘荀子；也看得出来我对「孙子」的偏爱；至于生疏一些的诸子「法墨」留待日后慢慢了解。我相信有精华，也有糟粕，每个人都有时代的局限性，伟大如亚里士多德也不能摆脱奴隶制的时代局限，作为一个现代人，对某一种思想文化<strong>“取其精华，去其糟粕”</strong>应该是最基本的思考辨别能力。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xuexi/13.JPG!sy\"></p>\n<p>以上书籍按我的喜好和一定的规律排序，即《诗经》《尚书》《周易》《山海经》《大学中庸译注》《论语译注》《孟子译注》《荀子》《老子》《庄子》《韩非子》《墨子》《孙子》，取个名字叫做<strong>“我的十三经”</strong>。其中除《大学中庸译注》《论语译注》《孟子译注》三本为中华书局，其余都是上海古籍出版社。</p>\n<br>\n\n<p>说完了“经史子”，是时候说说“集”了。</p>\n<p>第一本非<strong>《楚辞》</strong>莫属，也许仅仅是因为缘分，没有其他理由。毕竟我的网名、昵称在高中时期便取自《楚辞·九歌·湘夫人》，「袅袅兮秋风，洞庭波兮木叶下。」</p>\n<p>第二本是高中就已经购买的岳麓书社<strong>《古文观止》</strong>，一篇篇经典从古至今，引起了无数人的共鸣，陪伴他们消极失意，也陪他们潇洒旷达。可以读一辈子的书。</p>\n<p>第三本是<strong>《李清照集笺注》</strong>，「争渡，争渡，惊起一滩鸥鹭。」小学第一次学到《如梦令》，还以为李清照是男的，毕竟郭茂倩这类名字也是男名，且小学李白杜甫等古诗词作者皆是男人，无有例外。直到初中才知道李清照是女的，反差之余的惊讶，我心目中的“古今第一才女”至今未变。这也是我购买的唯一一本繁体竖排的书，尝尝鲜。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xuexi/rml.JPG!sy\"></p>\n<p>我把这类也取了个名字叫<strong>“诗文观止”</strong>，来自《古文观止》的名字来源，出自《左传》：“观止矣！若有他乐，吾不敢请已。”</p>\n<br>\n\n<p>至此，以「中国古代史」为核心，向「诸子百家」和「诗词歌赋」稍有发散的。都有了对应的分类——“我的四史”、“我的十三经”、“诗文观止”，前两者已被数字限制固定，但也没必要再增加；后者则还会逐渐扩充，毕竟<strong>贾谊，陶渊明，王勃，王维孟浩然，李白杜甫，韩愈柳宗元，刘禹锡白居易，李商隐杜牧，欧阳修王安石，苏轼辛弃疾等</strong>众多文人都是我所喜欢的，无法短期获得和学习。算上前文提到的《楚辞》之于<strong>屈原</strong>，《史记》之于<strong>司马迁</strong>，以及<strong>李清照</strong>，正好二十人，这些人的著作加起来可想而知，毫无疑问得慢慢来，来日方长。</p>\n<p>但还没完，对于历史的学习，不仅仅落在古籍上，这“四史”虽然庞大且权威，但仍不全面且难以入门。这只是主干，仍有细枝末节的补充需要。所以又购买了上海人民出版社<a href=\"https://blog.ykqmain.com/duandaishi/\">“中国断代史系列”</a>，这是今人的研究成果，更易于了解历史。对应我喜欢的三个时期、四部书：《春秋史》《战国史》《魏晋南北朝史》《隋唐五代史》。</p>\n<p>后来感觉本系列的书是非常好的断代史入门书，为使其连续，补齐中间的窟窿，满足强迫症，又买了《秦汉史》和《宋史》。</p>\n<p><br><br></p>\n<p>最最后，买了一本心想很久的《简明中国历史地图集》，之所以没有选择全套8本的地图集，唯有“囊中羞涩”这一理由了。地图也许是历史最需的工具了。<strong>左图右史，沉浸其中，再回首、恍如隔世，并乐在其中。</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xuexi/lsdt.JPG!sy\"></p>\n<p>至此真的可以暂告一段落了，该有的书都有了。借用《劝学》的一句作为新的启程，<strong>「故不登高山，不知天之高也；不临深溪，不知地之厚也。」</strong></p>\n<p><strong>“以史为鉴”</strong>可能不行，但<strong>“顺势而为”</strong>，也许能够有些作用。</p>\n<p>学无止境，，，</p>\n<br>\n\n<p>（其实我对地理也很有兴趣的。）</p>\n<p><br><br></p>\n","categories":["读书"],"tags":["历史","学习","诸子百家","文学"]},{"title":"四大名著","url":"https://blog.ykqmain.com/mingzhu/","content":"<p>说实话，四大名著对我而言，只有三本书：《三国演义》、《水浒传》、《西游记》。</p>\n<br>\n\n<h4 id=\"《三国演义》-明-罗贯中，人民文学出版社-《三国演义》-明-罗贯中著-清-毛宗岗等批，三秦出版社\"><a href=\"#《三国演义》-明-罗贯中，人民文学出版社-《三国演义》-明-罗贯中著-清-毛宗岗等批，三秦出版社\" class=\"headerlink\" title=\"《三国演义》([明]罗贯中，人民文学出版社) 《三国演义》([明]罗贯中著/[清]毛宗岗等批，三秦出版社)\"></a><a href=\"https://book.douban.com/subject/1891015/\">《三国演义》</a>([明]罗贯中，人民文学出版社) <a href=\"https://book.douban.com/subject/1881676/\">《三国演义》</a>([明]罗贯中著/[清]毛宗岗等批，三秦出版社)</h4><p>我看过多种版本、多种载体、多种形式的<a href=\"https://movie.douban.com/subject/1830528/\">《三国演义》</a>，对我影响最深的还是央视动画版<a href=\"https://movie.douban.com/subject/3783963/\">《三国演义》</a>，关于三国有太多太多的想法，详见<a href=\"https://blog.ykqmain.com/sanguo/\">人生如梦</a>。</p>\n<br>\n\n<h4 id=\"《水浒传》-明-施耐庵，北京出版社\"><a href=\"#《水浒传》-明-施耐庵，北京出版社\" class=\"headerlink\" title=\"《水浒传》([明]施耐庵，北京出版社)\"></a><a href=\"https://book.douban.com/subject/1881676/\">《水浒传》</a>([明]施耐庵，北京出版社)</h4><p>《水浒传》，初中看的为数不多的小说中，最津津有味的一部。当时看了一半，直到梁山聚义，后面的不忍再看。</p>\n<p>这本书让当时的我明白了主角并不一定就是正义的，梁山的某些行径其实非常龌龊，所谓的梁山“好汉”屈指可数。</p>\n<p>回想起来，一度沉迷于江湖义气，然而水浒给我的感触最大的不是江湖义气，也不是农民起义，而是水浒的世界真的太过黑暗，黑社会横行，草菅人命，官府腐败，民不聊生。</p>\n<p>名著之所以能称为名著，果然是有它的道理的。</p>\n<br>\n\n<h4 id=\"《西游记》-明-吴承恩，人民文学出版社\"><a href=\"#《西游记》-明-吴承恩，人民文学出版社\" class=\"headerlink\" title=\"《西游记》([明]吴承恩，人民文学出版社)\"></a><a href=\"https://book.douban.com/subject/30137808/\">《西游记》</a>([明]吴承恩，人民文学出版社)</h4><blockquote>\n<p>如来：“我观四大部洲，众生善恶，各方不一……我西牛贺洲者，不贪不杀，养气潜灵，虽无上真，人人固寿；但那南赡部洲者，贪淫乐祸，多杀多争，正所谓口舌凶场，是非恶海。我今有三藏真经，可以劝人为善。”</p>\n</blockquote>\n<blockquote>\n<p>菩萨：“你这小乘教法，度不得亡者超升，只可浑俗和光而已。我有大乘佛法三藏，能超亡者升天，能度难人脱苦，能修无量寿身，能作无来无去。”</p>\n</blockquote>\n<blockquote>\n<p>伯钦的父亲之灵：“我在阴司里苦难难脱，日久不得超生。今幸得圣僧，念了经卷，消了我的罪业，阎王差人送我上中华富地长者人家托生去了。”</p>\n</blockquote>\n<p>看到这里我就困惑了，果然西游记的解读繁杂深奥，以我目前阅历，才疏学浅，实在难以“理解”， 暂且搁置。</p>\n<p><br><br></p>\n","categories":["读书"],"tags":["名著","三国演义","水浒传","西游记"]},{"title":"openpyxl实践","url":"https://blog.ykqmain.com/openpyxl/","content":"<p><strong>占坑，待补充……</strong></p>\n<br>\n\n<p>代码如下，进行了多次修改完善：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">环境需求：</span></span><br><span class=\"line\"><span class=\"string\">Python 3.6+</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">安装依赖：</span></span><br><span class=\"line\"><span class=\"string\">pip3 install openpyxl</span></span><br><span class=\"line\"><span class=\"string\">pip3 install pandas</span></span><br><span class=\"line\"><span class=\"string\">pip3 install xlutils</span></span><br><span class=\"line\"><span class=\"string\">如有网络问题先设置镜像，</span></span><br><span class=\"line\"><span class=\"string\">pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">使用方法：</span></span><br><span class=\"line\"><span class=\"string\">打开终端，输入&quot;python FileName.py&quot;回车</span></span><br><span class=\"line\"><span class=\"string\">可选参数，[班级:str, 时长:int 是否标记:y]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">命名习惯：</span></span><br><span class=\"line\"><span class=\"string\">变量：下划线</span></span><br><span class=\"line\"><span class=\"string\">常量：全大写</span></span><br><span class=\"line\"><span class=\"string\">函数、方法：小驼峰</span></span><br><span class=\"line\"><span class=\"string\">类名：大驼峰</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Creation Date: 2020-04-24</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> openpyxl <span class=\"keyword\">import</span> Workbook, load_workbook</span><br><span class=\"line\"><span class=\"keyword\">from</span> openpyxl.styles <span class=\"keyword\">import</span> Font, NamedStyle</span><br><span class=\"line\"><span class=\"comment\"># from openpyxl.styles import colors, Alignment</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initData</span>():</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;进行第一次处理，将大表简化成小表。&quot;&quot;&quot;</span></span><br><span class=\"line\">    wb1 = load_workbook(<span class=\"string\">&#x27;1.xlsx&#x27;</span>)  <span class=\"comment\"># 打开文件1.xlsx</span></span><br><span class=\"line\">    data_sheet = wb1[wb1.sheetnames[<span class=\"number\">0</span>]]  <span class=\"comment\"># 打开第1位置的表格，即导出的数据Sheet</span></span><br><span class=\"line\">    new_wb = Workbook()  <span class=\"comment\"># 新建Excel文件</span></span><br><span class=\"line\">    new_sheet = new_wb.active  <span class=\"comment\"># 获取默认表</span></span><br><span class=\"line\"></span><br><span class=\"line\">    temp_dict = <span class=\"built_in\">dict</span>(<span class=\"built_in\">zip</span>(<span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">6</span>), (<span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>)))</span><br><span class=\"line\">    <span class=\"comment\"># print(temp_dict)</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\">        copyColumn(new_sheet, x, data_sheet, temp_dict[x])</span><br><span class=\"line\"></span><br><span class=\"line\">    new_wb.save(NEWFILE)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 利用pandas进行排序</span></span><br><span class=\"line\">    df = pd.read_excel(NEWFILE)</span><br><span class=\"line\">    df.sort_values(by=<span class=\"string\">&#x27;学生姓名&#x27;</span>, inplace=<span class=\"literal\">True</span>, ascending=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"comment\"># inplace默认为False，如果该值为True，那么就会在当前的dataframe上操作。</span></span><br><span class=\"line\">    <span class=\"comment\"># ascending参数True为升序，False为降序。</span></span><br><span class=\"line\">    <span class=\"comment\"># print(df)</span></span><br><span class=\"line\">    df.to_excel(NEWFILE)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># pandas会对Excel添加一个索引列，由于pandas强大，暂时就不折腾，利用openpyxl去掉这一列</span></span><br><span class=\"line\">    wb_sorted = load_workbook(NEWFILE)</span><br><span class=\"line\">    sheet_sorted = wb_sorted[wb_sorted.sheetnames[<span class=\"number\">0</span>]]  <span class=\"comment\"># 打开第1位置的表格，即排序后的Sheet</span></span><br><span class=\"line\">    sheet_sorted.title = <span class=\"string\">&#x27;原始数据&#x27;</span></span><br><span class=\"line\">    sheet_sorted.delete_cols(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    C = [<span class=\"built_in\">chr</span>(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">65</span>, <span class=\"number\">65</span> + <span class=\"number\">5</span>)]  <span class=\"comment\"># 字母列表 A-E，对应Excle的1～5列</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> C:</span><br><span class=\"line\">        sheet_sorted.column_dimensions[x].width = <span class=\"number\">15</span>  <span class=\"comment\"># 设置列宽</span></span><br><span class=\"line\"></span><br><span class=\"line\">    sheet_sorted.column_dimensions[<span class=\"string\">&#x27;B&#x27;</span>].width = <span class=\"number\">25</span>  <span class=\"comment\"># 设置列宽</span></span><br><span class=\"line\">    sheet_sorted.column_dimensions[<span class=\"string\">&#x27;D&#x27;</span>].width = <span class=\"number\">25</span>  <span class=\"comment\"># 设置列宽</span></span><br><span class=\"line\"></span><br><span class=\"line\">    wb_sorted.save(NEWFILE)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">copyColumn</span>(<span class=\"params\">sheetA, intX, sheetB, intY</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;将B表的第Y列复制到A表的第X列。&quot;&quot;&quot;</span></span><br><span class=\"line\">    r = <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> sheetB.iter_rows(min_row=<span class=\"number\">5</span>,</span><br><span class=\"line\">                                max_row=sheetB.max_row,</span><br><span class=\"line\">                                min_col=intY,</span><br><span class=\"line\">                                max_col=intY):</span><br><span class=\"line\">        <span class=\"comment\"># min_row=5 视情况而定</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> cell <span class=\"keyword\">in</span> row:</span><br><span class=\"line\">            <span class=\"comment\"># print(cell.value, r)</span></span><br><span class=\"line\">            sheetA.cell(r, intX, cell.value)</span><br><span class=\"line\">            r += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reTime</span>(<span class=\"params\">time: <span class=\"built_in\">str</span></span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;Excel的E列为观看时长，正则匹配字符串中的数字，返回的是一个列表。&quot;&quot;&quot;</span></span><br><span class=\"line\">    res: <span class=\"built_in\">list</span> = re.findall(<span class=\"string\">r&quot;\\d+\\.?\\d*&quot;</span>, <span class=\"built_in\">str</span>(time))</span><br><span class=\"line\">    <span class=\"comment\"># 判断列表是否为空</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> res:</span><br><span class=\"line\">        timeLong = res[<span class=\"number\">0</span>]  <span class=\"comment\"># 取列表的字符串，str -&gt; int</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        timeLong = <span class=\"number\">0</span>  <span class=\"comment\"># 应对“观看不足一分钟”这种情况</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">int</span>(timeLong)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">dataFilter</span>(<span class=\"params\">sheet, classNum: <span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">list</span>:</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;从精简的小表提取相应数据分班级，然后过滤出中文姓名，返回一个列表。&quot;&quot;&quot;</span></span><br><span class=\"line\">    new_work = load_workbook(NEWFILE)  <span class=\"comment\"># 打开Excle</span></span><br><span class=\"line\">    new_sheet = new_work.create_sheet(CLASSNAME + <span class=\"built_in\">str</span>(classNum),</span><br><span class=\"line\">                                      classNum - <span class=\"number\">1</span>)  <span class=\"comment\"># 新建一个班级Sheet</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;-&#x27;</span> * <span class=\"number\">20</span> + <span class=\"string\">&#x27;\\n开始处理&#x27;</span>)</span><br><span class=\"line\">    <span class=\"comment\"># 复制第1行表头，和5列有用信息</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> init_column <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\">        new_sheet.cell(<span class=\"number\">1</span>, init_column,</span><br><span class=\"line\">                       sheet.cell(<span class=\"number\">1</span>, init_column).value).style = sty_black</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 设置列宽，代码重复，考虑优化</span></span><br><span class=\"line\">    C = [<span class=\"built_in\">chr</span>(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">65</span>, <span class=\"number\">65</span> + <span class=\"number\">5</span>)]  <span class=\"comment\"># 字母列表 A-E，对应Excle的1～5列</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> C:</span><br><span class=\"line\">        new_sheet.column_dimensions[x].width = <span class=\"number\">15</span>  <span class=\"comment\"># 设置列宽</span></span><br><span class=\"line\"></span><br><span class=\"line\">    new_sheet.column_dimensions[<span class=\"string\">&#x27;B&#x27;</span>].width = <span class=\"number\">25</span>  <span class=\"comment\"># 设置列宽</span></span><br><span class=\"line\">    new_sheet.column_dimensions[<span class=\"string\">&#x27;D&#x27;</span>].width = <span class=\"number\">25</span>  <span class=\"comment\"># 设置列宽</span></span><br><span class=\"line\"></span><br><span class=\"line\">    name_filter = []</span><br><span class=\"line\">    a = <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># print(&#x27;行数&#x27;, sheet.max_row)</span></span><br><span class=\"line\">    <span class=\"comment\"># 开始筛选复制有用信息</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, sheet.max_row + <span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">str</span>(sheet[<span class=\"string\">&quot;C&quot;</span> + <span class=\"built_in\">str</span>(x)].value).startswith(</span><br><span class=\"line\">                CLASSNAME + <span class=\"built_in\">str</span>(classNum)):  <span class=\"comment\"># 复制以classNum开头的行</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> column <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\">                timeLong = reTime(sheet[<span class=\"string\">&quot;E&quot;</span> + <span class=\"built_in\">str</span>(x)].value)  <span class=\"comment\"># 正则匹配字符串中的数字的函数</span></span><br><span class=\"line\">                <span class=\"comment\"># print(&#x27;时长：&#x27;, timeLong)</span></span><br><span class=\"line\">                <span class=\"comment\"># 观看少于 TIMELONG 分钟则标红</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> <span class=\"built_in\">int</span>(timeLong) &gt;= TIMELONG:</span><br><span class=\"line\">                    new_sheet.cell(a + <span class=\"number\">1</span>, column,</span><br><span class=\"line\">                                   sheet.cell(x,</span><br><span class=\"line\">                                              column).value).style = sty_black</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    new_sheet.cell(a + <span class=\"number\">1</span>, column,</span><br><span class=\"line\">                                   sheet.cell(x, column).value).style = sty_red</span><br><span class=\"line\">                <span class=\"comment\"># 其中的&#x27;0-行, 0-列&#x27;指定表中的单元，&#x27;value&#x27;是向该单元写入的内容</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 正则匹配中文姓名</span></span><br><span class=\"line\">            res = re.findall(<span class=\"string\">&#x27;[\\u4e00-\\u9fa5]+&#x27;</span>, sheet[<span class=\"string\">&quot;C&quot;</span> + <span class=\"built_in\">str</span>(x)].value)</span><br><span class=\"line\">            name_filter.extend(res)  <span class=\"comment\"># 筛选出中文姓名，返回一个list</span></span><br><span class=\"line\">            a += <span class=\"number\">1</span>  <span class=\"comment\"># 以classNum开头的行的计数器</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># listIndex(name_filter)</span></span><br><span class=\"line\">    <span class=\"comment\"># 处理掉线重连后重复的情况</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">duplicates</span>(<span class=\"params\">aList, item</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> [i <span class=\"keyword\">for</span> i, x <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(aList) <span class=\"keyword\">if</span> x == item]</span><br><span class=\"line\"></span><br><span class=\"line\">    re_dict = <span class=\"built_in\">dict</span>((x, duplicates(name_filter, x)) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">set</span>(name_filter)</span><br><span class=\"line\">                   <span class=\"keyword\">if</span> name_filter.count(x) &gt; <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"comment\"># 寻找列表中重复项目，并返回索引，存储到一个字典</span></span><br><span class=\"line\">    <span class=\"comment\"># print(re_dict, len(re_dict))</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(re_dict):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> key <span class=\"keyword\">in</span> <span class=\"built_in\">sorted</span>(re_dict):</span><br><span class=\"line\">            time_sum = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"built_in\">print</span>(key, <span class=\"string\">&#x27;掉线重连过。&#x27;</span>)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(re_dict[key])  <span class=\"comment\"># 字典的值是一个列表，存储列表重复项目的索引位置</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> re_dict[key]:</span><br><span class=\"line\">                name = new_sheet.cell(x + <span class=\"number\">2</span>, <span class=\"number\">3</span>).value  <span class=\"comment\"># 列表中的索引+2对应Excle中的行</span></span><br><span class=\"line\">                time = new_sheet.cell(x + <span class=\"number\">2</span>, <span class=\"number\">5</span>).value</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(name, time)</span><br><span class=\"line\">                time_sum += reTime(time)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;总时长，&#x27;</span>, time_sum, <span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> time_sum &gt;= TIMELONG:  <span class=\"comment\"># 如果总时长超过TIMELONG</span></span><br><span class=\"line\">                <span class=\"comment\"># print(&#x27;索引为：&#x27;, re_dict[key])</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> re_dict[key]:  <span class=\"comment\"># 则把所有的符合的行标记为一个颜色</span></span><br><span class=\"line\">                    <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\">                        new_sheet.cell(i + <span class=\"number\">2</span>, c).style = sty_flag</span><br><span class=\"line\"></span><br><span class=\"line\">    new_work.save(NEWFILE)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name_filter</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">studentFilter</span>(<span class=\"params\">sheet, classNum: <span class=\"built_in\">int</span></span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;从学生名单Excle提取中文姓名，返回一个列表。&quot;&quot;&quot;</span></span><br><span class=\"line\">    student_filter = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, sheet.max_row + <span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 已修改学生名单&quot;800.xlsx&quot;，只存在中文姓名，所以不需要正则筛选。但是以防万一，保证正确。</span></span><br><span class=\"line\">        res = re.findall(<span class=\"string\">&#x27;[\\u4e00-\\u9fa5]+&#x27;</span>,</span><br><span class=\"line\">                         <span class=\"built_in\">str</span>(sheet.cell(x, classNum).value))</span><br><span class=\"line\">        student_filter.extend(res)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> student_filter</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">absentStudent</span>(<span class=\"params\">classNum: <span class=\"built_in\">int</span></span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;筛出缺勤学生。&quot;&quot;&quot;</span></span><br><span class=\"line\">    wb1 = load_workbook(NEWFILE)  <span class=\"comment\"># 打开Excle</span></span><br><span class=\"line\">    data_sheet = wb1[<span class=\"string\">&#x27;原始数据&#x27;</span>]  <span class=\"comment\"># 打开经过initData()精简后的Sheet</span></span><br><span class=\"line\">    wb80 = load_workbook(CLASSNAME + <span class=\"string\">&#x27;.xlsx&#x27;</span>)  <span class=\"comment\"># 打开学生名单Excle</span></span><br><span class=\"line\">    student_sheet = wb80[<span class=\"string\">&#x27;Sheet1&#x27;</span>]  <span class=\"comment\"># 打开Sheet</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 追加缺勤名单到表尾部，返回缺勤名单列表</span></span><br><span class=\"line\">    name_filter: <span class=\"built_in\">list</span> = dataFilter(data_sheet, classNum)  <span class=\"comment\"># 过滤后的原始数据Excle姓名列表</span></span><br><span class=\"line\">    student_filter: <span class=\"built_in\">list</span> = studentFilter(student_sheet,</span><br><span class=\"line\">                                         classNum)  <span class=\"comment\"># 过滤后的学生Excle姓名列表</span></span><br><span class=\"line\"></span><br><span class=\"line\">    a = [x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> name_filter <span class=\"keyword\">if</span> x <span class=\"keyword\">in</span> student_filter]</span><br><span class=\"line\">    <span class=\"comment\"># 两个列表中都存在，交集</span></span><br><span class=\"line\">    absent_list = [y <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> (name_filter + student_filter) <span class=\"keyword\">if</span> y <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> a]</span><br><span class=\"line\">    <span class=\"comment\"># 两个列表中的不同元素，缺勤</span></span><br><span class=\"line\"></span><br><span class=\"line\">    add_absent_wb = load_workbook(NEWFILE)  <span class=\"comment\"># 打开Excle</span></span><br><span class=\"line\">    add_absent_sheet = add_absent_wb[CLASSNAME + <span class=\"built_in\">str</span>(classNum)]  <span class=\"comment\"># 打开相应的班级Sheet</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 利用学生名单Excel，获取某列的元组，然后获取行数，取非空项目数，作为学生人数</span></span><br><span class=\"line\">    alphabet_dict = <span class=\"built_in\">dict</span>(<span class=\"built_in\">zip</span>(<span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">9</span>), [<span class=\"built_in\">chr</span>(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">65</span>, <span class=\"number\">65</span> + <span class=\"number\">8</span>)]))</span><br><span class=\"line\">    <span class=\"comment\"># &#123;1: &#x27;A&#x27;, 2: &#x27;B&#x27;, 3: &#x27;C&#x27;, 4: &#x27;D&#x27;, 5: &#x27;E&#x27;, 6: &#x27;F&#x27;, 7: &#x27;G&#x27;, 8: &#x27;H&#x27;&#125;</span></span><br><span class=\"line\">    column_tpl: <span class=\"built_in\">tuple</span> = student_sheet[alphabet_dict[classNum]]  <span class=\"comment\"># 配合字典，获取某列的元组</span></span><br><span class=\"line\">    <span class=\"comment\"># print(column_tpl)</span></span><br><span class=\"line\">    n = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(column_tpl)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> column_tpl[x].value:  <span class=\"comment\"># 非空，则计数器+1</span></span><br><span class=\"line\">            n += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(classNum, <span class=\"string\">&#x27;班人数：&#x27;</span>, n)</span><br><span class=\"line\">    full = n</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 追加的统计信息</span></span><br><span class=\"line\">    str1 = <span class=\"string\">&#x27;备注：红色为观看总时长少于 &#x27;</span> + <span class=\"built_in\">str</span>(TIMELONG) + <span class=\"string\">&#x27; 分钟的人&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> STRFLAG</span><br><span class=\"line\">    note = str1 + STRFLAG</span><br><span class=\"line\">    add_absent_sheet.cell(add_absent_sheet.max_row + <span class=\"number\">2</span>, <span class=\"number\">1</span>,</span><br><span class=\"line\">                          note).style = sty_red</span><br><span class=\"line\"></span><br><span class=\"line\">    remarks = CLASSNAME + <span class=\"built_in\">str</span>(classNum) + <span class=\"string\">&#x27;应到 &#x27;</span> + <span class=\"built_in\">str</span>(full) + <span class=\"string\">&#x27; 人，实到 &#x27;</span> + <span class=\"built_in\">str</span>(</span><br><span class=\"line\">        full - <span class=\"built_in\">len</span>(absent_list)) + <span class=\"string\">&#x27; 人。&#x27;</span></span><br><span class=\"line\">    add_absent_sheet.cell(add_absent_sheet.max_row + <span class=\"number\">1</span>, <span class=\"number\">1</span>,</span><br><span class=\"line\">                          remarks).style = sty_red</span><br><span class=\"line\"></span><br><span class=\"line\">    absentStr = <span class=\"string\">&#x27;缺勤 &#x27;</span> + <span class=\"built_in\">str</span>(<span class=\"built_in\">len</span>(absent_list)) + <span class=\"string\">&#x27; 人：&#x27;</span> + <span class=\"string\">&#x27;, &#x27;</span>.join(absent_list)</span><br><span class=\"line\">    add_absent_sheet.cell(add_absent_sheet.max_row + <span class=\"number\">1</span>, <span class=\"number\">1</span>,</span><br><span class=\"line\">                          absentStr).style = sty_red</span><br><span class=\"line\"></span><br><span class=\"line\">    add_absent_wb.save(NEWFILE)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;已生成的表格&#x27;</span>, <span class=\"string\">&#x27;, &#x27;</span>.join(add_absent_wb.sheetnames))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> absent_list</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(</span><br><span class=\"line\">        <span class=\"string\">&#x27;注意事项：\\n腾讯课堂导出的Excle需要重命名为\\&quot;1.xlsx\\&quot;，\\n需要常备一份学生名单的Excle命名为\\&quot;80.xlsx\\&quot;，\\n注意班级人数是否正确。\\n&#x27;</span></span><br><span class=\"line\">    )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 格式化成时间格式，作为文件名</span></span><br><span class=\"line\">    time_stamp = time.strftime(<span class=\"string\">&quot;%m-%d&quot;</span>, time.localtime())</span><br><span class=\"line\">    NEWFILE = <span class=\"built_in\">str</span>(time_stamp) + <span class=\"string\">&#x27;.xlsx&#x27;</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;将在当前文件夹生成新文件：&#x27;</span> + NEWFILE)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 默认黑色字体，红色字体，蓝色字体，对齐方式</span></span><br><span class=\"line\">    font_black = Font(name=<span class=\"string\">u&#x27;宋体&#x27;</span>, size=<span class=\"number\">14</span>, color=<span class=\"string\">&#x27;#000000&#x27;</span>)</span><br><span class=\"line\">    font_red = Font(name=<span class=\"string\">u&#x27;宋体&#x27;</span>, size=<span class=\"number\">14</span>, color=<span class=\"string\">&#x27;#FF0000&#x27;</span>)</span><br><span class=\"line\">    font_blue = Font(name=<span class=\"string\">u&#x27;宋体&#x27;</span>, size=<span class=\"number\">14</span>, color=<span class=\"string\">&#x27;#0000FF&#x27;</span>)</span><br><span class=\"line\">    <span class=\"comment\"># alignment = Alignment(horizontal=&#x27;center&#x27;, vertical=&#x27;center&#x27;)</span></span><br><span class=\"line\">    sty_black = NamedStyle(name=<span class=\"string\">&#x27;sty_black&#x27;</span>, font=font_black)</span><br><span class=\"line\">    sty_red = NamedStyle(name=<span class=\"string\">&#x27;sty_red&#x27;</span>, font=font_red)</span><br><span class=\"line\">    sty_blue = NamedStyle(name=<span class=\"string\">&#x27;sty_blue&#x27;</span>, font=font_blue)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 接受命令行参数</span></span><br><span class=\"line\">    <span class=\"comment\"># print(sys.argv)</span></span><br><span class=\"line\">    <span class=\"comment\"># 默认值</span></span><br><span class=\"line\">    CLASSNAME = <span class=\"string\">&#x27;80&#x27;</span>  <span class=\"comment\"># 班级学生名单Excel文件名</span></span><br><span class=\"line\">    TIMELONG = <span class=\"number\">40</span>  <span class=\"comment\"># 默认听课时长</span></span><br><span class=\"line\">    STRFLAG = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    sty_flag = NamedStyle(name=<span class=\"string\">&#x27;sty_flag&#x27;</span>, font=font_black)  <span class=\"comment\"># 不标记蓝色</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(sys.argv) == <span class=\"number\">4</span>:  <span class=\"comment\"># 3个参数</span></span><br><span class=\"line\">        <span class=\"comment\"># sys.argv[0] 表示脚本名</span></span><br><span class=\"line\">        CLASSNAME = <span class=\"built_in\">str</span>(sys.argv[<span class=\"number\">1</span>])  <span class=\"comment\"># 第1个参数设置班级</span></span><br><span class=\"line\">        TIMELONG = <span class=\"built_in\">int</span>(sys.argv[<span class=\"number\">2</span>])  <span class=\"comment\"># 第2个参数设置时长</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">str</span>(sys.argv[<span class=\"number\">3</span>]) == <span class=\"string\">&#x27;y&#x27;</span>:  <span class=\"comment\"># 第3个参数为&#x27;y&#x27;则标记为蓝色</span></span><br><span class=\"line\">            STRFLAG = <span class=\"string\">&#x27;，蓝色为断线后重连的人&#x27;</span></span><br><span class=\"line\">            sty_flag = NamedStyle(name=<span class=\"string\">&#x27;sty_flag&#x27;</span>, font=font_blue)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;本次处理的是 &#x27;</span> + CLASSNAME[<span class=\"number\">0</span>] + <span class=\"string\">&#x27; 年级，&#x27;</span> + <span class=\"string\">&#x27;将把观看时长低于&#x27;</span>, TIMELONG,</span><br><span class=\"line\">          <span class=\"string\">&#x27;分钟的人标为红色&#x27;</span> + STRFLAG + <span class=\"string\">&#x27;。\\n&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    initData()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">7</span>):  <span class=\"comment\"># 从1班到6班，索引从1开始</span></span><br><span class=\"line\">        absentStudent(x)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># input(&#x27;程序运行完成！按 回车键 退出-&gt;&#x27;)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>从输入到输出一步都不用点，就得到自己想要的表格，这就是我想要的效果。</p>\n<blockquote>\n<p>哪里不会，import哪里。</p>\n</blockquote>\n<p><br><br></p>\n","categories":["编程"],"tags":["Python","Excel","openpyxl","pandas"]},{"title":"《星游记》——弱者也可以幸福的时代","url":"https://blog.ykqmain.com/rainbow-sea/","content":"<p>很久没有聊动画了，但动画仍然是我生活的一部分。</p>\n<p>最近《星游记之风暴法米拉2》网络电影上映，借此小热度重温了《星游记》第一季。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/1.png\"></p>\n<p>🎵 再飞行 - 逃跑计划<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/zai-fei-xing.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>这是一部2011年的作品，时至今日回过头再去重温，真是感慨良多。</p>\n<p>其实星游记第一季的故事还算简单，篇幅不长，但非常精彩，我把它分为三部分。</p>\n<br>\n\n\n<h4 id=\"第一部分，我可以概括为认识咕咚和冲出地球。\"><a href=\"#第一部分，我可以概括为认识咕咚和冲出地球。\" class=\"headerlink\" title=\"第一部分，我可以概括为认识咕咚和冲出地球。\"></a>第一部分，我可以概括为认识咕咚和冲出地球。</h4><p>在地球上的少年，准备利用「风筝」，飞向天空。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/2.png\"></p>\n<p>这个少年叫做「麦当」。</p>\n<p>误打误撞，引出第二个主角，「咕咚 萌西」。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/3.png\"></p>\n<p>在第一部分，简单的展示了那个世界的设定，麦当的身世、地球的现状、银河眼、以及神秘人。</p>\n<p>接下来讲了第一个故事，关于哈雷和哈马，以及麦当的父亲，麦林。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/4.png\"></p>\n<p>经典台词：<strong>「不可能这三个字，你说得太多了。」</strong></p>\n<p>在包子妹和熊猫阿姨的帮助下，咕咚的<del>国王号</del>彩虹号冲出地球。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/5.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/6.png\"></p>\n<p>在前往月球的过程中，讲了第二个故事，关于咕咚的身世，补充了「彩虹石」的设定。</p>\n<p>在与嫦娥战斗后，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/7.png\"></p>\n<p>前往火星联盟航线，补充了虫洞和航线的设定。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/8.png\"></p>\n<p>我划分的第一部分到这里结束。</p>\n<br>\n\n\n<h4 id=\"第二部分，讲的是与笛亚相识，以及打败克拉。\"><a href=\"#第二部分，讲的是与笛亚相识，以及打败克拉。\" class=\"headerlink\" title=\"第二部分，讲的是与笛亚相识，以及打败克拉。\"></a>第二部分，讲的是与笛亚相识，以及打败克拉。</h4><p>到达火星后，引出神秘女子和黄金魔方。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/9.png\"></p>\n<p>后来得知，她叫「笛亚」。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/10.png\"></p>\n<p>打败卡利亚后，遭遇克拉，银河眼的第一个「经理人」。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/11.png\"></p>\n<p>笛亚被克拉带走后，麦当被马戏团所救，讲述了一部分笛亚的身世。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/12.png\"></p>\n<p>去天王星营救笛亚的过程中，又讲述了一部分笛亚的身世。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/13.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/14.png\"></p>\n<p>经典台词：<strong>「你们想要的自由，根本就不是属于弱者的词啊。」</strong></p>\n<p>整部作品中，打败克拉是第一个高潮，头皮发麻，非常燃，算是那个年代的一个惊喜。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/15.png\"></p>\n<p>这部分补充了星际联盟、星学会以及银河眼的设定。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/16.png\"></p>\n<p>经典台词：<strong>「有绝望的地方，就会有希望产生，对吧？」</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/17.png\"></p>\n<p>离开天王星，得知乌拉拉就是天王星，魔鬼脚印的坐标入口在水星。但是需要去火星寻找熟练的驾驶员。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/18.png\"></p>\n<p>与笛亚的认识是一个长久的过程，贯穿整个第二部分。</p>\n<p>至此，主角一家三口整整齐齐聚在一起，第二部分到此为止。</p>\n<br>\n\n\n<h4 id=\"第三部分，可以说是米龙传说。\"><a href=\"#第三部分，可以说是米龙传说。\" class=\"headerlink\" title=\"第三部分，可以说是米龙传说。\"></a>第三部分，可以说是米龙传说。</h4><p>在经历飞船燃料不足的小插曲后，到达火星，天王星的闪亮令主角前进的步伐困难重重。</p>\n<p>罗罗乌人和米龙(二代)登场。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/19.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/20.png\"></p>\n<p>在战斗中，穿插了本剧我最爱的一个故事，「下跪的米龙」。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/21.png\"></p>\n<p>经典台词：<strong>「在我背后，微笑着活下去吧。」</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/22.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/23.png\"></p>\n<p>为了妹妹而编造的谎言，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/24.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/25.png\"></p>\n<p>经典台词：<strong>「活下去吧，一直活到弱者也可以幸福的时代。」</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/26.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/27.png\"></p>\n<p>传承，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/28.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/29.png\"></p>\n<p>救出米龙后，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/30.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/31.png\"></p>\n<p>第一季以「蔓影术」结束。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/32.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/33.png\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/34.png\"></p>\n<p>《星游记》刚刚起航，便“戛然而止”。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/35.png\"></p>\n<br>\n\n\n<p>🎵 Next World - 牛奶咖啡<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/next-world.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>这部动画是2011年的，当时我看的津津有味，直到现在我还是非常喜欢这部作品。</p>\n<p>《星游记之风暴法米拉》出现后，让我明白「一个人」真的可以影响一部作品的灵魂，比如刘北。</p>\n<p>《星游记》版权被卖之后，两部电影有很多跟第一季相违背的世界设定、精神以及人物性格。</p>\n<p>第一部电影除了笛亚变漂亮了，基本没有看点。</p>\n<p>第二部电影比第一部强很多，但在必须延续第一部的框架下，还是有很多不尽人意的地方。风暴法米拉2完全可以叫极光传，原本被笛亚空间能力完克的鲁格，为了前后呼应，强行给极光送人头。极光父子情套路满满，但并不反感。笛亚基本全程酱油，麦当也性格崩坏，至于咕咚，我完全没有印象他干了啥。米龙的出场令人惊喜，但很突兀，毕竟响彻宇宙的米龙就在隔壁，竟然在场的人不知道。估计“大咖”请不起算是友情出场吧。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/41.png\"></p>\n<p>电影版两篇看完，少了当初的味道，但只要《星游记》继续出，我就会继续支持。即使这是不对的，明知道我感动的是第一季那份精神，希望那个弱者也可以幸福生活的时代出现，而不是一个“空壳”IP。</p>\n<p>但我还是不希望还出现“那样的事”。同在2011年的另外两部国产作品，在今天看来也令人惋惜不已，一个叫《超兽武装》，另一个叫《魁拔》。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/42.png\"></p>\n<br>\n\n<p><strong>拉过勾的事，就要做到。</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/36.png\"></p>\n<br>\n\n\n<p><strong>Update：</strong></p>\n<p>每次看完一部动画，总会有一种悲伤，听着他的主题曲写这篇文章，无论歌曲有多么热血，却还是「兴尽悲来」。</p>\n<p>《星游记》第一季已成绝唱，诚然他是遗憾的，令人惋惜，这是一种「不完美」。</p>\n<p>我现在就想专门记录一下这个「不完美」。</p>\n<p>以前我总是追求完美，就连自我介绍也免不了「崇尚完美，向往自由。」</p>\n<p>总觉得系统不够干净整洁，重装了无数次系统，这个过程，除了满足一下那个强迫症的心，剩下的只是浪费了大把的时间。每次装完都懊悔不已逝去的时间，却还是不自觉地重复。</p>\n<p>还有Mac的cmd键，坏了几年，以及今天的iPhone屏又摔碎了。</p>\n<p>不知道有没有人像我一样，不幸福、没有安全感。生活的种种不完美，令人难受、焦虑，精神不振。这令我想到初中的一篇文章，《落难的王子》(周国平)，有时候某些课文的印象之深，连自己都不敢相信。</p>\n<p>课文里面说，「先生，请别说这话。凡是人间的灾难，无论落到谁头上，谁都得受着，而且都受得了——只要他不死。至于死，那更是一件容易的事了。」</p>\n<p>我一直赞同这句话，直至我走出校门。</p>\n<p>才寥寥数年，社会的种种烦心事却经历得不少。随着年龄的增长和经历的事情越多，克拉的那句台词其实很触动我，<strong>“自由，从来就不是属于弱者的词。”</strong></p>\n<p>我的观点变得不一样了，「普通人只能自求多福不要让事落到自己头上，一旦遇到了，没有人会伸张正义，也没有人帮的了，只有绝望。」至于死，确实很容易。</p>\n<p>如此看来，「有绝望的地方，就会有希望产生，对吧？」更像是一句鸡汤，就像我之前写到的，</p>\n<blockquote>\n<p>而我等小人物却为衣食住行奔波一生，渺小且孤独的存在着，淹没在历史的长河中。也许唯一能做的只是在失落之时、仰望星空之余，还可以感叹一句，「天高地迥，觉宇宙之无穷；兴尽悲来，识盈虚之有数。」</p>\n</blockquote>\n<p>星空的魅力是无限的，没有自由，我也可以向往「星空」。没有飞船，我也可以借助「风筝」高高地飞起来。其实年龄越大，对自由已经没有那份狂热，毕竟有时候，<strong>自由即是混乱</strong>，需要付出相应的「代价」。</p>\n<p>我不知道“人人自危”是否过于夸张，我只知道没有自由已成事实，就像我不能在此“秉笔直书”一样，毕竟“网络不是法外之地”。</p>\n<p>没有人知道意外和明天哪个先来，自由对于我有多么触动，那么那个<strong>「弱者也可以幸福的时代」</strong>就有多么直击心灵、头皮发麻。</p>\n<p>没人知道魔鬼脚印背后是什么，也没人确定「彩虹海」的存在。就像哥伦布环球航行之前，没有人相信地球是圆的。</p>\n<blockquote>\n<p>传说彩虹海在全宇宙最大的黑洞后面，那里黄金在河里流淌，宝石遍地，空中铺满巨大的彩虹，可以实现人们的任何愿望。</p>\n</blockquote>\n<p>《星游记》已成绝唱，彩虹海遥不可及，就像「完美」一样，永远不可能到达。</p>\n<p>人生总得像接受平凡一样，接受不完美。</p>\n<p>也许那个彩虹海真的只是一个谎言、虚无缥缈，但是陪在身边的伙伴，触手可及，却是真情实意，</p>\n<p>果然，伙伴是这个世界上最值得珍惜的，真羡慕啊。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/43.png\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/44.png\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/45.png\"></p>\n<p>「未完待续」就是希望，<strong>「相信奇迹的人，本身和奇迹一样了不起。」</strong> 有生之年，等你。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/xing/46.png\"></p>\n<p><br><br></p>\n","categories":["动画"],"tags":["动画","伙伴","回忆","少年","热血","冒险"]},{"title":"春分随笔","url":"https://blog.ykqmain.com/chunfen/","content":"<p>2020年3月20日，<strong>春分</strong>。太阳直射赤道，白天和黑夜一样长，昼夜平分。</p>\n<p>为什么二十四节气，我对春分有些偏爱，有种说不出的感觉，貌似这是一个有着特殊意义的日子。</p>\n<p>我一般把春分当作<strong>春天的到来</strong>，有桃花盛开，有梨花的映衬，有微风，还有一个梦。</p>\n<p>即使这个梦已经可以确切的说是一个遗憾了。</p>\n<p>桃文，<strong>九周年</strong>。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/main/tw.jpg\"></p>\n<br>\n\n\n<p>借此篇博客，聊聊近况，记记流水账，扯到哪算哪。</p>\n<p>🎵 Refrain - Anan Ryoko<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/main/refrain.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>在2020年初疫情的影响下，而不能出门。此事将载入史册，也许会影响某些人的一生，包括我。难说这是一种什么样的影响，只有时间能给出答案。</p>\n<p>春风拂面，确实是舒服而惬意的。</p>\n<br>\n\n<p>回想春节，无非是沉浸于吃鸡和王者。</p>\n<p>期间重温了《中华文明读本》这本书，摸到书的那一刻不禁想到，曾经爱书如命的感觉。</p>\n<br>\n\n<p>2月初，又重温了韦诺之战，沉迷其中不能自拔。</p>\n<p>最后一关的狮鹫大法，强行通关。</p>\n<br>\n\n<p>就这样到2月中旬。</p>\n<p>期间看了一本《显微镜下的大明》，这本书也是我最近强力推荐的一本书，非常值得一看。</p>\n<br>\n\n<p>然后又回到了吃鸡和王者，感觉韦诺之战就像梦一样的插曲。</p>\n<p>吃鸡有固定的车队小伙伴，还算颇有乐趣。</p>\n<br>\n\n<p>3月以来，开始学习。</p>\n<p>穿插着沉迷奥特曼不能自拔，</p>\n<p>补了很多奥特曼剧场版，</p>\n<p>想到小时候我是“泰罗”奥特曼，回忆满满，虽然我也不知道为啥我是。</p>\n<p>很庆幸重新认识了“佐菲”🤭，无敌的“佐菲”😆。</p>\n<p>我的奥特曼到此为止了。</p>\n<br>\n\n<p>时至今日，我重装了无数次系统，包括macOS和iOS，期间荒废了好多时间，无聊和强迫症驱使我无数次的重复，实在懊悔。</p>\n<br>\n\n<p>就业，民生什么的，不是个人能决定的，不去想就好了。</p>\n<p>只要有微风就很爽，</p>\n<p>像小时候，那么简单的快乐。</p>\n<br>\n\n<p>也许人真的有命，</p>\n<p>还不如看星星。</p>\n<p><br><br></p>\n","categories":["生活"],"tags":["动画","记录","学习","生活"]},{"title":"蓦然回首——我已经不“萌”了","url":"https://blog.ykqmain.com/moe/","content":"<p>闲来无聊，整理博客。漫不经心地翻阅博客友链，了解一下我网上屈指可数的朋友们近况如何。</p>\n<p>说起来，我的友链并不多，因为本人天生内敛、不善言辞，大多数都是在自己的一亩三分地中自言自语，在博客里长篇大论、放飞自我，其他的地方则谨言慎行、看看不说话。</p>\n<p>虽然友链很少，但<strong>友链的友链</strong>则体现了互联网的精妙绝伦，相互交织的链接网，让我在其中遨游了好半天，见识到了一个个素不相识陌生人的生活，形形色色。其中印象最深的就是，</p>\n<p>他们真的挺<strong>“萌”</strong>的。</p>\n<br>\n\n<p>说起“萌”，这是一个来自日本ACG文化的词语，中文词汇“可爱”与之有相似的情感，但又不等同。好在大多数人能够<strong>意会</strong>这个词表达的含义，更重要的是，我自以为<strong>我曾经真的很萌</strong>，以及那个为我带来“萌”的少女——面码。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/moe/1.jpg\"></p>\n<p>高考失利，刚上大学的时候，一个人来去于三点一线，上课、图书馆、寝室、树下躺。沉浸在自己的世界里，身边全是“面码”，社交头像、电脑手机壁纸、铃声、鼠标垫、定制的手机壳、定制的U盘、杯子等等周边（手办我是碰不起的），当时的我认为面码是世界上最“萌”的女孩，没有之一（现在也是）。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/moe/2.jpg\"></p>\n<p>当然，我无意争辩“萌”之最。只因为对面码的喜爱，<strong>废寝忘食</strong>一个周末，搜集素材、从零开始学习Premiere，制作了一个AMV，上传到B站。这一系列动作一气呵成，心情激动、成就感满满，也充满了幸福。至今回想起来，那个周末感觉也就一瞬间，这股劲头貌似总共也没出现过几次。</p>\n<p>其实《未闻花名》太有名，讲的故事很多人都很熟悉，以至于有成千上万个“哈姆雷特”。</p>\n<p>对我而言，初看的那个夏天，在BGM的烘托下泪流满面，羡慕他们的世界、怀念自己的小伙伴，因面码的生死离别而<strong>致郁</strong>不能自拔。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/moe/3.jpg\"></p>\n<p>这份悲伤连带着高考的冲击，伴随了我小半个大学时期。一方面确实心痛难受，另一方面以“萌”的心态面对新生活。</p>\n<p>我是怎样一个心态呢？难以言表，大概是一种<strong>既消极又乐观</strong>的心态，除了语言文字和<strong>表情包</strong>的加持，概括起来可以说是遇事不决，<strong>“先卖个萌，再装个逼，能不搞坚决不搞，不得不搞则一切从简。”</strong></p>\n<p>世界很糟，可是我萌。</p>\n<p>大学生活就是这样过了很久，沉默寡言、与世无争。平时白天有事上课，没事图书馆折腾电脑，晚上寝室打游戏，操场跑步；周末看番，有太阳就树下躺，望望天、听听歌，发一下呆，非常惬意。</p>\n<br>\n\n<p>直到遇到了，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/moe/10.jpg\"></p>\n<br>\n\n<p>🎵 オレンジ - 7!!<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/main/orange.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>如果说《未闻花名》是“烈酒”，那么《四月是你的谎言》就是“慢性毒药”，作用时间长而慢，不致命，但致郁。</p>\n<p>可以说它同时带来了悲伤和美好，以至于关上了我心中的那扇日本动画大门，逐渐脱宅。</p>\n<p>那之后，基本不看“番”了，可能是过于悲伤，也可能是我老了，仅会偶尔会把童年的几部神作翻出来回味。</p>\n<p>可以说宫园薰不仅为我的大学动画生涯划上了圆满的句号，正如《网球王子》是我少年的开端一般，可以预见到的是，《四月是你的谎言》必然是我人生的一个节点，极具纪念意义。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/moe/music.png\"></p>\n<p>而《未闻花名》，则是其中的桥梁。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/moe/4.jpg\"></p>\n<br>\n\n<p>今天的友链见识了别人，回过头来审视自己，</p>\n<p>「成长」这个话题总会时不时在眼旁晃，时至今日，我仍然不能去定性。</p>\n<p>也许成长是明白了承担责任，<br>也许成长是活成了你曾经不喜欢的人，<br>也许成长是会花越来越多的时间陪伴和关心家人，<br>也许成长是越活越怂、没有了初生牛犊之气，<br>也许成长是认识到挣钱不易、生活艰辛，<br>也许成长是看懂平凡，接受平庸，</p>\n<p>然而可以确定的是，成长不是突然的变化。</p>\n<br>\n\n<p>时光飞逝，蓦然回首，</p>\n<p><strong>我已经不萌了</strong>。</p>\n<p>这时候，我才明白，什么叫做「不想长大」。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/moe/5.jpg\"></p>\n<p>写完这篇博客，我清理了一波失效的友链，<strong>One’s World, Think Aloud.</strong></p>\n<p><br><br></p>\n","categories":["文章"],"tags":["成长","博客","未闻花名","四月是你的谎言"]},{"title":"《自私的基因》","url":"https://blog.ykqmain.com/the-extended-selfish-gene/","content":"<h4 id=\"《自私的基因》-英-Richard-Dawkins，中信出版集团\"><a href=\"#《自私的基因》-英-Richard-Dawkins，中信出版集团\" class=\"headerlink\" title=\"《自私的基因》([英]Richard Dawkins，中信出版集团)\"></a><a href=\"https://book.douban.com/subject/30290031/\">《自私的基因》</a>([英]Richard Dawkins，中信出版集团)</h4><p>翻译的书总给人一种“啰嗦”的感觉，本书也未能幸免，但确实是值得一看，特别是第12章的精彩，好人有好报。</p>\n<blockquote>\n<p>比起傻瓜（那些无私奉献却遭遇剥削的个体）和骗子（那些互相无情剥削而共同毁灭的个体），斤斤计较者在种群中占优势，因为它们可以将更多基因传递给后代。</p>\n<p>…………</p>\n<p>一个关于共享、互助、合作的故事。它们昭示这一个善良的思想：即使我们都由自私的基因掌舵，好人终有好报。</p>\n</blockquote>\n<p>至于什么是好人，本书也给出了答案，也是我从本书受益的一点，善良、宽容、不嫉妒，以及<strong>「以直报怨」</strong>。</p>\n<p>“以牙还牙，以眼还眼”也成为博弈论的一种策略，这种策略简单且能非常有效，被认为是解决囚徒困境的最佳策略。</p>\n<p><br><br></p>\n","categories":["读书"],"tags":["生命","基因","社会"]},{"title":"Debian","url":"https://blog.ykqmain.com/debian/","content":"<p>大一的时候折腾过Windows和Ubuntu桌面版双系统，后来换了Mac，接触的Linux服务器一直是CentOS，所以这次趁阿里云优惠尝试一下<a href=\"https://www.debian.org/\">Debian</a>练练手，记录折腾过程。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">本机：</span><br><span class=\"line\">macOS 10.14.4</span><br><span class=\"line\">终端.app</span><br><span class=\"line\">Cyberduck</span><br><span class=\"line\"></span><br><span class=\"line\">Windows 10</span><br><span class=\"line\">Xshell</span><br><span class=\"line\">Xftp</span><br><span class=\"line\"></span><br><span class=\"line\">服务器：</span><br><span class=\"line\">Debian 9.8 x64</span><br></pre></td></tr></table></figure>\n\n<br>\n\n\n<h2 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h2><p><code>ssh user@IP -p port</code></p>\n<br>\n\n\n<h2 id=\"版本和名字\"><a href=\"#版本和名字\" class=\"headerlink\" title=\"版本和名字\"></a>版本和名字</h2><ol>\n<li><p>查看Linux内核版本</p>\n<ul>\n<li><code>cat /proc/version</code><ul>\n<li><code>Linux version 4.9.0-9-amd64 (debian-kernel@lists.debian.org) (gcc version 6.3.0 20170516 (Debian 6.3.0-18+deb9u1) ) #1 SMP Debian 4.9.168-1 (2019-04-12)</code></li>\n</ul>\n</li>\n<li><code>uname -a</code><ul>\n<li><code>Linux Anna2 4.9.0-9-amd64 #1 SMP Debian 4.9.168-1 (2019-04-12) x86_64 GNU/Linux</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>查看Linux系统版本</p>\n<ul>\n<li><code>lsb_release -a</code>  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">No LSB modules are available.</span><br><span class=\"line\">Distributor ID: Debian</span><br><span class=\"line\">Description:    Debian GNU/Linux 9.8 (stretch)</span><br><span class=\"line\">Release:    9.8</span><br><span class=\"line\">Codename:   stretch</span><br></pre></td></tr></table></figure></li>\n<li><code>cat /etc/issue</code></li>\n<li><code>cat /etc/redhat-release</code> (红帽系，RHEL、CentOS)</li>\n</ul>\n</li>\n<li><p>修改机器名</p>\n<ul>\n<li><p>查看</p>\n<ul>\n<li><code>hostnamectl</code></li>\n</ul>\n</li>\n<li><p>修改</p>\n<ul>\n<li><code>hostnamectl set-hostname Anna2</code></li>\n<li><code>vim /etc/hostname</code></li>\n<li><code>vim /etc/hosts</code></li>\n</ul>\n</li>\n<li><p>重启</p>\n<ul>\n<li><code>reboot</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n\n\n<h2 id=\"ssh免密登录\"><a href=\"#ssh免密登录\" class=\"headerlink\" title=\"ssh免密登录\"></a>ssh免密登录</h2><ol>\n<li><p>apt包管理 (.DEB)</p>\n<ul>\n<li>macOS有<code>brew</code>, CentOS有<code>yum</code>, Debian/Ubuntu有<code>apt-get</code></li>\n<li>一般来说，也许Red Hat系和Debian系的差别，也就是<code>yum</code>和<code>apt-get</code>的差别了。😅</li>\n<li>apt-get, apt, aptitude三者有区别，但是大体来说差别不大。我倾向于用<code>apt</code>，因为它输入最方便。</li>\n<li>常用命令：<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt search  搜索包</span><br><span class=\"line\">apt show  显示包的信息</span><br><span class=\"line\">apt install  安装</span><br><span class=\"line\">apt remove  移除</span><br><span class=\"line\">apt purge  移除软件和配置文件</span><br><span class=\"line\">apt update  更新源</span><br><span class=\"line\">apt upgrade  升级所有可升级的软件包</span><br><span class=\"line\">apt list  列出包含条件的包（已安装，可升级等）</span><br><span class=\"line\">apt autoremove  自动删除不需要的包</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>准备工作</p>\n<ul>\n<li>更新源，<code>apt update</code></li>\n<li>升级软件，<code>apt upgrade</code></li>\n<li>安装build工具，<code>apt install build-essential</code> (CentOS有<code>yum groupinstall &quot;Development Tools&quot;</code>)</li>\n</ul>\n</li>\n<li><p>ssh</p>\n<ol>\n<li><p>生成<code>ssh keys</code>，参考<a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/\">Generating a new SSH key</a> 或者 <a href=\"http://git-scm.com/book/zh/v2/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E7%94%9F%E6%88%90-SSH-%E5%85%AC%E9%92%A5\">Git-生成-SSH-公钥</a></p>\n</li>\n<li><p>上传公钥<code>id_rsa.pub</code>到服务器的<code>~/.ssh</code>目录</p>\n</li>\n<li><p>写入<code>authorized_keys</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br><span class=\"line\">chmod 700 ~/.ssh</span><br><span class=\"line\">chmod 644 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure></li>\n<li><p>修改ssh配置文件</p>\n<ul>\n<li><code>vim /etc/ssh/sshd_config</code></li>\n</ul>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">port    # 修改为任意，我设置为1024。</span><br><span class=\"line\">PermitRootLogin yes    # 开发机器，用root方便。配置其他管理员用户，权限命令需要sudo或者su切换用户。</span><br><span class=\"line\">PubkeyAuthentication yes</span><br><span class=\"line\">AuthorizedKeysFile  .ssh/authorized_keys .ssh/authorized_keys2</span><br><span class=\"line\">PasswordAuthentication no    # 禁止密码登陆</span><br></pre></td></tr></table></figure></li>\n<li><p>重启sshd服务，<code>systemctl restart sshd.service</code></p>\n</li>\n<li><p>阿里云有个坑，它自带一个<code>安全组规则</code>，ssh更改端口之后，必须在那里也开启<code>相应的入方向tcp端口</code>，我开启了用于ssh的1024端口，顺便配置了用于http的1126端口（因为A解析不备案也无法访问，所以就用<code>IP:port</code>直接访问了。）</p>\n</li>\n<li><p>重启机器后再测试能不能免密登录，<code>reboot</code></p>\n</li>\n</ol>\n</li>\n</ol>\n<br>\n\n\n<h2 id=\"配置终端\"><a href=\"#配置终端\" class=\"headerlink\" title=\"配置终端\"></a>配置终端</h2><p>ssh上去就是终端，整天跟它打交道，必须要趁手，</p>\n<ol>\n<li><p>安装几个工具</p>\n<ul>\n<li><p><code>apt install XXX</code></p>\n<ul>\n<li><code>p7zip</code></li>\n<li><code>git</code></li>\n<li><code>tree</code></li>\n<li><code>dos2unix</code></li>\n<li><code>pip3</code>, Debian9自带Python3.5，但是没有pip3，使用<code>apt install python3-pip</code>安装。</li>\n</ul>\n</li>\n<li><p>pip3</p>\n<ul>\n<li>Requests<br></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<ol start=\"2\">\n<li><p>安装oh-my-zsh (可选的，服务器很卡，bash也能用)</p>\n<ol>\n<li><p>安装zsh，<code>apt install zsh</code></p>\n</li>\n<li><p>安装oh-my-zsh，<code>sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</code></p>\n</li>\n<li><p>配置<code>.zshrc</code>，我把本地的配置文件传上去，稍作修改。</p>\n</li>\n<li><p>因为这是配置好了的文件，要先把主题和插件准备好了之后再source。</p>\n<ul>\n<li><p>自定义preference主题，将本地的<code>preference.zsh-theme</code>上传到<code>~/.oh-my-zsh/custom/themes</code>，稍作修改。</p>\n<figure class=\"highlight zsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Copied and modified from the oh-my-zsh theme from clean</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$UID</span> -eq 0 ]; <span class=\"keyword\">then</span> NCOLOR=<span class=\"string\">&quot;red&quot;</span>; <span class=\"keyword\">else</span> NCOLOR=<span class=\"string\">&quot;white&quot;</span>; <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\"># 如果UID等于0(root)，则为红色，否则为白色</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">local</span> ret_status=<span class=\"string\">&quot;%(?:%&#123;<span class=\"variable\">$fg</span>[green]%&#125;%B&gt;%b :%&#123;<span class=\"variable\">$fg</span>[red]%&#125;%B&gt;%b )&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 命令正确则为绿色，否则为红色</span></span><br><span class=\"line\"></span><br><span class=\"line\">PROMPT=<span class=\"string\">&#x27;%&#123;$fg[$NCOLOR]%&#125;%n%&#123;$reset_color%&#125;@%&#123;$fg[white]%&#125;%m%&#123;$reset_color%&#125;:%&#123;$fg[blue]%&#125;%B%c%b%&#123;$reset_color%&#125;$(git_prompt_info) $&#123;ret_status&#125;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 颜色</span></span><br><span class=\"line\"><span class=\"comment\"># black, red, green, yellow, blue, magenta, cyan, white</span></span><br><span class=\"line\"><span class=\"comment\"># 黑，红，绿，黄，蓝，洋红(紫)，青色，白色</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># --------------------- </span></span><br><span class=\"line\"><span class=\"comment\"># %n  用户名</span></span><br><span class=\"line\"><span class=\"comment\"># %M  计算机的主机名</span></span><br><span class=\"line\"><span class=\"comment\"># %m  计算机的主机名（在第一个句号之前截断）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># %d  目前的工作目录</span></span><br><span class=\"line\"><span class=\"comment\"># %~  目前的工作目录相对于～的相对路径</span></span><br><span class=\"line\"><span class=\"comment\"># %l  当前的tty</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># %T  系统时间（时：分）</span></span><br><span class=\"line\"><span class=\"comment\"># %*  系统时间（时：分：秒）</span></span><br><span class=\"line\"><span class=\"comment\"># %D  系统日期（年-月-日）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># %B - %b 开始到结束使用粗体打印</span></span><br><span class=\"line\"><span class=\"comment\"># %U - %u 开始到结束使用下划线打印</span></span><br><span class=\"line\"><span class=\"comment\"># --------------------- </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># git theming</span></span><br><span class=\"line\">ZSH_THEME_GIT_PROMPT_PREFIX=<span class=\"string\">&quot;%&#123;<span class=\"variable\">$fg_bold</span>[white]%&#125;(%&#123;<span class=\"variable\">$fg_bold</span>[yellow]%&#125;%B&quot;</span></span><br><span class=\"line\">ZSH_THEME_GIT_PROMPT_SUFFIX=<span class=\"string\">&quot;%b%&#123;<span class=\"variable\">$fg_bold</span>[white]%&#125;)%&#123;<span class=\"variable\">$reset_color</span>%&#125;&quot;</span></span><br><span class=\"line\">ZSH_THEME_GIT_PROMPT_CLEAN=<span class=\"string\">&quot;%&#123;<span class=\"variable\">$fg_bold</span>[green]%&#125; ✔&quot;</span></span><br><span class=\"line\">ZSH_THEME_GIT_PROMPT_DIRTY=<span class=\"string\">&quot;%&#123;<span class=\"variable\">$fg_bold</span>[red]%&#125; ✗&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n<li><p>下载相关插件</p>\n<ul>\n<li><a href=\"https://github.com/zsh-users/zsh-syntax-highlighting\">zsh-syntax-highlighting</a></li>\n<li><a href=\"https://github.com/zsh-users/zsh-completions\">zsh-completions</a></li>\n<li><a href=\"https://github.com/zsh-users/zsh-autosuggestions\">zsh-autosuggestions</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><code>source .zshrc</code>，oh-my-zsh就配置好了。</p>\n<br></li>\n</ol>\n</li>\n</ol>\n<ol start=\"3\">\n<li><p>配置Vim</p>\n<p> oh-my-zsh是平台，Vim就是双手。</p>\n<ul>\n<li><p>开启终端鼠标复制</p>\n<ul>\n<li><code>vim /etc/vim/vimrc</code> (<code>vim /usr/share/vim/vim80/defaults.vim</code> 70行)</li>\n<li><code>set mouse=c</code></li>\n</ul>\n</li>\n<li><p>上传本地<code>.vimrc</code>到服务器，稍作修改</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&quot; Configuration file for vim</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> modelines=<span class=\"number\">0</span>     <span class=\"comment\">&quot; CVE-2007-2438</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; Normally we use vim-extensions. If you want true vi-compatibility</span></span><br><span class=\"line\"><span class=\"comment\">&quot; remove change the following statements</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> nocompatible    <span class=\"comment\">&quot; Use Vim defaults instead of 100% vi compatibility</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> backspace=<span class=\"number\">2</span>     <span class=\"comment\">&quot; more powerful backspacing</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot; Don&#x27;t write backup file if vim is being called by &quot;</span>crontab -<span class=\"keyword\">e</span><span class=\"comment\">&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">au</span> BufWrite /private/tmp/crontab.* <span class=\"keyword\">set</span> nowritebackup nobackup</span><br><span class=\"line\"><span class=\"string\">&quot; Don&#x27;t write backup file if vim is being called by &quot;</span>chpass<span class=\"comment\">&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">au</span> BufWrite /private/etc/<span class=\"keyword\">pw</span>.* <span class=\"keyword\">set</span> nowritebackup nobackup</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> fileencodings=utf-<span class=\"number\">8</span>,gb18030</span><br><span class=\"line\"><span class=\"keyword\">set</span> termencoding=utf-<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> encoding=utf-<span class=\"number\">8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">number</span></span><br><span class=\"line\"><span class=\"keyword\">syntax</span> <span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> tabstop=<span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> expandtab</span><br><span class=\"line\"><span class=\"keyword\">set</span> softtabstop=<span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"built_in\">shiftwidth</span>=<span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> smartindent</span><br></pre></td></tr></table></figure></li>\n<li><p>Vim常用操作</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">esc    从编辑模式切换到命令模式</span><br><span class=\"line\"></span><br><span class=\"line\">a      切换到编辑模式，在光标后插入</span><br><span class=\"line\">o      切换到编辑模式，在光标下一行插入</span><br><span class=\"line\"></span><br><span class=\"line\">v      可视模式</span><br><span class=\"line\">r      取代模式</span><br><span class=\"line\"></span><br><span class=\"line\">命令模式下：</span><br><span class=\"line\">Ctrl+b 向上翻页</span><br><span class=\"line\">Ctrl+d 向下翻页</span><br><span class=\"line\">/      光标之后搜索</span><br><span class=\"line\">?      光标之前搜索</span><br><span class=\"line\"></span><br><span class=\"line\">n&lt;space&gt; 光标向右移动n个字符</span><br><span class=\"line\">n&lt;Enter&gt; 光标向下移动n行</span><br><span class=\"line\">0      光标移到行首</span><br><span class=\"line\">$      光标移到行尾</span><br><span class=\"line\"></span><br><span class=\"line\">G      跳至文件末尾</span><br><span class=\"line\">ggdG   清空内容，光标移动到首字符，删除到尾部</span><br><span class=\"line\"></span><br><span class=\"line\">u      撤销操作</span><br><span class=\"line\">Ctrl+r 重做上一个动作</span><br><span class=\"line\"></span><br><span class=\"line\">d      剪切</span><br><span class=\"line\">dd     删除光标那一行字符</span><br><span class=\"line\">dw     删除当前光标所在位置到单词尾字符</span><br><span class=\"line\">d0     删除光标到行首的字符</span><br><span class=\"line\">d$     删除光标到行尾的字符</span><br><span class=\"line\">y      复制</span><br><span class=\"line\">y2     复制单词</span><br><span class=\"line\">p      粘贴（将已复制的数据在光标下一行粘贴）</span><br><span class=\"line\">x      删除当前光标所在处的字符（向后删除一个字符）</span><br><span class=\"line\"></span><br><span class=\"line\">:wq    保存退出</span><br><span class=\"line\">:q     退出</span><br><span class=\"line\">:q!    强制退出</span><br><span class=\"line\">:w [filename] 将编辑的数据另存为</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<br>\n\n\n<h2 id=\"配置防火墙\"><a href=\"#配置防火墙\" class=\"headerlink\" title=\"配置防火墙\"></a>配置防火墙</h2><p>CentOS7已经默认使用Firewalld了，Firewalld的防火墙本质上是建立在原生的iptable防火墙之上的抽象层，再加上Firewalld默认关闭所有端口，需要哪个开哪个，以及命令也比较灵活，所以在Debian上我也想用Firewalld。</p>\n<ol>\n<li><p>安装</p>\n<ul>\n<li><code>apt install firewalld</code></li>\n<li><code>firewall-cmd --version</code> 查看版本</li>\n</ul>\n</li>\n<li><p>启动</p>\n<ul>\n<li><code>systemctl start firewalld</code> 启动</li>\n<li><code>systemctl enable firewalld</code> 开机启动</li>\n<li><code>firewall-cmd --state</code> 运行状态</li>\n<li><code>systemctl status firewalld</code> 查看FirewallD守护进程的状态</li>\n</ul>\n</li>\n<li><p>使用</p>\n<p> Firewalld的配置可通过三种方式：</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd    # 命令行的用户接口，常用</span><br><span class=\"line\">/etc/firewalld/    # 目录下的xml文件，编辑xml文件实现firewall的配置</span><br><span class=\"line\">firewall-config    # 图形界面接口，终端上无法使用</span><br></pre></td></tr></table></figure></li>\n<li><p>服务和端口</p>\n<p> 默认支持的服务的配置文件位于<code>/usr/lib/firewalld/services</code>，用户创建的服务文件在<code>/etc/firewalld/services</code>中。</p>\n<ul>\n<li><code>firewall-cmd --list-all</code> 列出配置的所有防火墙规则</li>\n<li><code>firewall-cmd --get-services</code> 查看启用的所有服务的列表</li>\n<li><code>firewall-cmd --add-service=http --permanent</code> 启用http服务</li>\n<li><code>firewall-cmd --add-port=1024/tcp --permanent</code> 启用tcp端口1024</li>\n<li><code>firewall-cmd --add-port=5000-5200/udp --permanent</code> 启用udp端口一个地址段</li>\n<li><code>firewall-cmd --reload</code> 重新加载 FirewallD 配置</li>\n<li>禁用服务或端口，将add改为<code>remove</code></li>\n</ul>\n</li>\n<li><p>区域管理</p>\n<p> “区域”是针对给定位置或场景（例如家庭、公共、受信任等）可能具有的各种信任级别的预构建规则集。不同的区域允许不同的网络服务和入站流量类型，而拒绝其他任何流量。 首次启用 FirewallD 后，public 将是默认区域。</p>\n<ul>\n<li><code>firewall-cmd --get-default-zone</code> 默认区域</li>\n<li><code>firewall-cmd --set-default-zone=internal</code> 修改默认区域</li>\n<li><code>firewall-cmd --zone=public --list-all</code> 得到特定区域的所有配置</li>\n<li><code>firewall-cmd --list-all-zones</code> 得到所有区域的配置</li>\n<li><code>firewall-cmd --zone=public --add-port=12345/tcp --permanent</code> 启用特定区域的端口</li>\n</ul>\n</li>\n</ol>\n<p>与阿里云安全组规则对应，我开启了<code>22/tcp 1024/tcp 1126/tcp</code>四个端口，每次配置之后，运行<code>firewall-cmd --reload</code> 重新加载FirewallD使其生效。</p>\n<br>\n\n\n<h2 id=\"Systemd\"><a href=\"#Systemd\" class=\"headerlink\" title=\"Systemd\"></a>Systemd</h2><p>Systemd很方便用于系统服务管理。</p>\n<ol>\n<li><p>systemctl</p>\n<p> <code>systemctl</code>是Systemd的主命令，用于管理系统。</p>\n<ol>\n<li><p>检查</p>\n<ul>\n<li><code>systemctl --version</code></li>\n<li><code>whereis systemd </code> 安装位置</li>\n<li><code>whereis systemctl</code></li>\n</ul>\n</li>\n<li><p>使用</p>\n<ul>\n<li><p><code>systemctl list-unit-files</code> 列出所有可用单元</p>\n</li>\n<li><p><code>systemctl list-units</code> 列出所有运行中单元</p>\n</li>\n<li><p><code>systemctl --failed</code> 列出所有失败单元</p>\n</li>\n<li><p><code>systemctl list-unit-files --type=service</code> 列出所有服务（包括启用的和禁用的）  </p>\n</li>\n<li><p><code>systemctl is-active nginx.service</code> 查看服务是否运行</p>\n</li>\n<li><p><code>systemctl is-enabled nginx</code> 查看服务是否设置为开机启动（不带后缀默认就是<code>.service</code>单元，其他的单元比如<code>.mount .sockets .device .target</code>都必须指定类型）</p>\n</li>\n<li><p><code>systemctl status firewalld.service</code> 检查某个单元或服务状态</p>\n</li>\n</ul>\n</li>\n<li><p>管理</p>\n<ul>\n<li><code>systemctl status httpd.service</code> 检查状态</li>\n<li><code>systemctl start httpd.service</code> 启动</li>\n<li><code>systemctl reload httpd.service</code> 重载</li>\n<li><code>systemctl restart httpd.service</code> 重启</li>\n<li><code>systemctl stop httpd.service</code> 停止</li>\n<li><code>systemctl show httpd</code> 检查某个服务的所有配置细节</li>\n<li><code>systemctl kill httpd</code> 杀死服务</li>\n</ul>\n</li>\n<li><p>开机自启</p>\n<ul>\n<li><code>systemctl is-active httpd.service</code> 激活服务</li>\n<li><code>systemctl enable httpd.service</code> 开机自启</li>\n<li><code>systemctl disable httpd.service</code> 禁用</li>\n</ul>\n</li>\n<li><p>管理套接口</p>\n<p> 与服务类似。</p>\n<ul>\n<li><code>systemctl list-unit-files --type=socket</code> 列出所有可用系统套接口</li>\n<li><code>systemctl status cups.socket</code></li>\n<li><code>systemctl start cups.socket</code></li>\n<li><code>systemctl reload cups.socket</code></li>\n<li><code>systemctl restart cups.socket</code></li>\n<li><code>systemctl stop cups.socket</code><br></li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p><code>hostnamectl</code> 查看当前主机的信息，最开始用过。</p>\n</li>\n<li><p><code>localectl</code> 查看本地化设置</p>\n</li>\n<li><p><code>timedatectl</code> 查看当前时区设置</p>\n</li>\n<li><p><code>loginctl</code> 查看当前登录的用户</p>\n</li>\n</ol>\n<br>\n\n\n<h2 id=\"LNMP环境\"><a href=\"#LNMP环境\" class=\"headerlink\" title=\"LNMP环境\"></a>LNMP环境</h2><p>LNMP代表的就是<code>Linux+Nginx+MySQL/MariaDB+PHP/Python/Perl</code>。</p>\n<ol>\n<li><p>Nginx安装</p>\n<ol>\n<li><p>安装</p>\n<ul>\n<li><code>apt install nginx</code></li>\n</ul>\n</li>\n<li><p>启动</p>\n<ul>\n<li><code>whereis nginx</code> 查看位置</li>\n<li><code>/etc/nginx/nginx.conf</code> 配置文件</li>\n<li><code>/etc/nginx/sites-enabled/</code>，修改<code>default</code>文件中的端口为<code>1126</code>。</li>\n<li><code>systemctl start nginx</code> 启动nginx</li>\n<li><code>systemctl enable nginx</code> 开机自启</li>\n<li><code>systemctl status nginx</code> 查看状态</li>\n<li><code>systemctl restart nginx</code> 重启Nginx</li>\n</ul>\n</li>\n<li><p>检查<br> 在浏览器输入<code>IP:port</code>访问网址，有<code>Welcome to nginx!</code>则成功。<br> 网站根目录，<code>/var/www/html</code></p>\n<br></li>\n</ol>\n</li>\n<li><p>MySQL安装</p>\n<ol>\n<li><p>安装</p>\n<ul>\n<li><code>apt install mysql-server</code></li>\n<li><code>apt install mysql-client</code></li>\n</ul>\n</li>\n<li><p>检查</p>\n<ul>\n<li><code>mysql --version</code> 发现安装的实际是MariaDB，早已听闻开源界和Oracle的爱恨情仇。由于两者的兼容性，我也不想更换了，正好可以尝试一下MariaDB。(如果想非MySQL不可，可以<a href=\"https://dev.mysql.com/downloads/repo/apt/\">离线安装</a>)</li>\n</ul>\n</li>\n<li><p>登录</p>\n<ul>\n<li><code>mysql -u root -p </code></li>\n</ul>\n</li>\n<li><p><code>/etc/mysql/my.cnf</code></p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[client]</span><br><span class=\"line\">default-character-set=utf8mb4</span><br><span class=\"line\"></span><br><span class=\"line\">[mysql]</span><br><span class=\"line\">default-character-set=utf8mb4</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">character-set-server=utf8mb4</span><br><span class=\"line\"></span><br><span class=\"line\">bind-address = 0.0.0.0</span><br></pre></td></tr></table></figure></li>\n<li><p>远程登录（开启端口）</p>\n<ul>\n<li><code>grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;密码&#39;;</code></li>\n<li><code>flush privileges;</code><br></li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>其他</p>\n<p> 后端不太想用PHP，Debian自带Python3和perl。</p>\n<p> 至此，一个基础的Linux环境就弄好了。由此来看，也许Red Hat系和Debian系也许真的就是<code>yum</code>和<code>apt-get</code>的差别了。🤔</p>\n<p> <strong>可以暂告一段落了，也可能到此为止了。</strong></p>\n<p> <strong>注：</strong> perl运行准备</p>\n<ul>\n<li><code>echo &quot;export LC_ALL=C&quot; &gt;&gt; /root/.bashrc</code></li>\n<li><code>source /root/.bashrc </code><br></li>\n</ul>\n</li>\n</ol>\n<blockquote>\n<p>生命在于折腾。</p>\n</blockquote>\n<p><br><br></p>\n","categories":["计算机"],"tags":["Linux","Debian","Apache","Nginx","服务器"]},{"title":"动画世界","url":"https://blog.ykqmain.com/donghua/","content":"<p>很多时候，有着对动画世界的无限向往，看完一部动画，除了感叹一句“太美好了！”之外，还能给内心的一时愉悦，就像进入了一个新的时空，体验一段不一样的人生。总要回味良久，或悲伤不能自拔，或热血自我代入。搜集着各种美图壁纸，去各个论坛讨论一番，买两个周边，最喜爱的行为莫过于换个“头像”了。</p>\n<p>动画里的人物，似乎不用为了衣食住行而担忧，有良辰、有美景，还有最好的伙伴、以及那个不离不弃的她，美好得令人心碎。</p>\n<p><strong>即使有今生的遗憾，却还有来世的希望。</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/main/1.jpg\"></p>\n<p>而我等小人物却为衣食住行奔波一生，渺小且孤独的存在着，淹没在历史的长河中。也许唯一能做的只是在失落之时、仰望星空之余，还可以感叹一句，「天高地迥，觉宇宙之无穷；兴尽悲来，识盈虚之有数。」</p>\n<p>思维小小的驻足之后，还得抓紧时间回到生活，为了一点蝇头小利、残羹冷炙争个头破血流。</p>\n<p>还特么的无可奈何。</p>\n<br>\n\n<p>现在是不会再花心思到处搜集图片了，一个个论坛也基本沦陷，没有立足之处。之前知名大厂Autodesk的SketchBook完全免费了，联想到了同为Autodesk的3ds Max，初中买了一本它的教程，那个价格对当时的我来说，无疑是天价，但我当时并不心疼，因为它承载了我的梦想。 但是现在的我很心痛，因为我对不起它。</p>\n<p>能为梦想而坚持，不为社会左右，真是幸福美满且令人羡慕的人生啊。</p>\n<p><strong>万物皆有所待，我仍找不到属于自己的世界。</strong></p>\n<p>与初心相背，为自己的无能找个借口，躺在这一方“桃花源”，独善其身，无功无名，碌碌而终。</p>\n<p>也许碌碌无为并没有什么不好，有多大的能力做多大的事，身体健康，家庭和睦，关心且只关心那些在意的人和事。「会桃花之芳园，序天伦之乐事。」</p>\n<p>也许<strong>人生不是为了做出多么杰出的贡献，而是感受到生活的快乐。</strong>思考人生的意义，会发现一切都变得毫无意义。</p>\n<p>努力而无憾，在需要的时候，能够来一份「精神食粮」，足矣。</p>\n<p>只是从前的那些美好时光，以及亲密无间的小伙伴们，再也不会有了。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["动画","世界","美好"]},{"title":"Flask实践","url":"https://blog.ykqmain.com/flask/","content":"<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">开发环境</span><br><span class=\"line\">Python 3.7.2</span><br><span class=\"line\">Flask 1.0.2</span><br><span class=\"line\"></span><br><span class=\"line\">本机</span><br><span class=\"line\">macOS 10.14.3</span><br><span class=\"line\"></span><br><span class=\"line\">远程</span><br><span class=\"line\">Linux version 4.14.77-81.59.amzn2.x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">其他软件</span><br><span class=\"line\">Atom Editor 1.34</span><br><span class=\"line\">Postman 6.7.2</span><br></pre></td></tr></table></figure>\n\n<p>学完了Python，就开始Flask实践。</p>\n<br>\n\n\n<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><ol>\n<li><p>虚拟环境</p>\n<p> 在虚拟环境安装私有包，保持全局的干净整洁。</p>\n<p> <code>新建一个文件夹</code></p>\n<p> 创建虚拟环境：</p>\n<p> <code>python3 -m venv hello</code></p>\n<br></li>\n<li><p>激活虚拟环境</p>\n<p> <code>source hello/bin/activate</code></p>\n<p> 激活虚拟环境后会修改命令提示符，加入环境名<code>(venv) $</code>，在虚拟环境中使用<code>python3</code>命令，调用的是虚拟环境中的解释器。</p>\n<br></li>\n<li><p>安装Python包</p>\n<p> 使用pip命令安装Python包，<code>pip3 install XXX</code></p>\n<p> 使用<code>pip3 freeze</code>查看安装了哪些包，生成<code>requirements.txt</code>文件，<code>pip3 freeze &gt;requirements.txt</code></p>\n<p> 安装所有需求包，<code>pip3 install -r requirements.txt</code></p>\n<p> 安装Flask，<code>pip3 install flask</code></p>\n</li>\n</ol>\n<br>\n\n\n<h2 id=\"基本结构\"><a href=\"#基本结构\" class=\"headerlink\" title=\"基本结构\"></a>基本结构</h2><ol>\n<li><p>初始化</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\">app = Flask(__name__)</span><br></pre></td></tr></table></figure>\n<br></li>\n<li><p>路由和视图</p>\n<p> 处理URL和函数之间关系的程序称为路由，在Flask中定义路由的最简便方式，是使用应用实例提供的<code>app.route</code>装饰器。</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;Hello World!&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>app.add_url_rule()</code>方法，接受3个参数，URL、端点名、视图函数。</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;Hello World!&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">app.add_url_rule(<span class=\"string\">&#x27;/&#x27;</span>, <span class=\"string\">&#x27;index&#x27;</span>, index)</span><br></pre></td></tr></table></figure>\n<br></li>\n<li><p>一个完整的应用</p>\n</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># hello.py</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user/&lt;name&gt;&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">user</span>(<span class=\"params\">name</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;Hello, &#123;&#125;!&#x27;</span>.<span class=\"built_in\">format</span>(name)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run(debug=<span class=\"literal\">True</span>)</span><br></pre></td></tr></table></figure>\n\n<p>在虚拟环境的终端中，输入<code>python3 hello.py</code>启动Flask。</p>\n<br>\n\n\n<h2 id=\"GET和POST\"><a href=\"#GET和POST\" class=\"headerlink\" title=\"GET和POST\"></a>GET和POST</h2><p>使用浏览器(Safari 12)和Postman(6.7.2)来测试各种GET和POST。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request, jsonify</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span>, methods=[<span class=\"string\">&#x27;get&#x27;</span>]</span>)    </span><span class=\"comment\"># 一个简单的get请求</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;Hello World!&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_number</span>(<span class=\"params\">s</span>):</span>    <span class=\"comment\"># 判断字符串是否为数字的函数</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"built_in\">float</span>(s)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span> ValueError:</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">import</span> unicodedata</span><br><span class=\"line\">        unicodedata.numeric(s)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span> (TypeError, ValueError):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/api&#x27;</span>, methods=[<span class=\"string\">&#x27;get&#x27;</span>]</span>)    </span><span class=\"comment\"># 通过get请求判断&quot;http://127.0.0.1:5000/api?number=X&quot;中X是奇数还是偶数</span></span><br><span class=\"line\"><span class=\"comment\"># 使用浏览器访问网址</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">api</span>():</span></span><br><span class=\"line\">    s = request.args.get(<span class=\"string\">&#x27;number&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> is_number(s):    <span class=\"comment\"># 判断是否是数字</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">float</span>(s) % <span class=\"number\">2</span> == <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是偶数，如果不加float会报错，not all arguments converted during string formatting</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;偶数&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> <span class=\"built_in\">float</span>(s) % <span class=\"number\">2</span> != <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是奇数</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;奇数&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;数据错误&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span>, methods=[<span class=\"string\">&#x27;post&#x27;</span>]</span>)    </span><span class=\"comment\"># 通过post请求和json数据判断number是奇数还是偶数</span></span><br><span class=\"line\"><span class=\"comment\"># 利用Postman发送post请求</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">response</span>():</span></span><br><span class=\"line\">    data = request.get_json()</span><br><span class=\"line\">    <span class=\"comment\"># 从请求的包体里取出数据并格式化为dict格式</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\">    s = data.get(<span class=\"string\">&#x27;number&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> is_number(s):    <span class=\"comment\"># 判断是否是数字</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> s % <span class=\"number\">2</span> == <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是偶数</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> jsonify(&#123;<span class=\"string\">&quot;msg&quot;</span>: <span class=\"string\">&quot;偶数&quot;</span>&#125;)</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> s % <span class=\"number\">2</span> != <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是奇数</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> jsonify(&#123;<span class=\"string\">&quot;msg&quot;</span>: <span class=\"string\">&quot;奇数&quot;</span>&#125;)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> jsonify(&#123;<span class=\"string\">&quot;msg&quot;</span>: <span class=\"string\">&quot;数据错误&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run(debug=<span class=\"literal\">True</span>)</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p>用类视图改写上面的函数视图：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request, jsonify</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask.views <span class=\"keyword\">import</span> MethodView</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_number</span>(<span class=\"params\">s</span>):</span>    <span class=\"comment\"># 判断字符串是否为数字</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"built_in\">float</span>(s)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span> ValueError:</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">import</span> unicodedata</span><br><span class=\"line\">        unicodedata.numeric(s)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span> (TypeError, ValueError):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserView</span>(<span class=\"params\">MethodView</span>):</span></span><br><span class=\"line\">    methods = [<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;POST&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">dispatch_request</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> request.method == <span class=\"string\">&#x27;GET&#x27;</span>:    <span class=\"comment\"># 当客户端通过get方法进行访问的时候</span></span><br><span class=\"line\">            s = request.args.get(<span class=\"string\">&#x27;number&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> is_number(s):    <span class=\"comment\"># 判断是否是数字</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> <span class=\"built_in\">float</span>(s) % <span class=\"number\">2</span> == <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是偶数，如果不加float会报错，not all arguments converted during string formatting</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"string\">&quot;偶数&quot;</span></span><br><span class=\"line\">                <span class=\"keyword\">elif</span> <span class=\"built_in\">float</span>(s) % <span class=\"number\">2</span> != <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是奇数</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"string\">&quot;奇数&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">&quot;数据错误&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> request.method == <span class=\"string\">&#x27;POST&#x27;</span>:    <span class=\"comment\"># 当客户端通过post方法进行访问的时候</span></span><br><span class=\"line\">            data = request.get_json()</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(data)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(data))</span><br><span class=\"line\"></span><br><span class=\"line\">            s = data.get(<span class=\"string\">&#x27;number&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> is_number(s):    <span class=\"comment\"># 判断是否是数字</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> s % <span class=\"number\">2</span> == <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是偶数</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> jsonify(&#123;<span class=\"string\">&quot;msg&quot;</span>: <span class=\"string\">&quot;偶数&quot;</span>&#125;)</span><br><span class=\"line\">                <span class=\"keyword\">elif</span> s % <span class=\"number\">2</span> != <span class=\"number\">0</span>:    <span class=\"comment\"># 判断是否是奇数</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> jsonify(&#123;<span class=\"string\">&quot;msg&quot;</span>: <span class=\"string\">&quot;奇数&quot;</span>&#125;)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> jsonify(&#123;<span class=\"string\">&quot;msg&quot;</span>: <span class=\"string\">&quot;数据错误&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">user_view = UserView.as_view(<span class=\"string\">&#x27;user&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 将GET /user 请求绑定到UserView.get()方法上</span></span><br><span class=\"line\">app.add_url_rule(<span class=\"string\">&#x27;/user&#x27;</span>, view_func=user_view, methods=[<span class=\"string\">&#x27;GET&#x27;</span>, ])</span><br><span class=\"line\"><span class=\"comment\"># 将POST /user 请求绑定到UserView.post()方法上</span></span><br><span class=\"line\">app.add_url_rule(<span class=\"string\">&#x27;/user&#x27;</span>, view_func=user_view, methods=[<span class=\"string\">&#x27;POST&#x27;</span>, ])</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run(debug=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<br>\n\n\n<h2 id=\"Flask的数据库基础操作\"><a href=\"#Flask的数据库基础操作\" class=\"headerlink\" title=\"Flask的数据库基础操作\"></a>Flask的数据库基础操作</h2><p>使用flask-sqlalchemy操作mysql实现增删改查。</p>\n<p>安装Python包：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install flask-sqlalchemy</span><br><span class=\"line\">pip3 install PyMySQL</span><br></pre></td></tr></table></figure>\n\n<p>具体代码：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 注意使用的不同请求</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request, jsonify</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask_sqlalchemy <span class=\"keyword\">import</span> SQLAlchemy</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\">app.config[<span class=\"string\">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class=\"string\">&#x27;mysql+pymysql://root:密码@localhost:3306/test?charset=utf8&#x27;</span></span><br><span class=\"line\">app.config[<span class=\"string\">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">mydb = SQLAlchemy(app)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 模型</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Movie</span>(<span class=\"params\">mydb.Model</span>):</span>    <span class=\"comment\"># 创建一个表</span></span><br><span class=\"line\">    __tablename__ = <span class=\"string\">&#x27;movies&#x27;</span></span><br><span class=\"line\">    <span class=\"built_in\">id</span> = mydb.Column(mydb.Integer, primary_key=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    name = mydb.Column(mydb.String(<span class=\"number\">100</span>), unique=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    date = mydb.Column(mydb.Integer)</span><br><span class=\"line\">    star = mydb.Column(mydb.Float, nullable=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&lt;Name %r&gt;&#x27;</span> % self.name</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 获取列表</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/users&#x27;</span>, methods=[<span class=\"string\">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getMovies</span>():</span></span><br><span class=\"line\">    data = Movie.query.<span class=\"built_in\">all</span>()</span><br><span class=\"line\">    datas = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> movies <span class=\"keyword\">in</span> data:</span><br><span class=\"line\">        datas.append(&#123;<span class=\"string\">&#x27;id&#x27;</span>: movies.<span class=\"built_in\">id</span>, <span class=\"string\">&#x27;name&#x27;</span>: movies.name, <span class=\"string\">&#x27;date&#x27;</span>: movies.date, <span class=\"string\">&#x27;star&#x27;</span>: movies.star&#125;)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> jsonify(data=datas)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加数据</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user&#x27;</span>, methods=[<span class=\"string\">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">addMovie</span>():</span></span><br><span class=\"line\"></span><br><span class=\"line\">    adict = request.get_json()</span><br><span class=\"line\">    name = adict.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    date = adict.get(<span class=\"string\">&#x27;date&#x27;</span>)</span><br><span class=\"line\">    star = adict.get(<span class=\"string\">&#x27;star&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(name, date, star)</span><br><span class=\"line\"></span><br><span class=\"line\">    movies = Movie(name=name, date=date, star=star)</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        mydb.session.add(movies)</span><br><span class=\"line\">        mydb.session.commit()</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(e)</span><br><span class=\"line\">        mydb.session.rollback()</span><br><span class=\"line\">        mydb.session.flush()</span><br><span class=\"line\">    userId = movies.<span class=\"built_in\">id</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (movies.<span class=\"built_in\">id</span> <span class=\"keyword\">is</span> <span class=\"literal\">None</span>):</span><br><span class=\"line\">        result = &#123;<span class=\"string\">&#x27;msg&#x27;</span>: <span class=\"string\">&#x27;添加失败&#x27;</span>&#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> jsonify(data=result)</span><br><span class=\"line\"></span><br><span class=\"line\">    data = Movie.query.filter_by(<span class=\"built_in\">id</span>=userId).first()</span><br><span class=\"line\">    result = &#123;<span class=\"string\">&#x27;id&#x27;</span>: movies.<span class=\"built_in\">id</span>, <span class=\"string\">&#x27;name&#x27;</span>: movies.name, <span class=\"string\">&#x27;date&#x27;</span>: movies.date, <span class=\"string\">&#x27;star&#x27;</span>: movies.star&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> jsonify(data=result)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 获取单条数据</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user/&lt;int:userId&gt;&#x27;</span>, methods=[<span class=\"string\">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getMovie</span>(<span class=\"params\">userId</span>):</span></span><br><span class=\"line\">    movies = Movie.query.filter_by(<span class=\"built_in\">id</span>=userId).first()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (movies <span class=\"keyword\">is</span> <span class=\"literal\">None</span>):</span><br><span class=\"line\">        result = &#123;<span class=\"string\">&#x27;msg&#x27;</span>: <span class=\"string\">&#x27;None&#x27;</span>&#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        result = &#123;<span class=\"string\">&#x27;id&#x27;</span>: movies.<span class=\"built_in\">id</span>, <span class=\"string\">&#x27;name&#x27;</span>: movies.name, <span class=\"string\">&#x27;date&#x27;</span>: movies.date, <span class=\"string\">&#x27;star&#x27;</span>: movies.star&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> jsonify(data=result)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改数据</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user/&lt;int:userId&gt;&#x27;</span>, methods=[<span class=\"string\">&#x27;PATCH&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">updateMovie</span>(<span class=\"params\">userId</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    adict = request.get_json()</span><br><span class=\"line\">    name = adict.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    date = adict.get(<span class=\"string\">&#x27;date&#x27;</span>)</span><br><span class=\"line\">    star = adict.get(<span class=\"string\">&#x27;star&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        movies = Movie.query.filter_by(<span class=\"built_in\">id</span>=userId).first()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (movies <span class=\"keyword\">is</span> <span class=\"literal\">None</span>):</span><br><span class=\"line\">            result = &#123;<span class=\"string\">&#x27;msg&#x27;</span>: <span class=\"string\">&#x27;找不到要修改的记录&#x27;</span>&#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> jsonify(data=result)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            movies.name = name</span><br><span class=\"line\">            movies.date = date</span><br><span class=\"line\">            movies.star = star</span><br><span class=\"line\">            mydb.session.commit()</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        mydb.session.rollback()</span><br><span class=\"line\">        mydb.session.flush()</span><br><span class=\"line\">    userId = movies.<span class=\"built_in\">id</span></span><br><span class=\"line\">    data = Movie.query.filter_by(<span class=\"built_in\">id</span>=userId).first()</span><br><span class=\"line\">    result = &#123;<span class=\"string\">&#x27;id&#x27;</span>: movies.<span class=\"built_in\">id</span>, <span class=\"string\">&#x27;name&#x27;</span>: movies.name, <span class=\"string\">&#x27;date&#x27;</span>: movies.date, <span class=\"string\">&#x27;star&#x27;</span>: movies.star&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> jsonify(data=result)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># # 删除数据</span></span><br><span class=\"line\"><span class=\"comment\"># @app.route(&#x27;/user/&lt;int:userId&gt;&#x27;, methods=[&#x27;DELETE&#x27;])</span></span><br><span class=\"line\"><span class=\"comment\"># def deleteMovie(userId):</span></span><br><span class=\"line\"><span class=\"comment\">#     Movie.query.filter_by(id=userId).delete()</span></span><br><span class=\"line\"><span class=\"comment\">#     mydb.session.commit()</span></span><br><span class=\"line\"><span class=\"comment\">#     return getMovies()</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除数据</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user/delete&#x27;</span>, methods=[<span class=\"string\">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">deleteMovie</span>():</span></span><br><span class=\"line\">    adict = request.get_json()</span><br><span class=\"line\">    <span class=\"built_in\">id</span> = adict.get(<span class=\"string\">&#x27;id&#x27;</span>)</span><br><span class=\"line\">    Movie.query.filter_by(<span class=\"built_in\">id</span>=<span class=\"built_in\">id</span>).delete()</span><br><span class=\"line\">    mydb.session.commit()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getMovies()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    <span class=\"comment\"># mydb.drop_all()</span></span><br><span class=\"line\">    <span class=\"comment\"># mydb.create_all()</span></span><br><span class=\"line\">    app.run(debug=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<br>\n\n\n<h2 id=\"Flask连接企业微信的自建应用\"><a href=\"#Flask连接企业微信的自建应用\" class=\"headerlink\" title=\"Flask连接企业微信的自建应用\"></a>Flask连接企业微信的自建应用</h2><ol>\n<li>发送消息给自建应用</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/wx&#x27;</span>, methods=[<span class=\"string\">&#x27;post&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sendMsg</span>():</span></span><br><span class=\"line\">    data = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;touser&quot;</span>: (<span class=\"string\">&#x27;|&#x27;</span>).join(self.userid.split(<span class=\"string\">&#x27;,&#x27;</span>)),</span><br><span class=\"line\">        <span class=\"string\">&quot;toparty&quot;</span>: (<span class=\"string\">&#x27;|&#x27;</span>).join(self.partid.split(<span class=\"string\">&#x27;,&#x27;</span>)),</span><br><span class=\"line\">        <span class=\"comment\"># &quot;toparty&quot;:int(self.partid),</span></span><br><span class=\"line\">        <span class=\"string\">&quot;msgtype&quot;</span>: <span class=\"string\">&quot;text&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;agentid&quot;</span>: self.agent_id,</span><br><span class=\"line\">        <span class=\"string\">&quot;text&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;content&quot;</span>: request.get_json().get(<span class=\"string\">&quot;content&quot;</span>)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;safe&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(data.get(<span class=\"string\">&#x27;text&#x27;</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    requests.post(self.send_msg_url.<span class=\"built_in\">format</span>(self.access_token), json=data)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;success&#x27;</span></span><br></pre></td></tr></table></figure>\n<br>\n\n<ol start=\"2\">\n<li>接收应用的消息，并回复相同的内容</li>\n</ol>\n<p>首先进行回调配置，改写腾讯官方的<code>WXBizMsgCrypt.py</code>工具，导入。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将原版本改写成Python3版</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- encoding:utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot; 对企业微信发送给企业后台的消息加解密示例代码.</span></span><br><span class=\"line\"><span class=\"string\">@copyright: Copyright (c) 1998-2014 Tencent Inc.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># ------------------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> base64</span><br><span class=\"line\"><span class=\"keyword\">import</span> string</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">from</span> Crypto.Cipher <span class=\"keyword\">import</span> AES</span><br><span class=\"line\"><span class=\"keyword\">import</span> xml.etree.cElementTree <span class=\"keyword\">as</span> ET</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> ierror</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># import sys</span></span><br><span class=\"line\"><span class=\"comment\"># reload(sys)</span></span><br><span class=\"line\"><span class=\"comment\"># sys.setdefaultencoding(&#x27;utf-8&#x27;)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># import importlib</span></span><br><span class=\"line\"><span class=\"comment\"># importlib.reload(sys)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">关于Crypto.Cipher模块，ImportError: No module named &#x27;Crypto&#x27;解决方案</span></span><br><span class=\"line\"><span class=\"string\">请到官方网站 https://www.dlitz.net/software/pycrypto/ 下载pycrypto。</span></span><br><span class=\"line\"><span class=\"string\">下载后，按照README中的“Installation”小节的提示进行pycrypto安装。</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FormatException</span>(<span class=\"params\">Exception</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">throw_exception</span>(<span class=\"params\">message, exception_class=FormatException</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;my define raise exception function&quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">raise</span> exception_class(message)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SHA1</span>:</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;计算企业微信的消息签名接口&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getSHA1</span>(<span class=\"params\">self, token, timestamp, nonce, encrypt</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;用SHA1算法生成安全签名</span></span><br><span class=\"line\"><span class=\"string\">        @param token:  票据</span></span><br><span class=\"line\"><span class=\"string\">        @param timestamp: 时间戳</span></span><br><span class=\"line\"><span class=\"string\">        @param encrypt: 密文</span></span><br><span class=\"line\"><span class=\"string\">        @param nonce: 随机字符串</span></span><br><span class=\"line\"><span class=\"string\">        @return: 安全签名</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        sortlist = [token, timestamp, nonce, encrypt]</span><br><span class=\"line\">        sortlist.sort()</span><br><span class=\"line\">        sha = hashlib.sha1()</span><br><span class=\"line\">        sha.update(<span class=\"string\">&quot;&quot;</span>.join(sortlist).encode(<span class=\"string\">&quot;utf-8&quot;</span>))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_OK, sha.hexdigest()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># try:</span></span><br><span class=\"line\">        <span class=\"comment\">#     sortlist = [token, timestamp, nonce, encrypt]</span></span><br><span class=\"line\">        <span class=\"comment\">#     sortlist.sort()</span></span><br><span class=\"line\">        <span class=\"comment\">#     sha = hashlib.sha1()</span></span><br><span class=\"line\">        <span class=\"comment\">#     sha.update(&quot;&quot;.join(sortlist))</span></span><br><span class=\"line\">        <span class=\"comment\">#     return ierror.WXBizMsgCrypt_OK, sha.hexdigest()</span></span><br><span class=\"line\">        <span class=\"comment\"># except Exception as e:</span></span><br><span class=\"line\">        <span class=\"comment\">#     print(e)</span></span><br><span class=\"line\">        <span class=\"comment\">#     return ierror.WXBizMsgCrypt_ComputeSignature_Error, None</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JsonParse</span>:</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;提供提取消息格式中的密文及生成回复消息格式的接口&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># json消息模板</span></span><br><span class=\"line\">    AES_TEXT_RESPONSE_TEMPLATE = <span class=\"string\">&#x27;&#x27;&#x27;&#123;</span></span><br><span class=\"line\"><span class=\"string\">&quot;Encrypt&quot;: &quot;%(msg_encrypt)s&quot;,</span></span><br><span class=\"line\"><span class=\"string\">&quot;MsgSignature&quot;: &quot;%(msg_signaturet)s&quot;,</span></span><br><span class=\"line\"><span class=\"string\">&quot;TimeStamp&quot;: %(timestamp)s,</span></span><br><span class=\"line\"><span class=\"string\">&quot;Nonce&quot;: &quot;%(nonce)s&quot;</span></span><br><span class=\"line\"><span class=\"string\">&#125;&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">extract</span>(<span class=\"params\">self, jsontext</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;提取出json数据包中的加密消息</span></span><br><span class=\"line\"><span class=\"string\">        @param jsontext: 待提取的json字符串</span></span><br><span class=\"line\"><span class=\"string\">        @return: 提取出的加密消息字符串</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            json_dict = json.loads(jsontext)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_OK, json_dict[<span class=\"string\">&#x27;Encrypt&#x27;</span>]</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(e)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_ParseXml_Error, <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">generate</span>(<span class=\"params\">self, encrypt, signature, timestamp, nonce</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;生成json消息</span></span><br><span class=\"line\"><span class=\"string\">        @param encrypt: 加密后的消息密文</span></span><br><span class=\"line\"><span class=\"string\">        @param signature: 安全签名</span></span><br><span class=\"line\"><span class=\"string\">        @param timestamp: 时间戳</span></span><br><span class=\"line\"><span class=\"string\">        @param nonce: 随机字符串</span></span><br><span class=\"line\"><span class=\"string\">        @return: 生成的json字符串</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        resp_dict = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;msg_encrypt&#x27;</span>: encrypt,</span><br><span class=\"line\">            <span class=\"string\">&#x27;msg_signaturet&#x27;</span>: signature,</span><br><span class=\"line\">            <span class=\"string\">&#x27;timestamp&#x27;</span>: timestamp,</span><br><span class=\"line\">            <span class=\"string\">&#x27;nonce&#x27;</span>: nonce,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        resp_json = self.AES_TEXT_RESPONSE_TEMPLATE % resp_dict</span><br><span class=\"line\">        <span class=\"keyword\">return</span> resp_json</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XMLParse</span>:</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;提供提取消息格式中的密文及生成回复消息格式的接口&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># xml消息模板</span></span><br><span class=\"line\">    AES_TEXT_RESPONSE_TEMPLATE = <span class=\"string\">&quot;&quot;&quot;&lt;xml&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;Encrypt&gt;&lt;![CDATA[%(msg_encrypt)s]]&gt;&lt;/Encrypt&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;MsgSignature&gt;&lt;![CDATA[%(msg_signaturet)s]]&gt;&lt;/MsgSignature&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;TimeStamp&gt;%(timestamp)s&lt;/TimeStamp&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;Nonce&gt;&lt;![CDATA[%(nonce)s]]&gt;&lt;/Nonce&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/xml&gt;&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">extract</span>(<span class=\"params\">self, xmltext</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;提取出xml数据包中的加密消息</span></span><br><span class=\"line\"><span class=\"string\">        @param xmltext: 待提取的xml字符串</span></span><br><span class=\"line\"><span class=\"string\">        @return: 提取出的加密消息字符串</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            xml_tree = ET.fromstring(xmltext)</span><br><span class=\"line\">            encrypt = xml_tree.find(<span class=\"string\">&quot;Encrypt&quot;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_OK, encrypt.text</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(e)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_ParseXml_Error, <span class=\"literal\">None</span>, <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">generate</span>(<span class=\"params\">self, encrypt, signature, timestamp, nonce</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;生成xml消息</span></span><br><span class=\"line\"><span class=\"string\">        @param encrypt: 加密后的消息密文</span></span><br><span class=\"line\"><span class=\"string\">        @param signature: 安全签名</span></span><br><span class=\"line\"><span class=\"string\">        @param timestamp: 时间戳</span></span><br><span class=\"line\"><span class=\"string\">        @param nonce: 随机字符串</span></span><br><span class=\"line\"><span class=\"string\">        @return: 生成的xml字符串</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        resp_dict = &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;msg_encrypt&#x27;</span>: encrypt,</span><br><span class=\"line\">            <span class=\"string\">&#x27;msg_signaturet&#x27;</span>: signature,</span><br><span class=\"line\">            <span class=\"string\">&#x27;timestamp&#x27;</span>: timestamp,</span><br><span class=\"line\">            <span class=\"string\">&#x27;nonce&#x27;</span>: nonce,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        resp_xml = self.AES_TEXT_RESPONSE_TEMPLATE % resp_dict</span><br><span class=\"line\">        <span class=\"keyword\">return</span> resp_xml</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PKCS7Encoder</span>():</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;提供基于PKCS7算法的加解密接口&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    block_size = <span class=\"number\">32</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">encode</span>(<span class=\"params\">self, text</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot; 对需要加密的明文进行填充补位</span></span><br><span class=\"line\"><span class=\"string\">        @param text: 需要进行填充补位操作的明文</span></span><br><span class=\"line\"><span class=\"string\">        @return: 补齐明文字符串</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        text_length = <span class=\"built_in\">len</span>(text)</span><br><span class=\"line\">        <span class=\"comment\"># 计算需要填充的位数</span></span><br><span class=\"line\">        amount_to_pad = self.block_size - (text_length % self.block_size)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> amount_to_pad == <span class=\"number\">0</span>:</span><br><span class=\"line\">            amount_to_pad = self.block_size</span><br><span class=\"line\">        <span class=\"comment\"># 获得补位所用的字符</span></span><br><span class=\"line\">        pad = <span class=\"built_in\">chr</span>(amount_to_pad)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> text + pad * amount_to_pad</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">decode</span>(<span class=\"params\">self, decrypted</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;删除解密后明文的补位字符</span></span><br><span class=\"line\"><span class=\"string\">        @param decrypted: 解密后的明文</span></span><br><span class=\"line\"><span class=\"string\">        @return: 删除补位字符后的明文</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"comment\"># pad = ord(decrypted[-1])</span></span><br><span class=\"line\">        pad = decrypted[-<span class=\"number\">1</span>]</span><br><span class=\"line\">        <span class=\"keyword\">if</span> pad &lt; <span class=\"number\">1</span> <span class=\"keyword\">or</span> pad &gt; <span class=\"number\">32</span>:</span><br><span class=\"line\">            pad = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> decrypted[:-pad]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Prpcrypt</span>(<span class=\"params\"><span class=\"built_in\">object</span></span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;提供接收和推送给企业微信消息的加解密接口&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, key</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># self.key = base64.b64decode(key+&quot;=&quot;)</span></span><br><span class=\"line\">        self.key = key</span><br><span class=\"line\">        <span class=\"comment\"># 设置加解密模式为AES的CBC模式</span></span><br><span class=\"line\">        self.mode = AES.MODE_CBC</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">encrypt</span>(<span class=\"params\">self, text, receiveid</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;对明文进行加密</span></span><br><span class=\"line\"><span class=\"string\">        @param text: 需要加密的明文</span></span><br><span class=\"line\"><span class=\"string\">        @return: 加密得到的字符串</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"comment\"># 16位随机字符串添加到明文开头</span></span><br><span class=\"line\">        text = self.get_random_str() + struct.pack(<span class=\"string\">&quot;I&quot;</span>, socket.htonl(<span class=\"built_in\">len</span>(text))) + text + receiveid</span><br><span class=\"line\">        <span class=\"comment\"># 使用自定义的填充方式对明文进行补位填充</span></span><br><span class=\"line\">        pkcs7 = PKCS7Encoder()</span><br><span class=\"line\">        text = pkcs7.encode(text)</span><br><span class=\"line\">        <span class=\"comment\"># 加密</span></span><br><span class=\"line\">        cryptor = AES.new(self.key, self.mode, self.key[:<span class=\"number\">16</span>])</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            ciphertext = cryptor.encrypt(text)</span><br><span class=\"line\">            <span class=\"comment\"># 使用BASE64对加密后的字符串进行编码</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_OK, base64.b64encode(ciphertext)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(e)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_EncryptAES_Error, <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">decrypt</span>(<span class=\"params\">self, text, receiveid</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;对解密后的明文进行补位删除</span></span><br><span class=\"line\"><span class=\"string\">        @param text: 密文</span></span><br><span class=\"line\"><span class=\"string\">        @return: 删除填充补位后的明文</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            cryptor = AES.new(self.key, self.mode, self.key[:<span class=\"number\">16</span>])</span><br><span class=\"line\">            <span class=\"comment\"># 使用BASE64对密文进行解码，然后AES-CBC解密</span></span><br><span class=\"line\">            plain_text = cryptor.decrypt(base64.b64decode(text))</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(e)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_DecryptAES_Error, <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"comment\"># pad = ord(plain_text[-1])</span></span><br><span class=\"line\">            pad = plain_text[-<span class=\"number\">1</span>]</span><br><span class=\"line\">            <span class=\"comment\"># 去掉补位字符串</span></span><br><span class=\"line\">            <span class=\"comment\"># pkcs7 = PKCS7Encoder()</span></span><br><span class=\"line\">            <span class=\"comment\"># plain_text = pkcs7.encode(plain_text)</span></span><br><span class=\"line\">            <span class=\"comment\"># 去除16位随机字符串</span></span><br><span class=\"line\">            content = plain_text[<span class=\"number\">16</span>:-pad]</span><br><span class=\"line\">            json_len = socket.ntohl(struct.unpack(<span class=\"string\">&quot;I&quot;</span>, content[: <span class=\"number\">4</span>])[<span class=\"number\">0</span>])</span><br><span class=\"line\">            json_content = content[<span class=\"number\">4</span>: json_len+<span class=\"number\">4</span>]</span><br><span class=\"line\">            from_receiveid = content[json_len+<span class=\"number\">4</span>:].decode(<span class=\"string\">&quot;utf8&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(e)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_IllegalBuffer, <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> from_receiveid != receiveid:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&quot;receiveid not match&quot;</span>)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(from_receiveid)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_ValidateCorpid_Error, <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>, json_content</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_random_str</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot; 随机生成16位字符串</span></span><br><span class=\"line\"><span class=\"string\">        @return: 16位字符串</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        rule = string.letters + string.digits</span><br><span class=\"line\">        <span class=\"built_in\">str</span> = random.sample(rule, <span class=\"number\">16</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;&quot;</span>.join(<span class=\"built_in\">str</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WXBizMsgCrypt</span>(<span class=\"params\"><span class=\"built_in\">object</span></span>):</span></span><br><span class=\"line\">    <span class=\"comment\"># 构造函数</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self,sToken,sEncodingAESKey,sReceiveId</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            self.key = base64.b64decode(sEncodingAESKey+<span class=\"string\">&quot;=&quot;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">assert</span> <span class=\"built_in\">len</span>(self.key) == <span class=\"number\">32</span></span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            throw_exception(<span class=\"string\">&quot;[error]: EncodingAESKey unvalid !&quot;</span>, FormatException)</span><br><span class=\"line\">            <span class=\"comment\"># return ierror.WXBizMsgCrypt_IllegalAesKey,None</span></span><br><span class=\"line\">        self.m_sToken = sToken</span><br><span class=\"line\">        self.m_sReceiveId = sReceiveId</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 验证URL</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sMsgSignature: 签名串，对应URL参数的msg_signature</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sTimeStamp: 时间戳，对应URL参数的timestamp</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sNonce: 随机串，对应URL参数的nonce</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sEchoStr: 随机串，对应URL参数的echostr</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sReplyEchoStr: 解密之后的echostr，当return返回0时有效</span></span><br><span class=\"line\">        <span class=\"comment\"># @return：成功0，失败返回对应的错误码</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">VerifyURL</span>(<span class=\"params\">self, sMsgSignature, sTimeStamp, sNonce, sEchoStr</span>):</span></span><br><span class=\"line\">        sha1 = SHA1()</span><br><span class=\"line\">        ret,signature = sha1.getSHA1(self.m_sToken, sTimeStamp, sNonce, sEchoStr)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ret != <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ret, <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> signature == sMsgSignature:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_ValidateSignature_Error, <span class=\"literal\">None</span></span><br><span class=\"line\">        pc = Prpcrypt(self.key)</span><br><span class=\"line\">        ret,sReplyEchoStr = pc.decrypt(sEchoStr,self.m_sReceiveId)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret,sReplyEchoStr</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">EncryptMsg</span>(<span class=\"params\">self, sReplyMsg, sNonce, timestamp=<span class=\"literal\">None</span></span>):</span></span><br><span class=\"line\">        <span class=\"comment\"># 将企业回复用户的消息加密打包</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sReplyMsg: 企业号待回复用户的消息，xml格式的字符串</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sTimeStamp: 时间戳，可以自己生成，也可以用URL参数的timestamp,如为None则自动用当前时间</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sNonce: 随机串，可以自己生成，也可以用URL参数的nonce</span></span><br><span class=\"line\">        <span class=\"comment\"># sEncryptMsg: 加密后的可以直接回复用户的密文，包括msg_signature, timestamp, nonce, encrypt的xml格式的字符串,</span></span><br><span class=\"line\">        <span class=\"comment\"># return：成功0，sEncryptMsg,失败返回对应的错误码None</span></span><br><span class=\"line\">        pc = Prpcrypt(self.key)</span><br><span class=\"line\">        ret,encrypt = pc.encrypt(sReplyMsg, self.m_sReceiveId)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ret != <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ret,<span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> timestamp <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            timestamp = <span class=\"built_in\">str</span>(<span class=\"built_in\">int</span>(time.time()))</span><br><span class=\"line\">        <span class=\"comment\"># 生成安全签名</span></span><br><span class=\"line\">        sha1 = SHA1()</span><br><span class=\"line\">        ret,signature = sha1.getSHA1(self.m_sToken, timestamp, sNonce, encrypt)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ret != <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ret,<span class=\"literal\">None</span></span><br><span class=\"line\">        xmlParse = XMLParse()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret,xmlParse.generate(encrypt, signature, timestamp, sNonce)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">DecryptMsg</span>(<span class=\"params\">self, sPostData, sMsgSignature, sTimeStamp, sNonce</span>):</span></span><br><span class=\"line\">        <span class=\"comment\"># 检验消息的真实性，并且获取解密后的明文</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sMsgSignature: 签名串，对应URL参数的msg_signature</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sTimeStamp: 时间戳，对应URL参数的timestamp</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sNonce: 随机串，对应URL参数的nonce</span></span><br><span class=\"line\">        <span class=\"comment\"># @param sPostData: 密文，对应POST请求的数据</span></span><br><span class=\"line\">        <span class=\"comment\">#  xml_content: 解密后的原文，当return返回0时有效</span></span><br><span class=\"line\">        <span class=\"comment\"># @return: 成功0，失败返回对应的错误码</span></span><br><span class=\"line\">        <span class=\"comment\"># 验证安全签名</span></span><br><span class=\"line\">        xmlParse = XMLParse()</span><br><span class=\"line\">        ret, encrypt = xmlParse.extract(sPostData)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ret != <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ret, <span class=\"literal\">None</span></span><br><span class=\"line\">        sha1 = SHA1()</span><br><span class=\"line\">        ret,signature = sha1.getSHA1(self.m_sToken, sTimeStamp, sNonce, encrypt)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ret != <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ret, <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> signature == sMsgSignature:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ierror.WXBizMsgCrypt_ValidateSignature_Error, <span class=\"literal\">None</span></span><br><span class=\"line\">        pc = Prpcrypt(self.key)</span><br><span class=\"line\">        ret, xml_content = pc.decrypt(encrypt,self.m_sReceiveId)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret, xml_content</span><br></pre></td></tr></table></figure>\n<br>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">from</span> configparser <span class=\"keyword\">import</span> ConfigParser</span><br><span class=\"line\"><span class=\"keyword\">from</span> WXBizMsgCrypt <span class=\"keyword\">import</span> WXBizMsgCrypt</span><br><span class=\"line\"><span class=\"keyword\">import</span> xml.etree.cElementTree <span class=\"keyword\">as</span> ET</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeChatMsg</span>():</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, host=<span class=\"string\">&#x27;0.0.0.0&#x27;</span>, port=<span class=\"number\">8000</span></span>):</span></span><br><span class=\"line\">        config = ConfigParser()</span><br><span class=\"line\">        config.read(<span class=\"string\">&#x27;config.py&#x27;</span>, encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">        <span class=\"comment\"># 定义服务器监听地址和端口</span></span><br><span class=\"line\">        self.host = host</span><br><span class=\"line\">        self.port = port</span><br><span class=\"line\">        <span class=\"comment\">#</span></span><br><span class=\"line\">        self.sCorpID = config[<span class=\"string\">&#x27;common&#x27;</span>][<span class=\"string\">&#x27;corpid&#x27;</span>]</span><br><span class=\"line\">        self.agent_secret = config[<span class=\"string\">&#x27;appconfig&#x27;</span>][<span class=\"string\">&#x27;secret&#x27;</span>]</span><br><span class=\"line\">        self.agent_id = config[<span class=\"string\">&#x27;appconfig&#x27;</span>][<span class=\"string\">&#x27;agentid&#x27;</span>]</span><br><span class=\"line\">        self.userid = config[<span class=\"string\">&#x27;appconfig&#x27;</span>][<span class=\"string\">&#x27;userid&#x27;</span>]</span><br><span class=\"line\">        self.partid = config[<span class=\"string\">&#x27;appconfig&#x27;</span>][<span class=\"string\">&#x27;partid&#x27;</span>]</span><br><span class=\"line\">        self.get_access_token_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;get_access_token_url&#x27;</span>]</span><br><span class=\"line\">        self.send_msg_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;send_msg_url&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 转发接收消息的应用信息配置</span></span><br><span class=\"line\">        self.sToken = config[<span class=\"string\">&#x27;recmsg&#x27;</span>][<span class=\"string\">&#x27;Token&#x27;</span>]</span><br><span class=\"line\">        self.sEncodingAESKey = config[<span class=\"string\">&#x27;recmsg&#x27;</span>][<span class=\"string\">&#x27;EncodingAESKey&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 获取access_token</span></span><br><span class=\"line\">        self.access_token = json.loads(requests.get(self.get_access_token_url.<span class=\"built_in\">format</span>(self.sCorpID,self.agent_secret)).content)[<span class=\"string\">&#x27;access_token&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_send_text_msg</span>(<span class=\"params\">self, content, userid</span>):</span></span><br><span class=\"line\">        data = &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;touser&quot;</span>: userid,</span><br><span class=\"line\">            <span class=\"string\">&quot;toparty&quot;</span>: (<span class=\"string\">&#x27;|&#x27;</span>).join(self.partid.split(<span class=\"string\">&#x27;,&#x27;</span>)),</span><br><span class=\"line\">            <span class=\"comment\"># &quot;toparty&quot;:int(self.partid),</span></span><br><span class=\"line\">            <span class=\"string\">&quot;msgtype&quot;</span>: <span class=\"string\">&quot;text&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;agentid&quot;</span>: self.agent_id,</span><br><span class=\"line\">            <span class=\"string\">&quot;text&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;content&quot;</span>: content</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"string\">&quot;safe&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        response = requests.post(self.send_msg_url.<span class=\"built_in\">format</span>(self.access_token), json.dumps(data))</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(response.text)</span><br><span class=\"line\">        result_msg = json.loads(response.content)[<span class=\"string\">&#x27;errmsg&#x27;</span>]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result_msg</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">server_run</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span>, methods=[<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\">            wxcpt = WXBizMsgCrypt(self.sToken, self.sEncodingAESKey, self.sCorpID)</span><br><span class=\"line\">            <span class=\"comment\"># 获取url验证时微信发送的相关参数</span></span><br><span class=\"line\">            sVerifyMsgSig = request.args.get(<span class=\"string\">&#x27;msg_signature&#x27;</span>)</span><br><span class=\"line\">            sVerifyTimeStamp = request.args.get(<span class=\"string\">&#x27;timestamp&#x27;</span>)</span><br><span class=\"line\">            sVerifyNonce = request.args.get(<span class=\"string\">&#x27;nonce&#x27;</span>)</span><br><span class=\"line\">            sVerifyEchoStr = request.args.get(<span class=\"string\">&#x27;echostr&#x27;</span>)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(sVerifyMsgSig, sVerifyTimeStamp, sVerifyNonce, sVerifyEchoStr)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 验证url</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> request.method == <span class=\"string\">&#x27;GET&#x27;</span>:</span><br><span class=\"line\">                ret, sEchoStr = wxcpt.VerifyURL(sVerifyMsgSig, sVerifyTimeStamp, sVerifyNonce, sVerifyEchoStr)</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(ret))</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(sEchoStr))</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (ret != <span class=\"number\">0</span>):</span><br><span class=\"line\">                    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;ERR: VerifyURL ret:&quot;</span> + <span class=\"built_in\">str</span>(ret))</span><br><span class=\"line\">                    sys.exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> sEchoStr</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 接收客户端消息</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> request.method == <span class=\"string\">&#x27;POST&#x27;</span>:</span><br><span class=\"line\">                sReqMsgSig = sVerifyMsgSig</span><br><span class=\"line\">                sReqTimeStamp = sVerifyTimeStamp</span><br><span class=\"line\">                sReqNonce = sVerifyNonce</span><br><span class=\"line\">                sReqData = request.data</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;sReqData=&#x27;</span>, sReqData, <span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">                ret, sMsg = wxcpt.DecryptMsg(sReqData, sReqMsgSig, sReqTimeStamp, sReqNonce)</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(ret, sMsg, <span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (ret != <span class=\"number\">0</span>):</span><br><span class=\"line\">                    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;ERR: DecryptMsg ret: &quot;</span> + <span class=\"built_in\">str</span>(ret))</span><br><span class=\"line\">                    sys.exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"comment\"># 解析发送的内容并打印</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(sMsg))</span><br><span class=\"line\">                string = <span class=\"built_in\">str</span>(sMsg,<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(string)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\"># 转成字符串索引分片</span></span><br><span class=\"line\">                <span class=\"comment\"># i = string.index(&#x27;&lt;Content&gt;&#x27;)</span></span><br><span class=\"line\">                <span class=\"comment\"># j = string.index(r&#x27;&lt;/Content&gt;&#x27;)</span></span><br><span class=\"line\">                <span class=\"comment\"># print(i, j)</span></span><br><span class=\"line\">                <span class=\"comment\"># print(&quot;收到消息：&quot;, string[i+18:j-3])</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\"># 解析XML</span></span><br><span class=\"line\">                root = ET.fromstring(string)    <span class=\"comment\"># 调用fromstring(), 直接返回解析树的根元素</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> child <span class=\"keyword\">in</span> root:</span><br><span class=\"line\">                    <span class=\"comment\"># 第二层节点的标签名称和属性</span></span><br><span class=\"line\">                    <span class=\"built_in\">print</span>(child.tag,<span class=\"string\">&quot;:&quot;</span>, child.text)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\"># 索引获取</span></span><br><span class=\"line\">                <span class=\"comment\"># print(root.tag, &quot;:&quot;, root.attrib)</span></span><br><span class=\"line\">                <span class=\"comment\"># print(&#x27;收到消息：&#x27;, root[4].text)</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\"># 直接查找</span></span><br><span class=\"line\">                content = root.find(<span class=\"string\">&quot;Content&quot;</span>).text</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;\\n收到消息：&#x27;</span>, content)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\"># xml_tree = ET.fromstring(sMsg)</span></span><br><span class=\"line\">                <span class=\"comment\"># print(&#x27;xml_tree is &#x27;, xml_tree)</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\"># 自动回复相同消息给客户端</span></span><br><span class=\"line\">                access_token = json.loads(requests.get(self.get_access_token_url.<span class=\"built_in\">format</span>(self.sCorpID, self.agent_secret)).content)[<span class=\"string\">&#x27;access_token&#x27;</span>]</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(access_token)</span><br><span class=\"line\"></span><br><span class=\"line\">                userid = root.find(<span class=\"string\">&quot;FromUserName&quot;</span>).text</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(userid)</span><br><span class=\"line\">                result = self._send_text_msg(content, userid)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    wechatserver = WeChatMsg()</span><br><span class=\"line\">    wechatserver.server_run()</span><br></pre></td></tr></table></figure>\n<br>\n\n<ol start=\"3\">\n<li>对通讯录进行增删改查</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request, jsonify</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">from</span> configparser <span class=\"keyword\">import</span> ConfigParser</span><br><span class=\"line\"><span class=\"keyword\">from</span> WXBizMsgCrypt <span class=\"keyword\">import</span> WXBizMsgCrypt</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeChattxl</span>():</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, host=<span class=\"string\">&#x27;0.0.0.0&#x27;</span>, port=<span class=\"number\">8000</span></span>):</span></span><br><span class=\"line\">        config = ConfigParser()</span><br><span class=\"line\">        config.read(<span class=\"string\">&#x27;config.py&#x27;</span>, encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">        <span class=\"comment\"># 定义服务器监听地址和端口</span></span><br><span class=\"line\">        self.host = host</span><br><span class=\"line\">        self.port = port</span><br><span class=\"line\">        <span class=\"comment\">#</span></span><br><span class=\"line\">        self.sCorpID = config[<span class=\"string\">&#x27;common&#x27;</span>][<span class=\"string\">&#x27;corpid&#x27;</span>]</span><br><span class=\"line\">        self.partid = config[<span class=\"string\">&#x27;appconfig&#x27;</span>][<span class=\"string\">&#x27;partid&#x27;</span>]</span><br><span class=\"line\">        self.txlsecret = config[<span class=\"string\">&#x27;appconfig&#x27;</span>][<span class=\"string\">&#x27;txlsecret&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">        self.get_access_token_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;get_access_token_url&#x27;</span>]</span><br><span class=\"line\">        self.user_simplelist_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;user_simplelist_url&#x27;</span>]</span><br><span class=\"line\">        self.user_list_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;user_list_url&#x27;</span>]</span><br><span class=\"line\">        self.get_user_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;get_user_url&#x27;</span>]</span><br><span class=\"line\">        self.create_user_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;create_user_url&#x27;</span>]</span><br><span class=\"line\">        self.update_user_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;update_user_url&#x27;</span>]</span><br><span class=\"line\">        self.delete_user_url = config[<span class=\"string\">&#x27;urlconfig&#x27;</span>][<span class=\"string\">&#x27;delete_user_url&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 应用信息配置</span></span><br><span class=\"line\">        self.sToken = config[<span class=\"string\">&#x27;recmsg&#x27;</span>][<span class=\"string\">&#x27;Token&#x27;</span>]</span><br><span class=\"line\">        self.sEncodingAESKey = config[<span class=\"string\">&#x27;recmsg&#x27;</span>][<span class=\"string\">&#x27;EncodingAESKey&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 获取access_token</span></span><br><span class=\"line\">        self.access_token = json.loads(requests.get(self.get_access_token_url.<span class=\"built_in\">format</span>(self.sCorpID,self.txlsecret)).content)[<span class=\"string\">&#x27;access_token&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">server_run</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span>, methods=[<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\">            wxcpt = WXBizMsgCrypt(self.sToken, self.sEncodingAESKey, self.sCorpID)</span><br><span class=\"line\">            <span class=\"comment\"># 获取url验证时微信发送的相关参数</span></span><br><span class=\"line\">            sVerifyMsgSig = request.args.get(<span class=\"string\">&#x27;msg_signature&#x27;</span>)</span><br><span class=\"line\">            sVerifyTimeStamp = request.args.get(<span class=\"string\">&#x27;timestamp&#x27;</span>)</span><br><span class=\"line\">            sVerifyNonce = request.args.get(<span class=\"string\">&#x27;nonce&#x27;</span>)</span><br><span class=\"line\">            sVerifyEchoStr = request.args.get(<span class=\"string\">&#x27;echostr&#x27;</span>)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(sVerifyMsgSig, sVerifyTimeStamp, sVerifyNonce, sVerifyEchoStr)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 验证url</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> request.method == <span class=\"string\">&#x27;GET&#x27;</span>:</span><br><span class=\"line\">                ret, sEchoStr = wxcpt.VerifyURL(sVerifyMsgSig, sVerifyTimeStamp, sVerifyNonce, sVerifyEchoStr)</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(ret))</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(sEchoStr))</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (ret != <span class=\"number\">0</span>):</span><br><span class=\"line\">                    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;ERR: VerifyURL ret:&quot;</span> + <span class=\"built_in\">str</span>(ret))</span><br><span class=\"line\">                    sys.exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> sEchoStr</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># if request.method == &#x27;POST&#x27;:</span></span><br><span class=\"line\">                <span class=\"comment\"># return &#x27;success&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        获取成员列表  127.0.0.1:8000/user  get</span></span><br><span class=\"line\"><span class=\"string\">        成员详细信息  /users  get</span></span><br><span class=\"line\"><span class=\"string\">        创建成员     /create post</span></span><br><span class=\"line\"><span class=\"string\">        &#123;</span></span><br><span class=\"line\"><span class=\"string\">            &quot;userid&quot;: userid,  #必填</span></span><br><span class=\"line\"><span class=\"string\">            &quot;name&quot;: name,  #必填</span></span><br><span class=\"line\"><span class=\"string\">            &quot;mobile&quot;: mobile,  #选填，使用默认值</span></span><br><span class=\"line\"><span class=\"string\">            &quot;email&quot;: email,  #选填，使用默认值</span></span><br><span class=\"line\"><span class=\"string\">            &quot;position&quot;: position,  #选填，使用默认值</span></span><br><span class=\"line\"><span class=\"string\">            &quot;department&quot;: self.partid  #不填</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">        读取成员  /get?id=[userid]  get</span></span><br><span class=\"line\"><span class=\"string\">        更新成员  /update  post</span></span><br><span class=\"line\"><span class=\"string\">        &#123;</span></span><br><span class=\"line\"><span class=\"string\">            &quot;userid&quot;: userid,  #必填</span></span><br><span class=\"line\"><span class=\"string\">            &quot;name&quot;: name,  #选填</span></span><br><span class=\"line\"><span class=\"string\">            &quot;mobile&quot;: mobile,  #选填</span></span><br><span class=\"line\"><span class=\"string\">            &quot;email&quot;: email,  #选填</span></span><br><span class=\"line\"><span class=\"string\">            &quot;position&quot;: position,  #选填</span></span><br><span class=\"line\"><span class=\"string\">            &quot;department&quot;: self.partid  #不填</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">        删除成员  /delete?id=[userid]  get</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/user&#x27;</span>, methods=[<span class=\"string\">&#x27;get&#x27;</span>]</span>)    </span><span class=\"comment\"># 获取成员列表</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">user</span>():</span></span><br><span class=\"line\">            url = self.user_simplelist_url.<span class=\"built_in\">format</span>(self.access_token, self.partid)</span><br><span class=\"line\">            r = requests.get(url)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> jsonify(data=r.json())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/users&#x27;</span>, methods=[<span class=\"string\">&#x27;get&#x27;</span>]</span>)    </span><span class=\"comment\"># 获取成员详细信息</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">users</span>():</span></span><br><span class=\"line\">            url = self.user_list_url.<span class=\"built_in\">format</span>(self.access_token, self.partid)</span><br><span class=\"line\">            r = requests.get(url)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> jsonify(data=r.json())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/create&#x27;</span>, methods=[<span class=\"string\">&#x27;post&#x27;</span>]</span>)    </span><span class=\"comment\"># 创建成员</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">create</span>():</span></span><br><span class=\"line\">            data = request.get_json()</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\">            userid = data.get(<span class=\"string\">&#x27;userid&#x27;</span>)    <span class=\"comment\"># 必须，方便数据的录入，使用两位数字</span></span><br><span class=\"line\">            name = data.get(<span class=\"string\">&#x27;name&#x27;</span>)    <span class=\"comment\"># 必须</span></span><br><span class=\"line\"></span><br><span class=\"line\">            mobile = data.get(<span class=\"string\">&#x27;mobile&#x27;</span>)    <span class=\"comment\"># 可选</span></span><br><span class=\"line\">            email = data.get(<span class=\"string\">&#x27;email&#x27;</span>)    <span class=\"comment\"># 可选</span></span><br><span class=\"line\">            position = data.get(<span class=\"string\">&#x27;position&#x27;</span>)    <span class=\"comment\"># 可选</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> mobile <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">                mobile = <span class=\"string\">&#x27;185000000&#x27;</span>+userid    <span class=\"comment\"># 方便录入，用userid直接拼接成手机号</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> email <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">                email = userid+<span class=\"string\">&#x27;@ianna.com&#x27;</span>    <span class=\"comment\"># 方便录入，邮箱也用userid拼接而成</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> position <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">                position = <span class=\"string\">&#x27;Worker&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"built_in\">print</span>(mobile, email, position)</span><br><span class=\"line\"></span><br><span class=\"line\">            data = &#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;userid&quot;</span>: userid,</span><br><span class=\"line\">                <span class=\"string\">&quot;name&quot;</span>: name,</span><br><span class=\"line\">                <span class=\"string\">&quot;mobile&quot;</span>: mobile,</span><br><span class=\"line\">                <span class=\"string\">&quot;email&quot;</span>: email,</span><br><span class=\"line\">                <span class=\"string\">&quot;position&quot;</span>: position,</span><br><span class=\"line\">                <span class=\"string\">&quot;department&quot;</span>: self.partid</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\">            r = requests.post(self.create_user_url.<span class=\"built_in\">format</span>(self.access_token), json.dumps(data))</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(r.text)</span><br><span class=\"line\">            result_msg = json.loads(r.content)[<span class=\"string\">&#x27;errmsg&#x27;</span>]</span><br><span class=\"line\">            <span class=\"keyword\">return</span> result_msg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/get&#x27;</span>, methods=[<span class=\"string\">&#x27;get&#x27;</span>]</span>)    </span><span class=\"comment\"># 读取成员</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get</span>():</span></span><br><span class=\"line\">            userid = request.args.get(<span class=\"string\">&#x27;id&#x27;</span>)</span><br><span class=\"line\">            url = self.get_user_url.<span class=\"built_in\">format</span>(self.access_token, userid)</span><br><span class=\"line\">            r = requests.get(url)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> jsonify(data=r.json())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/update&#x27;</span>, methods=[<span class=\"string\">&#x27;post&#x27;</span>]</span>)    </span><span class=\"comment\"># 更新成员</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span>():</span></span><br><span class=\"line\">            <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">            data = &#123;</span></span><br><span class=\"line\"><span class=\"string\">                &quot;userid&quot;: userid,</span></span><br><span class=\"line\"><span class=\"string\">                &quot;name&quot;: name,</span></span><br><span class=\"line\"><span class=\"string\">                &quot;mobile&quot;: mobile,</span></span><br><span class=\"line\"><span class=\"string\">                &quot;email&quot;: email,</span></span><br><span class=\"line\"><span class=\"string\">                &quot;position&quot;: position,</span></span><br><span class=\"line\"><span class=\"string\">                &quot;department&quot;: self.partid</span></span><br><span class=\"line\"><span class=\"string\">            &#125;</span></span><br><span class=\"line\"><span class=\"string\">            &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            data = request.get_json()</span><br><span class=\"line\">            data.update(&#123;<span class=\"string\">&quot;department&quot;</span>: self.partid&#125;)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\">            r = requests.post(self.update_user_url.<span class=\"built_in\">format</span>(self.access_token), json.dumps(data))</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(r.text)</span><br><span class=\"line\">            result_msg = json.loads(r.content)[<span class=\"string\">&#x27;errmsg&#x27;</span>]</span><br><span class=\"line\">            <span class=\"keyword\">return</span> result_msg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">        @app.route(<span class=\"params\"><span class=\"string\">&#x27;/delete&#x27;</span>, methods=[<span class=\"string\">&#x27;get&#x27;</span>]</span>)    </span><span class=\"comment\"># 删除成员</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span>():</span></span><br><span class=\"line\">            userid = request.args.get(<span class=\"string\">&#x27;id&#x27;</span>)</span><br><span class=\"line\">            url = self.delete_user_url.<span class=\"built_in\">format</span>(self.access_token, userid)</span><br><span class=\"line\">            r = requests.get(url)</span><br><span class=\"line\">            result_msg = json.loads(r.content)[<span class=\"string\">&#x27;errmsg&#x27;</span>]</span><br><span class=\"line\">            <span class=\"keyword\">return</span> result_msg</span><br><span class=\"line\"></span><br><span class=\"line\">        app.run(host=self.host, port=self.port, debug=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    wechatserver = WeChattxl()</span><br><span class=\"line\">    wechatserver.server_run()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><br><br></p>\n","categories":["编程"],"tags":["Python","Web","Flask","http","企业微信"]},{"title":"人生如梦","url":"https://blog.ykqmain.com/sanguo/","content":"<p>写下这个题目后，有太多话想要倾诉，却不知从何时何处开始，一时失言，脑中空白。</p>\n<p>引用一句诗词来开篇，</p>\n<blockquote>\n<p>大江东去，浪淘尽，千古风流人物。</p>\n</blockquote>\n<p>人生的记录这个东西，是需要一定的契机、激情以及充足的时间的，既能让自己身心稍微愉悦，也能对自己的过去有个记录。不得不提文字的力量是非常强大的，也是人类最伟大的发明之一，它能超越时空，让两个不同时空的人，见字如面，犹如高山流水遇知音，相互交流。</p>\n<p>到现在才谈及这个话题，倒是令我自己有点惊讶，毕竟要问我最感兴趣的方面，「中国古代史」是唯一的答案，没有之一。</p>\n<p>具体来说，就是从 <strong>西周到南宋</strong> (公元前1046～1279年) 的这一段时间，“兴趣之最”当属 <strong>春秋战国</strong> (前770年～前221年)、<strong>三国时期</strong> (广义的，184年～280年) 以及 <strong>唐宋</strong> (618年～907年)(960年～1279年)。</p>\n<br>\n\n<hr>\n<br>\n\n<p>简单地记录一下，我与中国古代史的一些历程。</p>\n<p>对历史兴趣的萌芽，自然是记不清的，小时候不仅仅是爱看动画、漫画，电视剧。还有很多父亲在寒假时期，饭后、睡前跟我讲得那些民间故事，比如三国演义、西游记、封神演义，以及一些说不出朝代的寓言、童话、志怪故事等桥段，百听不厌。</p>\n<p>真正对历史兴趣的形成，可以很确定地说是<strong>初中七年级</strong>。而打开我历史大门的则是<strong>汉武帝</strong>。是这个历史人物，让我废寝忘食地畅游在历史的长河中，就像打开了一个山洞中的宝藏之门，展现在我眼前的是数不尽的无价之宝。</p>\n<p>从“汉武帝罢黜百家，独尊儒术”，我的目光被儒家牵引，追溯到<strong>春秋战国</strong>，想去了解<strong>原始的</strong>儒家。一个长达500年的社会巨变时期，其中的政治、军事、思想、文化等极其繁荣，在文章这里就不展开了。要说春秋战国最吸引我的，还是它的思想和文学，也就是 <strong>「诸子百家」和 “文学历史”</strong>，文史方面，比如《诗经》、《楚辞》(西汉刘向编)、《春秋左传》，以及思想性和文学性皆备的诸子散文；思想方面，无疑是奠定了中华文化的「诸子百家」，关于诸子百家的一些想法，我在之前的《观「诸子」有感》中有些许记录。</p>\n<p>而对于<strong>唐宋</strong>的向往，则是那顶礼膜拜<strong>文化和才情</strong>。<strong>唐宋的文化成就</strong>是不需要做过多解释的，特别是<strong>文学</strong>，那一篇篇诗文经典从古至今，引起了无数人的共鸣，陪伴他们消极失意，也陪他们潇洒旷达。对古代历史有兴趣的，古代文学也绕不过的。在以后的时间里，我肯定会记录下来我与诗文的那些故事，这又是一个庞大而又耗时的工程，不知几时再来一个“契机”。</p>\n<p>总的来说，我喜欢的，<strong>是春秋战国的思想哲学，是唐宋的诗词歌赋。对于三国，情感是复杂、且随年龄变化的。</strong></p>\n<p>这篇文章的主要话题，还是那个无数人都谈过、都讲过的、都懂得一点的「三国」。我并不是大师，没什么有价值的学术见解。我更不是<strong>某一个人</strong>的粉丝，捧这个，踩那个，我崇敬那个时代的每一位英雄志士，感概他们所谱写的悲壮史诗。我想写的，仅仅是<strong>我心中的三国</strong>罢了。</p>\n<br>\n\n<hr>\n<br>\n\n<blockquote>\n<p>青史一页会记得，你们都是强者。</p>\n</blockquote>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/zgyy.png\"></p>\n<p>🎵 一捧江山在掌握 - 张佳<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/js.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>最近因为一个契机，稍稍回忆了一下三国。我对于三国的认知，也不外乎那些常见的“书影游”，以及网上的只言片语罢了。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/sgz1.jpg\"></p>\n<p>太多太多英雄，<strong>孤独地</strong> 追求自己的理想，最后大多难以抵挡历史的潮流。</p>\n<p>孤独的曹操，三国时期（东汉末年）第一人，在「周公吐哺，天下归心。」中抱憾离去；</p>\n<p>孤独的刘备，除了姓刘之外白手起家的英雄，一无所有，起起伏伏，历经磨难，百折不挠，终于称帝，令人向往，中道崩殂，为其遗憾。</p>\n<p>“小时候喜欢刘关张，因为是主角。大一点喜欢吕布赵云马超，因为游戏形象。成熟了之后喜欢曹操诸葛亮，因为知道了能力重要性。现在反而重新敬佩起来了刘关张，<strong>因为经历</strong>。”</p>\n<p>刘备去投刘表的时候已经45岁了。45岁还一事无成，因髀肉复生而惭愧，不甘于人后的倔强，谁又能体会到呢？刘备在见到诸葛亮时47岁，到底是什么在支撑一位<strong>老人</strong>如此不折不挠，想要成就一番事业呢？当孔明六出祁山，屡败屡战，上方谷吐血昏厥、五丈原秋风落泪时，在想什么呢？可能只是三十年前，一个四十多岁的男人走进他的草庐，流泪说着，先生不出，奈苍生何。在看动画版时，印象最深刻的是，夷陵之战的那把大火葬送了「蜀汉」的巅峰，刘备暮雨击鼓时回忆桃园结义的场景，在音乐的刺激下，眼泪止不住的流。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/myjg.png\"></p>\n<p>孤独的孙权，一个无依无靠的外来者，未成年时内忧外困的接过父兄的基业，必须依靠本地世家大族交换权力，他也许在意的只是吴国姓不姓孙。对本地士族的不信任，导致晚年名誉尽毁，冷落张昭、逼死陆逊，又因为“借荆州”的事件对去世的鲁肃三分微词。如果周瑜没有早逝，是否善终还不得而知，青年孙权和老年孙权判若两人。</p>\n<p>荀彧肯定是孤独的，曹魏当之无愧的二号人物，孤独得在理想破灭时，毅然选择了以死明志。荀彧的死是一个迷，但是丝毫不影响我们理解他在死之前内心的痛苦和煎熬。颖川荀氏，名士风骨。大汉忠臣，王佐之才。</p>\n<br>\n\n<p>刘晔应该也是孤独的，汉室宗亲，志存高远。作为谋士，「世之奇士，虽清治德业，殊於荀攸，而筹画所料，是其伦也。」因为各方面原因使得意见一再被无视，后来为了得到君主的认可，对皇帝采取迎合策略。</p>\n<p>奸佞小人盯上了他，“有人向魏明帝进谗构陷刘晔不忠诚，善于揣测上意而有意逢迎，陛下你可以试试刘晔，你真正想说什么，故意正话反说，看看刘晔是不是顺着你的话讲，如果刘晔所言都跟你说的截然相反，就说明刘晔经常在揣测您的心机顺着你的意思说话，如果你说什么刘晔都跟你说的是一样的话 ，那么刘晔曲意逢迎的罪责必定坐实无可辩驳！明帝听信了谗言试了刘晔一波，果然如小人所言刘晔不忠，从此便疏远了刘晔。”</p>\n<p>「晔遂发狂，出为大鸿胪，以忧死。」刘晔得知自己被算计失去了曹叡的信任，受了刺激，于是疯掉，在孤独和绝望中死去。</p>\n<br>\n\n<p>最孤独的，可能还是诸葛亮吧。公元220年，曹操去世，曹丕称帝，真正的三国才正式开始。说夷陵之战的失败，导致了三足鼎立，倒不如说是220年一大批人才凋零，促成了三国鼎立，曹操，关羽，程昱，法正，吕蒙，甘宁，蒋钦等，都是同一年去世的。</p>\n<p>诸葛亮接过了「季汉」的重担，展现了他天才的政治才能，去完成他「明知不可为而为之」的“兴复汉室，还于旧都”。这不是他的愚忠，「明知不可为而为之。」讲的是<strong>做事不问可不可能，但问应不应该。</strong></p>\n<p>即使是诸葛亮，也无法阻挡历史潮流，逆天改命。利用常年北伐，使国家长期处于战争状态，转移内部几股政治势力的矛盾，政治上依法治国，以身作则，但也减少不了战争的巨额费用，最后的效果也只是续命而已，但终究没有愧对大汉二十四代先帝，没有愧对刘备的三顾之恩，最重要的是，没有愧对自己的理想和坚守。</p>\n<p>其实蜀汉的灭亡，在夷陵之战失败时就已经决定了。说夷陵之战之前是蜀汉的巅峰一点都不为过。古代冷兵器时代的战争，拼的是土地粮食和人口。北方土地肥沃，人口众多，当时的中国南方大多是蛮荒之地。中国历史上经历了两次大量人口南迁，直到隋唐，南方的经济才超过北方，所以从理论上来说，只有在唐代之后的时间，中国可以由南向北统一，事实上大明王朝就是由南向北统一，即使就是这样，还被北方的朱棣篡位。</p>\n<p>多猜一点，如果三国时期能够向北统一，只可能是两种情况，<br>其一，是关羽北伐威震华夏之时，孙吴不是偷袭荆州，而是共同北伐，灭掉曹魏。即使是这样，胜负仍未可知。<br>其二，则只能是曹魏祸起萧墙，自身崩溃了。亮哥在《隆中对》(节选自《三国志·蜀书五·诸葛亮传》)也提到了「天下有变」，可以说是战略眼光独到了。<br>再多说一点，夷陵之战后，假如曹丕或曹叡没有早死，曹魏统一天下，也许只是时间问题，没有司马氏什么事了。</p>\n<p><strong>历史没有如果。</strong></p>\n<p>可以想象诸葛丞相在这样一个情势下，鞠躬尽瘁死而后已，最后活活累死，病逝五丈原，是多么的独孤，「出师一表真名世，千载谁堪伯仲间」，难怪心系苍生、胸怀国事的杜甫是诸葛亮的迷弟。</p>\n<p>「看人间，有几番迷离。躲不过，凄风冷雨。」</p>\n<p>听歌的时候想到诸葛亮初出茅庐时，嘱咐童子打理田地，功成归来耕种，瞬间眼中含泪，<strong>潸然泪下。</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/sgml.jpg\"></p>\n<br>\n\n<p>《三国演义》实际上是人们心之所往的集中体现，而罗贯中则是集大成者。</p>\n<p>比如说没有貂蝉，也要塑造一个“貂蝉”。</p>\n<p>貂蝉可以说是由群众创造的，是舍身为国的大义，是乱世的牺牲品，是可怜的女英雄。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/dc.jpg\"></p>\n<blockquote>\n<p>辜负了锦绣年华，<br>错过了豆蔻青春。<br>为报答司徒大义深恩，<br>拼舍这如花似玉身。<br>从今后再不见尔的身影，<br>也再不闻尔的声音。<br>貂蝉已随着那清风去，<br>化作了一片白云。</p>\n<p>——《貂蝉已随清风去》</p>\n</blockquote>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/dc2.jpg\"></p>\n<p>悲剧英雄也，令人惋惜不已。</p>\n<br>\n\n<hr>\n<br>\n\n<p><strong>然而悲剧的不仅仅是英雄，更多的是平凡的人。</strong></p>\n<blockquote>\n<p>白骨露于野，千里无鸡鸣。</p>\n</blockquote>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/jfml.jpg\"></p>\n<p>我在之前的文章中写过，</p>\n<blockquote>\n<p>对于一个人来说最高的荣誉，无疑是“名垂青史，流芳百世”。</p>\n</blockquote>\n<p>但是青史上留名的又有几人呢？大多数人不过是碌碌终身的凡人罢了，99%的人活得很悲哀。</p>\n<blockquote>\n<p>“时岁大饥，人相食。”<br>“天下饥荒，人民相食。”<br>“人民机困，二年间，相啖食略尽。”<br>“五官将知忠尝啖人，因从驾出行，令俳取冢间髑髅系著忠马鞍以为欢笑。”<br>…………</p>\n</blockquote>\n<p>还有比这些更让人痛心的么？</p>\n<p>沉迷于英雄豪情，慷慨悲歌的我们，在三国时期绝大部分人都是那“遗于野”的白骨。</p>\n<p>这里又不得不引出那个千古难题：<strong>人生的意义到底是什么？或者说人生在世到底是为什么而活？</strong></p>\n<p><strong>结合自己的经历不禁感叹。</strong></p>\n<p>太阳底下没有新鲜事。</p>\n<p>「天下熙熙皆为利来，天下攘攘皆为利往。」</p>\n<p>在浩瀚的宇宙和伟大的自然面前，社会的那些残羹冷炙显得如此渺小，但对于个人来说，又是无可奈何。</p>\n<p>对于一个普通人来说，生活的那些琐事，相比于生死离别来说，又显得不值一提。</p>\n<p>死亡是意识的消逝，是物质的解体，是他人的怀恋， 是自我的放逐，是自然的规律，是生态的循环。死亡总有一天会到来，在生命的尽头，你将彻底不再是你，就算有所剩余，其实和你也没有任何关系了。</p>\n<p>当然，确实有超越生死的东西，那就是另一个话题了。</p>\n<p>活着就会有一个个烦恼接踵而至，有人的地方就会有利益，嘴上说得冠冕堂皇，背地里却干了无数见不得人的勾当。</p>\n<p>离开没有自由的地方，然后发现无处可去。仿佛世界上没有一处容身之所，桃花源只在梦中。</p>\n<p>渺小和无力，让目前的我还无法回答「人生的意义到底是什么？」</p>\n<p><strong>万物皆有所待，我仍找不到属于自己的世界。</strong></p>\n<br>\n\n<p><strong>时代需要英雄。</strong></p>\n<p>也可以说《三国演义》满足了中国人的一场美梦，圣君梦的刘备，清官梦的诸葛亮，侠客梦的关羽张飞。</p>\n<p>由自己的经历，以及各种史料、小说笔记，很容易去想象在那样一个时代，底层人民过得是什么样的生活。即使是在现代社会，一个荒谬的“太平盛世”，因言获罪，自古以来。生活中的“个人”显得无可奈何，无处言说。我们急需要一位“刘备”，一位“诸葛亮”，退而求其次，有“关羽张飞”也是欢喜的。而这些也不过是在梦中罢了，是生活、使得三国更添悲凉。曹操是孤独的，诸葛亮是孤独的，很明显，我也是，<strong>每个平凡的人都是</strong>。</p>\n<p><strong>孤独中还透露着无助。</strong></p>\n<p>三国无疑是悲剧，但这个一出出悲剧中，还蕴含着<strong>情义</strong>的光。</p>\n<br>\n\n<hr>\n<br>\n\n<blockquote>\n<p>豪情相依，生死相伴<br>天涯无处，不念桃园<br>三人成众，何惧患难<br>诚心能纵沧桑变幻</p>\n</blockquote>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/ty.jpg\"></p>\n<p>🎵 四季 - 曾黎<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/sj.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>说到情义，没有人不向往“桃园结义”，越是向往的东西，就越是求之不得，可惜“桃园”是公认的空前绝后。</p>\n<p>如果不是桃园结义的情义，刘备暮雨击鼓的悲凉也不会让曾经少年的我至今难忘，直击内心，感同身受，悲痛不已。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/tyjy.jpg\"></p>\n<p>越长大，就越能感到这个金钱社会的利益关系链，无情无义，唯利是图，甚至不惜侵犯别人的权利，昧着良心去做利己之事。人人自危，自己的正当权益都得不到保障，变得只能明哲保身度日。苦中作乐，从头到脚的失望；强颜欢笑，由内而外的心寒。这个局面不是一天造成的，也不是一个人造成的，还是一双双无形的利益之手，一次次偏离选择出来的结果，可惜的是没有英雄能够力挽狂澜。</p>\n<p>在这种对比之下，就更是欣赏三国的<strong>情义和血性</strong>，更是感叹三国的<strong>悲凉和痛心</strong>，更是向往三国的<strong>英雄和美梦</strong>。</p>\n<blockquote>\n<p>曹孟德瞝酒临江横槊赋诗，正欲澄清宇内一匡天下，火烧赤壁了；<br>周公瑾谈笑之间烟卷赤壁，正欲西进巴蜀两分天下，遇疾暴亡了；<br>关云长水淹七军威震华夏，正欲挥师北伐兴复汉室，白衣渡江了；<br>诸葛亮六出祁山火烧司马，正欲克复中原还于旧都，天降大雨了；<br>…………<br>还有“秉忠贞之志，守谦退之节”的荀彧；<br>还有“”大丈夫生于乱世，当带三尺剑，立不世之功”的太史慈；<br>还有“臣等正欲死战，陛下何故先降?”的姜维。<br>…………</p>\n</blockquote>\n<p><strong>梦是要醒的。</strong></p>\n<p>「弹指间，九九归一。」</p>\n<p>三国归晋，这一切，最后都输给岁月。</p>\n<p>任你雄心壮志，任你英雄盖世，任你计谋百出，到头来都是一场空。这就是悲剧，只能看，无能为力。</p>\n<br>\n\n<p>一段三国，就像是一场梦。那些运筹帷握、浴血奋战、倾心托付、蹈死不顾，意义又何在呢?</p>\n<p>人生亦如是。</p>\n<p>人力渺小，事多徒劳，天地茫茫，万事皆空。</p>\n<p><strong>「人生如梦，一尊还酹江月。」</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/sanguo/hanzhong.jpg\"></p>\n<p><br><br></p>\n","categories":["历史"],"tags":["历史","人生","三国","梦"]},{"title":"观「诸子」有感","url":"https://blog.ykqmain.com/zhuzi/","content":"<p>在之前的文章里插了一嘴，</p>\n<blockquote>\n<p>轴心时代的那些先贤们。德国思想家卡尔·雅斯贝尔斯在《历史的起源与目标》一书中第一次把公元前500年前后同时出现在中国、西方和印度等地区的人类文化突破现象称之为“轴心时代”。中国有儒道墨法为主的诸子百家，西方有希腊三贤，苏格拉底，柏拉图，亚里士多德。</p>\n</blockquote>\n<blockquote>\n<p>西方的哲学不太了解，诸子百家过于庞大，在这里不能展开，我也没有那个能力和知识。只说在礼崩乐坏的春秋战国时代，四家对当时社会各抒己见、辩论激烈，孔子说退到周（周监于二代，郁郁乎文哉，吾从周——《论语 八佾》）；墨子说周不行，得退到大禹；孟子再往后退一步，回尧舜；道家说还不行，最好退到太古，无为而无不为；只有法家，与时俱进，顺应时代潮流，用他们的鲜血，将中国送入了新的封建时代。时代的变迁都是鲜血流出来的，“法家”代表一般不得善终。</p>\n</blockquote>\n<blockquote>\n<p>虽然说中华五千年有吹嘘的成分，但是不得不承认中国历史悠久，在我看来，炎黄神话，夏质朴且飘渺，商始有文字但重鬼神，直到周（前1046年）才有文化，这个文化在诸子百家奠基，成熟于汉武帝时董仲舒罢黜百家独尊儒术，所以也叫汉文化。</p>\n</blockquote>\n<blockquote>\n<p>多说一点的是，由于儒家文化对中国人的植根深入，一旦出现了“什么”事，就批孔，到了又有政治需求了，又尊孔。我觉得这对孔子本人极其不公，且不说董仲舒的儒家和程朱理学（继承古代儒学融汇释老的新儒学）与先秦儒家（孔孟荀）天壤地别，光是对这样一位伟大的思想家如此对待，已经是无法形容的愚昧了。况且每个人都有时代的局限性，伟大如亚里士多德也不能摆脱奴隶制的时代局限，作为一个现代人，对某一种思想文化“取其精华，去其糟粕”应该是最基本的思考辨别能力。诸子百家就是一个无尽的宝藏，可惜现代人都不怎么待见，其实他们一本书也不曾翻过，不可能懂得其中的智慧，以及先贤们的孤独。</p>\n</blockquote>\n<blockquote>\n<p>不争也罢。</p>\n</blockquote>\n<p>最近又浏览了《孟子》和《庄子》，我本来是没有能力对「诸子百家」有什么见解的，但还是<strong>忍不住</strong>表达一二，就当是一种宣泄吧。至于是对什么的宣泄，则不重要了。</p>\n<br>\n\n<hr>\n<br>\n\n<p>我始终认为，对于一个人来说最高的荣誉，无疑是「名垂青史」，这即是所谓的“长生不老”之术。将自己的名字和精神刻进一个民族、一个国家，甚至全人类的文明基因中，如同DNA复制一样传承下去，流芳百世。</p>\n<p>早在高中时期我就说过，</p>\n<blockquote>\n<p>我深知前人内心的孤独与苦闷，然而我的内心，也只有由后人去体会了。</p>\n</blockquote>\n<blockquote>\n<p>“所以隐忍苟活，幽于粪土之中而不辞者，恨私心有所不尽，鄙陋没世，而文采不表于后世也。” (司马迁《报任安书》)</p>\n</blockquote>\n<blockquote>\n<p>唯愿留下一部传世之作，让它在未来的某一天被后人欣赏，然后再梦游来天上与孤独的我谈心吧，也不枉此生了。</p>\n</blockquote>\n<p>现在看来，我当然没有太史公的悲惨遭遇，也没有太史公的「历史」使命，更没有太史公的才华横溢。</p>\n<p><strong>对我来说，「传世之作」早已化为了虚无，「风骚」之作亦无能为力，姑且只有零零散散的语句倒是可以留得下来，也算是一丝存在过了的痕迹，作为曾经活在这个世界上的证据。“愿成「一言」，流表后世。” 我也心满意足了。</strong></p>\n<blockquote>\n<p>我有这个地方、也只有这个地方，能够尽情挥洒了。前几天看到一个帖子说，写博客总是觉得之前的写的不完美，喜欢删除。我之前也是那种心态，导致删除了太多宝贵的记忆。无论喜悲，回忆总是极其珍贵的人生“财富”，也许那时候的想法还挺幼稚，甚至未来再看的时候有些尴尬、有些“羞耻”，但它们确实是我人生中真实的一部分，属于我，组成了一个真实的我。以后的博客，我会尽量保存。</p>\n</blockquote>\n<p>写这篇文章，正好也能对我的人生某一方面做一个回忆，以及对二十余岁的我做一个小结。这年头，即使科技如此发达，我们看到的，都是他们想让我们看到的。当朝历史的粉饰，以及对前朝的抹黑，造就了即使真相只有一个，但是往往藏积太深，窥探不得。可以料想得到的是，在未来再看这篇文章稚气遍地，但也不能阻止我，留下一个<strong>属于此时此刻真实的我</strong>。</p>\n<p>本篇的主题是「诸子百家」，当看到这「诸子」这个词时，不得不提对我影响最深的孟子，</p>\n<p>《孟子》，善于辩论，气势磅礴。思想性文学性是先秦诸子散文的两大特征，无疑是一个大宝库。</p>\n<p>随便摘录几句就爱不释手，反复吟诵。</p>\n<p>比如「知言、浩然」两大法宝，大多耳熟能详，不必展开。</p>\n<p>又如「民为贵，社稷次之，君为轻。」以及，「齐宣王曰：“汤放桀，武王伐纣，有诸？”孟子对曰：“于《传》有之。”曰：“臣弑君可乎？”曰：“贼仁者谓之贼，贼义者谓之残。残贼之人，谓之一夫。闻诛一夫纣矣，未闻弑君也。”」 (《孟子·梁惠王下》) 在目前环境下，不能展开，也不便多说。</p>\n<p>再比如孟子的三乐，父母兄弟健在；<strong>仰不愧于天，俯不怍于人</strong>；得英才而教育。</p>\n<p>对我影响最深的还是，「得志与民由之，不得志独行其道。穷则独善其身，达则兼济天下。」</p>\n<p>虽然我最崇拜的人就是孟子，但是我自己本身是一个消极悲观，且“无为”的人，不是因为我本就如此，而是我的能力不足，社会压力、家庭压力、房价压力导致我只能为了衣食住行奔波一生。“独善其身”已经是极限了。毕竟在好人吃亏，遵纪守法都不能保全自己的时代，独善也显得弥足珍贵。</p>\n<p>前不久看完孟子之后，后来正好也翻阅了庄子，「至人无己，神人无功，圣人无名。」儒道释可以说是中国人的三大支柱，也许几乎每个人都是从积极入世，到失望，再到消极出世的吧。</p>\n<p>即使在3000年的历史文化长河中，能数得出名字也没有几个。「天高地迥，觉宇宙之无穷，」放眼宇宙，则更是渺小得毫无痕迹，在浩瀚的宇宙和伟大的自然面前，社会的那些残羹冷炙显得如此不值一提，但对于个人来说，又是无可奈何。</p>\n<p>即使《孟子》对我影响最大，但耳边萦绕而来的，仍然是那句<strong>「学而时习之，不亦说乎？」</strong> …………</p>\n<br>\n\n<hr>\n<br>\n\n\n<h3 id=\"初瞰儒家\"><a href=\"#初瞰儒家\" class=\"headerlink\" title=\"初瞰儒家\"></a>初瞰儒家</h3><p><strong>未完待续……</strong></p>\n<p><br><br></p>\n","categories":["读书"],"tags":["中国","诸子百家","文学","哲学","思想","春秋","战国"]},{"title":"蓝弧动画——十万年轮回","url":"https://blog.ykqmain.com/lanhu/","content":"<p>莫名其妙就高产了，从来没有在这么短时间连写两篇文章，就像我之前写过的「现在‘快餐时代’，Twitter、微博的兴起，几句话，几张图记录生活显得方便快捷，长篇大论显得极其艰难，很难有心思坐下来，长篇大论地写博客。」何况上次写“虹猫蓝兔”，回忆、构思，构建文章结构、逻辑顺序，找美图、音乐、排版，熬到了凌晨1点半，光是回忆，就花了足够的时间，对于一个强迫症来说，每一篇写在博客上文章，必是倾尽全力使其趋于完美，累成狗，但是确实在完成的时候，心情是愉悦的，起码我又在世界上添加了几个微不足道的字，留下了属于我自己的足迹。</p>\n<br>\n\n<hr>\n<br>\n\n<p>对于现实的不满，大多有两种缓解办法，<strong>一是做梦，二是怀古。</strong> 陶渊明辞官，有「归去来兮，田园将芜胡不归」；李白饮酒，有「人生得意须尽欢，莫使金樽空对月」；苏轼泛舟，有「寄蜉蝣于天地，渺沧海之一粟。哀吾生之须臾，羡长江之无穷」。</p>\n<p><em><strong>没有人愿意真的回到过去，对过去的怀念，都是对现在的不满，亦或是是对现实的逃避。</strong></em> 只有面对现实，直视问题，才能有未来。然而这一系列“问题”，是在伤人太深，情不自禁的追忆往日，不得不暂时逃避一会，回到那个美好的记忆里。</p>\n<p>以前的乐趣很多，动画是其中的一大支柱，这里面包含了无数的喜怒哀乐，组成了一个自动屏蔽了伤心回忆的美好虚拟世界。即使是动画也有很多种类，按国家分类有国产，日本，美国和其他，其中国产动画和日本动画无疑是对90后影响最大的。最近对国产动画沉迷其中，前两天回忆了宏梦卡通的《虹猫蓝兔系列》，还有许多国产动画也非常精彩。</p>\n<br>\n\n<hr>\n<br>\n\n<p>打开了QQ音乐随便听，一直人工智障的推荐算法不得我心，可能我这两天一直循环虹猫蓝兔，他终于给我推荐了一个首令我发呆沉思的一首歌。</p>\n<p>🎵 诺言 - 陈洁丽<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/ny.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>世界上美好的东西有限，音乐便是其中之一。人，生来不懂音乐，真的很亏。然而对我而言，可预见到的，他将是我人生的遗憾之一。每一首歌，每一部动画、电影，都伴随着过去人和事的回忆，就像之前我写过的，</p>\n<blockquote>\n<p>期待你的歌声，是为了永恒的铭记。<br>多少年后，因为太多对世界的无奈和不屑，我会忘记一切、除了歌声储存的一切，<br>即使经过岁月的洗礼显得“并不太美好”。</p>\n</blockquote>\n<p>这首歌则是把我拉入了那一段记忆里。他背后承载的是我记忆里两部画风相近，同一家公司制作的两部动画——蓝弧动画的《洛洛历险记》(2009)和《超兽武装》(2011)。这两部动画，都是机甲科幻冒险的高智商动画片。</p>\n<p>《洛洛历险记》有重制版《武战道》</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/ll.jpg\"></p>\n<p>《超兽武装》有两部《仁者无敌》和《勇者无惧》。</p>\n<center class=\"half\">\n    <img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/1.jpg\" width=\"360\"/><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/2.jpg\" width=\"360\"/>\n</center>\n\n<p><strong>先说《洛洛历险记》(2009)，</strong></p>\n<p>洛洛是游戏高手，从现实世界进入到一个“机战王”的虚拟世界里面，机车族和猛兽族是两个对立阵营。设定里，机车族有6个“部族”，猛兽族有3个“部族”，2个机车族合体可以打败一个猛兽族，而且2个合体的机车有区别，能打败的对象也是唯一的。也就是说，其中有一定的“一一对应”的关系。这个设定也导致了，本剧里面最精细的一个谋略。人物的刻画，让小时候的我对猛虎王有一种“曹操”的感觉。</p>\n<p>值得一提的是，动画不是两个阵营的无脑对打，里面有团结机车族的冒险历程，有忠心耿耿且惺惺相惜的反派金铁兽，也有一个黄雀在后的蓝毒兽，与虹猫蓝兔里面的马三娘以及超兽武装里面的鬼王有异曲同工之妙。动画，不应该是低幼的代名词，很多人看到能变形的机甲就讽刺抄袭变形金刚，动画的核心与影视一样，仍然是剧本，是剧情。</p>\n<p>而且蓝弧动画的台词很多都具有一定的哲理性，这在超兽武装里面更是表现得淋漓尽致。</p>\n<br>\n\n<p><strong>再说《超兽武装仁者无敌》(2011)，《超兽武装勇者无惧》(2011)，</strong></p>\n<p>🎵 尘曦 - 陈洁丽<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/cx.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>《超兽武装》是蓝弧动画，以及奥飞动漫共同出品的（奥飞就是那个战龙四驱，雷速登闪电冲线，巴啦啦小魔仙，电击小子，铠甲勇士，火力少年王……的那个公司），这里先不提奥飞，只讲《超兽武装》。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/1.png\"></p>\n<p>由于年代久远，我忘了完整的剧情，我只记得基本的轮廓以及当年看这部剧的感觉。中学看的，每天吃完饭看一集就去上晚自习，如果说虹猫蓝兔是第一国产武侠动画，那么超兽武装就是第一国产剧情动画。如果不完整看完两部动画，是无法理解动画表达的东西的。</p>\n<p>主角穿越于不同的平行宇宙冒险，每一个平行宇宙都有一个动人而发人深思的故事。世界设定里面仍然是两大阵营，雪皇和冥王。</p>\n<center class=\"half\">\n    <img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/mw.png\" width=\"360\"/><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/xh.png\" width=\"360\"/>\n</center>\n\n<p>初看动画，会因为各种表象、外表、名字不自觉地把雪皇认为是正方，冥王是反方。然而大多数富有哲理的台词，都是冥王说出来的。在最后决战的时候，雪皇和冥王僵持不定，第三方鬼王站出来打破了平衡，剧情出现了非常强烈的反转。最后顿悟，这个世界里没有所谓的反派，立场不同，存在着一种<strong>平衡和轮回</strong>的哲学。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/2.png\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/3.png\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/lanhu/4.png\"></p>\n<p>以前看的电视，一般都不太完整，每当看完一部动画的时候，由于自身表达能力不足，文字功力欠缺，总像是憋在脑子里面的气，出不去，但是心里明白。只有亲身去看完这部作品，才能理解明白，豆瓣和知乎也有很多有深度的分析，我才疏学浅就不再展开了。</p>\n<br>\n\n<hr>\n<br>\n\n<p>我始终认为优秀的动画作品，是短小而精悍的，比如以上提到的动画，以及《死亡笔记》、《未闻花名》、《四月是你的谎言》等等。也有反例，节奏拖拉，因赚钱而败坏口碑等等，具体作品就不多说了。商业化，无可厚非，但是我对其已经没了情怀（当然情怀不值钱）</p>\n<p><strong>但是情怀是信仰，多少钱也不换；情怀是由时间塑造且不可逆的，多少钱也换不来。</strong></p>\n<p>对我而言，以前看了一部动画，如果能达到角色扮演的地步，留在心底久久不能释怀，直到现在还记忆深刻且不反感的，那么他就是我的情怀了。</p>\n<p>回味无穷。</p>\n<p><br><br></p>\n","categories":["动画"],"tags":["动画","少年","冒险","科幻","哲理"]},{"title":"虹猫蓝兔——致童年、望归来","url":"https://blog.ykqmain.com/honglan/","content":"<p><strong>【注：】2022年1月博客重启后整理。</strong></p>\n<h3 id=\"2021年04月16日\"><a href=\"#2021年04月16日\" class=\"headerlink\" title=\"2021年04月16日\"></a>2021年04月16日</h3><p>第一部在电影院差点看哭了，因为有小孩真的哭出声，我反倒笑了。没有什么比离别更痛苦，如果有，那就是生死离别。也没有什么比陪伴更感动，如果有，那只能是终生陪伴。</p>\n<p>第二部有点期待，网上已经有资源了，本周末最大的幸福就是这2个小时的时光。每看一部动画电影，就像进入了一个新的时空，体验一段不一样的人生。总要回味良久，或悲伤不能自拔，或热血自我代入。</p>\n<p>有一个值得思考的问题，凭什么静香是幸福的，胖妹就是不幸福的？反过来讲，为什么是野比大雄，而不是出木杉英才？</p>\n<p>每个人都值得尊重，有些设定不能较真，较真则漏洞百出。很多事都不能较真，主角光环只在作品里。</p>\n<p>抛开这些细枝末节，明知是虚无缥缈的，动画世界还是一如既往地令人羡慕和向往，没有现实中那么多的无可奈何。动画里的人物，似乎不用为了衣食住行而担忧，有良辰、有美景，还有最好的伙伴、以及那个不离不弃的她，美好得令人心碎。哪怕有今生的遗憾，甚至还有来世的希望。</p>\n<p>「人生如逆旅，我亦是行人。」我等渺小且孤独的存在着，淹没在历史的长河中。也许唯一能做的只是在失落之时、仰望星空之余，还可以感叹一句，「天高地迥，觉宇宙之无穷；兴尽悲来，识盈虚之有数。」思维小小的驻足之后，还得抓紧时间回到生活。</p>\n<p>每一代人都有一代人的使命，每个角色都有每个角色的责任。我也想做一颗参天大树，为中华民族遮风挡雨、为人民群众保驾护航。然而仅仅是日常就已是应接不暇，任务犹如长江之水连绵不绝，效果可想而知。「九层之台，起于累土。」成长在于积累，可以厚积薄发。工作是忘我的、时光飞逝，回到生活时恍如隔世，却不得不直面昂贵的衣食住行，还有未来的两座大山，一个房子，一个孩子。</p>\n<p>中国的家长都在教育孩子说要优秀，却没有一个教孩子接受普通。中国的书本教出高度理想化的学生，与世隔绝的学校和现实社会形成的巨大鸿沟，在终将踏入社会后造成的心理落差，久久不能释怀。</p>\n<p>怀旧是一种孤独的享受，该过去就让它们过去。孤独是人生常态，静心能有所得。总有那么一个声音在耳边回荡“生命不息，奋斗不止。”一方面需要成长，另一方面也总会有许多“巧合的”阻碍、许多“巧合的”巧合，就像命运的玩笑，不能较真，无可奈何。总要有那些满怀希望和抱负的人，太阳每天依旧要升起。</p>\n<p>小时候想要哆啦A梦，长大后也是。</p>\n<p><br><br></p>\n","categories":["动画"],"tags":["童年","动画","伙伴","回忆","武侠"]},{"title":"虹猫蓝兔——致童年、望归来","url":"https://blog.ykqmain.com/honglan/","content":"<p>好久没有看动画了, 现在的大多数动画，画质倒是能感动哭，却完全没有能提得起兴趣的剧情。由此甚是想念以前老的动画，以及那个时候看动画的感觉。</p>\n<br>\n\n<hr>\n<br>\n\n<p>日常逛了下B站，看到了<a href=\"https://www.bilibili.com/bangumi/media/md5373/\">《虹猫仗剑走天涯》</a>，随手点进去回忆了一下结局。</p>\n<p>看哭了，又想起了初中的那个暑假，以及小鹿姐姐。少儿频道早上会重播前一天晚上的动画，一般是过早回来守着看，几乎一集不落，以至于现在我还能记得许多剧情，这在网络不发达的年代是很难得的。</p>\n<p>曾经因为洗澡错过了CCTV6的《瑶玲啊瑶玲》最后一集，失落了很久，最后不知道怎么才走出来的。</p>\n<p>不得不感叹，<strong>以前的电视真好看。</strong></p>\n<br>\n\n<hr>\n<br>\n\n<p>之后又情不自禁地点开了<a href=\"https://www.bilibili.com/bangumi/media/md5375\">《虹猫蓝兔勇者归来》</a>，直到现在，我才得知，当年的宏梦卡通已经被收购，而勇者归来也没有了后话，原定104集，目前只有52集。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/0.png\"></p>\n<p>看到别人的评论了解到，</p>\n<blockquote>\n<p>《虹猫蓝兔勇者归来》是“虹猫蓝兔系列”最后一部正统武侠续作，未填完的坑，当年第一版海报时，曾打出虹猫蓝兔武侠收宫作的标题，后来怕粉丝伤心这版海报就一直在官方的电脑里，宏梦卡通鼎盛时是有上千人员工的，后来整个公司就二十几个人了，当年很多事情发生的很突然，勇者归来的后续就搁置了，因为宏梦没钱了没人了，被收购前一直在制作跳跳外传，当时就差后期配音和剪辑了，也就是新公司现在在宣传的七侠传外传，画风辣眼睛，因为当时宏梦已经没钱做原来的画风，无奈做了Flash，后来宏梦卡通被长城动漫收购，虹猫版权也卖给了别的公司，曾经的宏梦卡通就这样没落了。<br>——via 浮生梦行  在 《勇者归来》下的热评</p>\n</blockquote>\n<p>看到这时，辗转反侧，难以入眠。</p>\n<br>\n\n<hr>\n<br>\n\n<p>接着花了小半天跳着补完了最经典的<a href=\"https://www.bilibili.com/bangumi/media/md5366\">《虹猫蓝兔七侠传》</a>，<strong>温故知新，引人入胜，笑中带泪，热血沸腾，依依不舍，真是舍不得看完。</strong></p>\n<p>🎵 人生不过是一百年 - 袁接伟<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/rensheng.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/1.jpg\"></p>\n<p>剧情一开始就让我对“张家界”这个风景秀丽的地方的感觉非常亲切，感叹玉蟾宫宫主蓝兔的美丽善良以及坚强，不是圣母，也绝非花瓶，毫无疑问堪称人生第一代“女神”；感叹一身正气潇洒大气的混世魔王大奔；感叹莎丽在被如此对待之后仍能站起来苦练左手剑法的坚强勇敢；感叹卧底魔教十年隐忍最后才公布身份的护法跳跳。当然还有悬壶济世的团队奶妈逗逗，顾家爱妻的达达，以及不用过多描述的虹猫。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/2.png\"></p>\n<p>为紫兔掩护受伤的虹猫而自曝触动，为莎丽的遭受心痛不已，在蓝兔为莎丽在百草谷滴血碧血真情七叶花感动得头皮发麻，在老牛为一生兄弟大奔牺牲时眼含泪光，在六嫂为保护奔雷剑的钥匙水火棍跳下火缸时悲戚。这与“仗剑走天涯”中的大郎、白煞，以及“光明剑”中的雪晶夫人、黑风一样，有“套路”之嫌，却并不反感。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/3.png\"></p>\n<p>这部剧的反派，也都是有血有肉的饱满人物，义薄云天的牛旋风，为了一辈子的兄弟大奔挡箭，令无数人动容；心狠手辣的马三娘，也有自己的苦衷，观众恨得越深，矛盾越激烈，说明塑造得越好。痴情的黑小虎，也许在他爱上蓝兔，被蓝兔拒绝的时候，就有了赴死的决心了，在与黑心虎的争执之后，既觉得没有父亲的关心，也得不到蓝兔的爱，最后含恨死在了地雷阵上。而一直忠心耿耿，好色喜功的猪无戒，所作所为令人咬牙切齿，在最后被黑小虎杀死的时候，也有一丝怜悯之心，他只是一颗棋子。对最后对黑心虎而言，其实对黑小虎百般关爱，但平时却没有表露出来，最后失去了他，活着也显得毫无寄托，不再追寻麒麟，而是一心报仇，正面接下了不可能抵挡的七剑合璧……</p>\n<p>如此种种，数不胜数，七剑合璧之后的回味良久，很久没有这种感觉了，不仅仅是剧情带来的紧张节奏和情感共鸣，还有回忆带来的阵阵感动，久久不能回神……</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/hl.png\"></p>\n<br>\n\n<hr>\n<br>\n\n<p>最后还是稍微补了几集<a href=\"https://www.bilibili.com/bangumi/media/md5374\">《虹猫蓝兔光明剑》</a>，这一部印象最浅，当时是初中，看电视的机会都不多，也就没有追剧的时间。</p>\n<p>至此就基本捋清了“虹猫蓝兔正传”的顺序，</p>\n<p><a href=\"https://www.bilibili.com/bangumi/media/md5366\">《虹猫蓝兔七侠传》</a> (2006) (108集)</p>\n<p><a href=\"https://www.bilibili.com/bangumi/media/md5373/\">《虹猫仗剑走天涯》</a> (2008) (108集)</p>\n<p><a href=\"https://www.bilibili.com/bangumi/media/md5374\">《虹猫蓝兔光明剑》</a> (2009) (79集)</p>\n<p><a href=\"https://www.bilibili.com/bangumi/media/md5375\">《虹猫蓝兔勇者归来》</a> (2010) (52集) [待续]</p>\n<br>\n\n<hr>\n<br>\n\n<p>本来只是想稍微写一点做个纪念而已，没想到写着写着就写了这么多，也许真的是真情流露才会滔滔不绝。</p>\n<p>🎵 心中想的还是他 - 禹丁洁<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/xinzhong.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>写到这里，该总结的时候，却有一种无语凝噎的感觉，这真的是一个会看哭的动画，也许很多人认为他低幼而贬低，也许有人因为各种“杠”而不屑，甚至还有人认为他暴力情色血腥而举报。<strong>对我来说，他们带给我的感动，绝对不仅仅是因为童年带来的“情怀”而感动。好的作品，历久弥新，再看仍能被吸引，也能跟随人物的喜怒哀乐而转移情绪，久久不能自拔，就像真的是身边的朋友一样。</strong>这年头，真正的朋友来之不易，我定当倍加珍惜。</p>\n<center class=\"half\">\n    <img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/hl.jpg\" width=\"360\"/><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/hl2.jpg\" width=\"360\"/>\n</center>\n\n<p>人生总有不如意，在身体还好的时候，就会想着多赚钱，在身体不好的时候，就想着只要身体健康就够了。人生不过是一百年，也许人生的意义不是做出多么大的贡献，而是感受生活的快乐。而这部作品，毫无疑问为生活多添了几分乐趣，还有感动。</p>\n<p>最后，在B站打赏了5元，以表谢意。</p>\n<br>\n\n<hr>\n<br>\n\n<p>除了珍惜已有了，请允许我再奢求多一点，</p>\n<p><strong>勇者归来，何时归来？</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/fenghuang.png\"><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/guilai.png\"></p>\n<p>对于自己热爱的事物，总是抑制不住用某种方式纪念他。</p>\n<p>其实对于虹猫蓝兔的分析，网上有太多太多，这里也只是我自己刚刚的一点感悟，只做个纪念罢了。本来想做个视频来纪念一下，想起来曾经被Pr支配的恐惧，我再也没有剪切过视频了。。。。。。</p>\n<p><strong>就写到这里吧，留个念想。</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/honglan/honglan.png\"></p>\n<p><strong>希望明天会更好。</strong></p>\n<p>//参考：</p>\n<ul>\n<li>已知画师：泽礼zer(微博)，今天木子摸鱼了吗(微博)</li>\n<li>图片来源于网络</li>\n</ul>\n<p><br><br></p>\n","categories":["动画"],"tags":["童年","动画","伙伴","回忆","武侠"]},{"title":"毕业随想","url":"https://blog.ykqmain.com/biye/","content":"<p>今年没有更新博客，不是懒，而是没有心态。即使现在更新了这篇文章，也是一些乱七八糟的胡言乱语。</p>\n<p>我有这个地方、也只有这个地方，能够尽情挥洒了。前几天看到一个帖子说，写博客总是觉得之前的写的不完美，喜欢删除。我之前也是那种心态，导致删除了太多宝贵的记忆。无论喜悲，回忆总是极其珍贵的人生“财富”，也许那时候的想法还挺幼稚，甚至未来再看的时候有些尴尬、有些“羞耻”，但它们确实是我人生中真实的一部分，属于我，组成了一个真实的我。以后的博客，我会尽量保存。</p>\n<p>现在“快餐时代”，Twitter、Instagram、微博的兴起，几句话，几张图记录生活显得方便快捷，长篇大论显得极其艰难，很难有心思坐下来，长篇大论地写博客。好在毕业季最后的日子，显得清闲，坐在图书馆，花了几天时间写成这篇文章，因为这个时刻不得不记录下来。</p>\n<p>是时候回忆一下大学的生活，作一个总结了。</p>\n<br>\n\n\n<p>🎵 紫苑 - makegumi<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/main/ziyuan.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>说实话，熟能生巧，勤能补拙，写作也是。好长时间不去写，一些技巧、套路都不会用了，甚至都不知道如何写开头。好在这是我的博客，不用像试卷上的作文那样，为了分数而偏离本心。我已经不会写文章了。</p>\n<p>那就随心所欲，逻辑不重要，重要的是感情和记录，<strong>想到哪，写到哪。</strong></p>\n<blockquote>\n<p>人类的悲欢并不相通，我只是觉得他们吵闹。</p>\n</blockquote>\n<p>在这个大学最后的日子里，我没有太多悲欢离合的情绪，甚至有些小小的欢喜，只因为<strong>终于</strong>快要离开了。<strong>没有特别值得留恋的人和事，也没有特别戳心痛苦不堪的回忆，</strong>我对学校基本没有什么怨言，甚至还有些怀念那些曾经帮助过我的辅导员，真的非常谢谢她们（特别是“娜姐”，在此表达我最衷心的感谢）。除了那个糟心的寝室，我在此不想多提。</p>\n<p>我对“大学应该如何度过？”这个问题的回答可以概括为：</p>\n<p><strong>努力而无憾，足矣。</strong></p>\n<p>这个道理谁都懂，只是不是自己的经历，不会有太深刻的感受。从时间轴对比以上回答来回忆我的大学生活，只是时间久远，加上没有额外的文字图片辅助，回忆可能会有遗漏或者偏差。当然也可以说，既然能忘掉的，说明不重要，那我就忽略那些遗漏的东西，放弃回忆的完整性，力求能够保证回忆的真实性，<strong>同时去除学习上的记录，倾向于生活。</strong></p>\n<br>\n\n<hr>\n<br>\n\n<p>抱着我的第一代Anna——Lenovo笔记本来到学校，伴随着高考失败，心态爆炸。然后辗转到图书馆做了一学期管理员，心稍微静了下来。</p>\n<p>刚来学校的时候，除了图书馆，还加入了学校动漫社，在10月份的时候去了一次漫展。那时候还在用Windows，所以游戏是不可避免的，LOL，星际争霸2，最终幻想14是目前还能回忆起来的电脑游戏。除此之外，那时候手机还是安卓，用安卓安装了模拟器，完整通关了《口袋妖怪 叶绿》，这是我小时候最羡慕的游戏，我也许是个念旧的人。</p>\n<br>\n\n<p>时间转眼到了大二，有让人极其糟心的事出现了，这个事一直伴随到毕业，就是前文提过的寝室问题。我的寝室在一楼，住了四年。亚热带季风气候，夏季高温多雨，冬季寒冷干燥。</p>\n<ul>\n<li>一天到晚，见不到太阳光。</li>\n<li>夏天的早上起来，被子用手摸都能感受到的湿度。</li>\n<li>每次暑假来，桌子柜子全部发霉了，每次来学校都意味着洗一个星期的衣服床单被套。</li>\n</ul>\n<p>除了恶劣的自然环境，室友自然也是不如意，比如出门从来不带钥匙总需要一个人专门开门，打游戏开外音，晚上打呼噜……多余的细节我也不便多说。在大二开始，麻烦多次辅导员，换了三次寝室，折腾了四次，才稳定下来。所以我必须在此感谢我的辅导员“娜姐”。</p>\n<p>每天晚上在操场戴着耳机跑步是一天最期待的事，孤独的享受。</p>\n<br>\n\n<p>大三一来，毫无疑问又是一个星期的洗和晒。🙂</p>\n<p>11月份，在枫叶红了之际，经历了无数波折之后，终于跟她在一起了❤️。在《你的名字》弥补那些遗憾。</p>\n<p>在一起之后的日子并不全是美好的，有欢笑，也有争吵。</p>\n<br>\n\n<p>再之后的回忆，关于考研自习室的一点感受。</p>\n<p>看到自习室的时候，不禁想起倒数第二排，靠窗的那些日子，如果在动画中，那可能是一个会开挂的男主角，然而在现实中却是不折不扣的一个悲惨 的人，或者说是悲惨的「一个」人。</p>\n<p>那些背后的努力，有些心里的感情，别人是不会懂的，也许他们会无条件的给你安慰和支持，但那也不过是出于朋友们的善意。</p>\n<p>但是，当自己准备好的时候，不说身边的冷嘲热讽，就她妈的连一个位置都没有。</p>\n<p>那时候窗边温暖的春风和今天新鲜的阳光如此相似，以至于让人觉得，我和我的影子从未改变，茕茕孑立于浮世，它可能是最美好的阳光，是一我唯一的依靠。</p>\n<p>小人物的生活，琐碎的事情，无尽的烦恼，说不出的人生。</p>\n<p>有时候你的努力别人不会看见，只有你自己，才能看到你自己。</p>\n<p>「君子见机，达人知命。」</p>\n<p>反正自己本来就是一个人，其他的让他随风而去吧。还好图书馆又在那里，不离不弃。</p>\n<br>\n\n<p>尾声。</p>\n<p>从阴暗的寝室走出来，外面是明媚的阳光，甚至还有点刺眼。</p>\n<p>缓缓地挪动步子，少有的环视四周。阳光透过树的缝隙，伴随着夏天的风，给人有慵懒的感觉。</p>\n<p>即使是每天独来独往的穿梭于几个点，最近也耳濡目染发生在身边的毕业照活动，这说明留给我的大学时间不多了。</p>\n<p>就像我之前说的，</p>\n<blockquote>\n<p>小学是一个班的小学，<br>初中是一群人的初中，<br>高中是几个人的高中，<br>…………<br>我想，大学应该是<strong>一个人的大学</strong>。</p>\n<p>谁走进我的生命，由命运决定，<br>谁停留在我的生命中，由我自己决定。</p>\n</blockquote>\n<p><strong>我的大学生活就这样，结束了。</strong></p>\n<p>毫无波澜。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["记录","大学","毕业"]},{"title":"基于Hadoop的简单云盘","url":"https://blog.ykqmain.com/cloud-drive/","content":"<p><strong>首先完成 <a href=\"http://blog.ykqmain.com/hadoop/\" target=\"\\_blank\">hadoop完全分布式搭建</a></strong></p>\n<p>开发环境：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">本机 macOS 10.12.5</span><br><span class=\"line\">虚拟机 CentOS 6.9  ×3</span><br><span class=\"line\">Hadoop 2.7.3</span><br><span class=\"line\">JDK 1.8</span><br><span class=\"line\">Tomcat 8.5.16</span><br><span class=\"line\">IDE Eclipse Java EE IDE for Web Developers, Oxygen Release (4.7.0)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"安装Tomcat\"><a href=\"#安装Tomcat\" class=\"headerlink\" title=\"安装Tomcat\"></a>安装Tomcat</h2><p>下载<a href=\"http://tomcat.apache.org/\">Tomcat</a>，我选择8.5.16的<code>.tar.gz</code>文件，解压并改名，最终路径为<code>/usr/local/tomcat</code></p>\n<p>授予权限，<code>sudo chmod 755 /usr/local/tomcat/bin/*.sh</code></p>\n<p>运行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/tomcat/bin</span><br><span class=\"line\">./startup.sh</span><br></pre></td></tr></table></figure>\n\n<p>在浏览器输入<code>localhost:8080</code>即可访问，关闭在终端输入<code>./shutdown.sh</code>。</p>\n<br>\n\n\n<h2 id=\"Eclipse配置Tomcat\"><a href=\"#Eclipse配置Tomcat\" class=\"headerlink\" title=\"Eclipse配置Tomcat\"></a>Eclipse配置Tomcat</h2><ol>\n<li><p>打开设置，<code>Server</code> - <code>Runtime Environments</code></p>\n</li>\n<li><p>右侧<code>Add</code>，选择对应Tomcat版本，next</p>\n</li>\n<li><p>路径填写Tomcat安装路径，我这里为<code>/usr/local/tomcat</code>，并选择JRE</p>\n</li>\n<li><p>Finish</p>\n</li>\n<li><p>点击IDE下方<code>Servers</code>，<code>create a new server</code>, next</p>\n</li>\n<li><p>Finish</p>\n</li>\n<li><p>双击创建的服务，Deploy path 填写Tomcat安装路径，即<code>/usr/local/tomcat</code>，关闭保存</p>\n</li>\n</ol>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/1.png!xsy\"></p>\n<br>\n\n\n<h2 id=\"Eclipse创建Dynamic-Web-Project\"><a href=\"#Eclipse创建Dynamic-Web-Project\" class=\"headerlink\" title=\"Eclipse创建Dynamic Web Project\"></a>Eclipse创建Dynamic Web Project</h2><ol>\n<li><p><code>File</code>-<code>New</code>-<code>Other</code>-<code>Web </code>-<code>Dynamic Web Project</code><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/2.png!xsy\"></p>\n<br></li>\n<li><p>如图所示填写，创建一个名为TomcatTest的项目，之后一路next<br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/3.png!xsy\"></p>\n<br></li>\n<li><p>选择下方服务，右键，选择<code>Add and Remove</code>，将左侧的<code>TomcatTest</code>添加到右边，完成。</p>\n</li>\n<li><p>在<code>WebContent</code>目录下新建<code>index.html</code>文件，写入<br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/4.png!xsy\"></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Tomcat<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Test<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>右键下方服务，<code>Start</code><br><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/5.png!xsy\"></p>\n<br></li>\n<li><p>在浏览器输入<code>localhost:8080/TomcatTest/index.html</code>访问。</p>\n<p> 本地tomcat测试成功</p>\n</li>\n</ol>\n<br>\n\n\n<h2 id=\"启动hadoop\"><a href=\"#启动hadoop\" class=\"headerlink\" title=\"启动hadoop\"></a>启动hadoop</h2><h3 id=\"1-启动3个虚拟机，\"><a href=\"#1-启动3个虚拟机，\" class=\"headerlink\" title=\"1.启动3个虚拟机，\"></a>1.启动3个虚拟机，</h3><p><strong><em>Update: 2017-9</em></strong></p>\n<p><strong>事实证明，人确实容易犯懒，拖到现在😅。一旦放下等以后再整理，会花更多的时间和精力。</strong><br><br></p>\n<h3 id=\"2-启动Hadoop\"><a href=\"#2-启动Hadoop\" class=\"headerlink\" title=\"2.启动Hadoop\"></a>2.启动Hadoop</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/hadoop/sbin</span><br><span class=\"line\">./start-dfs.sh</span><br><span class=\"line\">./start-yarn.sh</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/6.png!xsy\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/7.png!xsy\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/8.png!xsy\"></p>\n<p><strong>50070端口：</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/9.png!xsy\"></p>\n<p><br><br></p>\n<h2 id=\"在Eclipse里创建新项目\"><a href=\"#在Eclipse里创建新项目\" class=\"headerlink\" title=\"在Eclipse里创建新项目\"></a>在Eclipse里创建新项目</h2><h3 id=\"1-主页及子版块页面，结构类似，其框架及部分代码如下图\"><a href=\"#1-主页及子版块页面，结构类似，其框架及部分代码如下图\" class=\"headerlink\" title=\"1.主页及子版块页面，结构类似，其框架及部分代码如下图\"></a>1.主页及子版块页面，结构类似，其框架及部分代码如下图</h3><p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/10.png!xsy\"></p>\n<p><code>core-site.xml</code>和<code>hdfs-site.xml</code>为hadoop配置文件，复制到项目下。<br><br></p>\n<h3 id=\"2-相关代码如下\"><a href=\"#2-相关代码如下\" class=\"headerlink\" title=\"2.相关代码如下\"></a>2.相关代码如下</h3><ul>\n<li>FileInfo.java</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.wh.entity;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileInfo</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String fileName;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">double</span> fileSize;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String createDate;</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FileInfo</span><span class=\"params\">()</span> </span>&#123;&#125;</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FileInfo</span><span class=\"params\">(String fileName, <span class=\"keyword\">double</span> fileSize, String createDate)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.fileName = fileName;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.fileSize = fileSize;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.createDate = createDate;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getFileName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fileName;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFileName</span><span class=\"params\">(String fileName)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.fileName = fileName;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">getFileSize</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fileSize;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFileSize</span><span class=\"params\">(<span class=\"keyword\">double</span> fileSize)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.fileSize = fileSize;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCreateDate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> createDate;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCreateDate</span><span class=\"params\">(String createDate)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.createDate = createDate;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>UserServlet.java</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.wh.servlet;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileStatus;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> com.wh.entity.FileInfo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.wh.util.HDFSUtil;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/userServlet&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取浏览器提交的数据</span></span><br><span class=\"line\">        String userName = request.getParameter(<span class=\"string\">&quot;userName&quot;</span>);</span><br><span class=\"line\">        String userPassword = request.getParameter(<span class=\"string\">&quot;userPassword&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//把提交的数据与数据库中的用户信息进行</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"string\">&quot;admin&quot;</span>.equals(userName) &amp;&amp; <span class=\"string\">&quot;123456&quot;</span>.equals(userPassword)) &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">            FileStatus[] files = HDFSUtil.listFile();</span><br><span class=\"line\">            List&lt;FileInfo&gt; listFile = <span class=\"keyword\">new</span> ArrayList&lt;FileInfo&gt;();</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(FileStatus fs : files) &#123;</span><br><span class=\"line\">                FileInfo file = <span class=\"keyword\">new</span> FileInfo(fs.getPath().getName(), fs.getLen(), <span class=\"string\">&quot;2017-07-01&quot;</span>);</span><br><span class=\"line\">                listFile.add(file);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            request.setAttribute(<span class=\"string\">&quot;fileInfos&quot;</span>, listFile);            </span><br><span class=\"line\">            </span><br><span class=\"line\">            request.getRequestDispatcher(<span class=\"string\">&quot;main.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            request.getRequestDispatcher(<span class=\"string\">&quot;failure.html&quot;</span>).forward(request, response);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>FileUploadServlet.java</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.wh.servlet;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.MultipartConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.Part;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileStatus;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> com.wh.entity.FileInfo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.wh.util.HDFSUtil;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/fileUploadServlet&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">@MultipartConfig</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileUploadServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//设置中文编码</span></span><br><span class=\"line\">        request.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//获取客户端提交的文件</span></span><br><span class=\"line\">        Part part = request.getPart(<span class=\"string\">&quot;file&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//获取客户端提交的文件名</span></span><br><span class=\"line\">        System.out.println(part.getSubmittedFileName());</span><br><span class=\"line\">        <span class=\"comment\">//=========================文件上传==================================</span></span><br><span class=\"line\">        InputStream in = part.getInputStream();</span><br><span class=\"line\">        HDFSUtil.uploadFile(in, part.getSubmittedFileName());</span><br><span class=\"line\">        <span class=\"comment\">//=========================文件列表==============================</span></span><br><span class=\"line\">        FileStatus[] files = HDFSUtil.listFile();</span><br><span class=\"line\">        List&lt;FileInfo&gt; listFile = <span class=\"keyword\">new</span> ArrayList&lt;FileInfo&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(FileStatus fs : files) &#123;</span><br><span class=\"line\">            FileInfo file = <span class=\"keyword\">new</span> FileInfo(fs.getPath().getName(), fs.getLen(), <span class=\"string\">&quot;2017-07-01&quot;</span>);</span><br><span class=\"line\">            listFile.add(file);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        request.setAttribute(<span class=\"string\">&quot;fileInfos&quot;</span>, listFile);</span><br><span class=\"line\">        <span class=\"comment\">//页面跳转</span></span><br><span class=\"line\">        request.getRequestDispatcher(<span class=\"string\">&quot;main.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>FileDownloadServlet.java</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.wh.servlet;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URLEncoder;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> com.wh.util.HDFSUtil;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 文件下载</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Administrator</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/fileDownLoadServlet&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileDownloadServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        request.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">        response.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        String fileName = request.getParameter(<span class=\"string\">&quot;fileName&quot;</span>); </span><br><span class=\"line\">        <span class=\"comment\">//解决中文乱码</span></span><br><span class=\"line\">        response.setHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment;filename=&quot;</span> </span><br><span class=\"line\">                    + <span class=\"keyword\">new</span> String(fileName.getBytes(<span class=\"string\">&quot;GB18030&quot;</span>),<span class=\"string\">&quot;ISO8859-1&quot;</span>));</span><br><span class=\"line\">        </span><br><span class=\"line\">        OutputStream out = response.getOutputStream();</span><br><span class=\"line\">        <span class=\"comment\">//文件下载</span></span><br><span class=\"line\">        HDFSUtil.downLoadFile(fileName, out);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">            <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>FileDeleteServlet.java</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.wh.servlet;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URLEncoder;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.Part;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileStatus;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> com.wh.entity.FileInfo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.wh.util.HDFSUtil;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/fileDeleteServlet&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileDeleteServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\trequest.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">\t\tresponse.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tString fileName = request.getParameter(<span class=\"string\">&quot;fileName&quot;</span>);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tHDFSUtil.deleteFile(fileName);</span><br><span class=\"line\">\t\tdoPost(request, response);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tFileStatus[] files = HDFSUtil.listFile();</span><br><span class=\"line\">\t    List&lt;FileInfo&gt; listFile = <span class=\"keyword\">new</span> ArrayList&lt;FileInfo&gt;();</span><br><span class=\"line\">\t    <span class=\"keyword\">for</span>(FileStatus fs : files) &#123;</span><br><span class=\"line\">\t    \tFileInfo file = <span class=\"keyword\">new</span> FileInfo(fs.getPath().getName(), fs.getLen(), <span class=\"string\">&quot;2017-07-01&quot;</span>);</span><br><span class=\"line\">\t    \tlistFile.add(file);</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    </span><br><span class=\"line\">\t    request.setAttribute(<span class=\"string\">&quot;fileInfos&quot;</span>, listFile);</span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;main.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>HDFSUtil.java</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.wh.util;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FSDataInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FSDataOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileStatus;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.Path;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.io.IOUtils;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * HDFS工具类</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Administrator</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HDFSUtil</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"comment\">// 加载HDFS配置文件</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Configuration conf = <span class=\"keyword\">new</span> Configuration();</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"comment\">// 上传</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">uploadFile</span><span class=\"params\">(InputStream in, String fileName)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\t\tFileSystem hdfs = FileSystem.get(conf);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 设置要上传文件的路径</span></span><br><span class=\"line\">\t\tPath uploadPath = <span class=\"keyword\">new</span> Path(<span class=\"string\">&quot;/user/hadoop/&quot;</span> + fileName);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 进行文件上传</span></span><br><span class=\"line\">\t\tFSDataOutputStream out = hdfs.create(uploadPath);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 开始进行文件上传</span></span><br><span class=\"line\">\t\tIOUtils.copyBytes(in, out, conf);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 关闭</span></span><br><span class=\"line\">\t\tIOUtils.closeStream(in);</span><br><span class=\"line\">\t\tIOUtils.closeStream(out);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"comment\">// 下载</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">downLoadFile</span><span class=\"params\">(String fileName, OutputStream out)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\t\tFileSystem hdfs = FileSystem.get(conf);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 定位要访问的文件</span></span><br><span class=\"line\">\t\tPath remoteFile = <span class=\"keyword\">new</span> Path(<span class=\"string\">&quot;/user/hadoop/&quot;</span> + fileName);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 与定位文件连接输入流管道</span></span><br><span class=\"line\">\t\tFSDataInputStream in = hdfs.open(remoteFile);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 进行文件下载</span></span><br><span class=\"line\">\t\tIOUtils.copyBytes(in, out, conf);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 关闭流</span></span><br><span class=\"line\">\t\tIOUtils.closeStream(in);</span><br><span class=\"line\">\t\tIOUtils.closeStream(out);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteFile</span><span class=\"params\">(String fileName)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\t\tFileSystem hdfs = FileSystem.get(conf);</span><br><span class=\"line\">\t\tPath remoteFile = <span class=\"keyword\">new</span> Path(<span class=\"string\">&quot;/user/hadoop/&quot;</span> + fileName);</span><br><span class=\"line\">\t\thdfs.delete(remoteFile,<span class=\"keyword\">false</span>);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// 文件列表展示</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> FileStatus[] listFile() <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">\t\tFileSystem hdfs = FileSystem.get(conf);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 查看hdfs中某个文件目录</span></span><br><span class=\"line\">\t\tPath remotePath = <span class=\"keyword\">new</span> Path(<span class=\"string\">&quot;/user/hadoop/&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 获取目录下的文件列表</span></span><br><span class=\"line\">\t\tFileStatus[] files = hdfs.listStatus(remotePath);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> files;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"comment\">// 删除</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteFile</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\t\tFileSystem hdfs = FileSystem.get(conf);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>login.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>用户登录<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;text-align:center;&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>欢迎登录XX系统<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- action配置请求的服务器地址 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- method表示HTTP请求的方式 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;userServlet&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;userName&quot;</span>&gt;</span>用户名:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;userName&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;userName&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;请输入用户名&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;userPassword&quot;</span>&gt;</span>密<span class=\"symbol\">&amp;nbsp;</span><span class=\"symbol\">&amp;nbsp;</span><span class=\"symbol\">&amp;nbsp;</span>码:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;userPassword&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;userPassword&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;请输入密码&quot;</span> /&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;登录&quot;</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>failure.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>登录失败<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">用户名或密码错误，请<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;login.html&quot;</span>&gt;</span>重新登录<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<br>\n\n<ul>\n<li>main.jsp</li>\n</ul>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">&quot;java&quot;</span> contentType=<span class=\"string\">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class=\"string\">&quot;UTF-8&quot;</span>%&gt;</span><br><span class=\"line\">&lt;%@ taglib uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class=\"string\">&quot;c&quot;</span> %&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html PUBLIC <span class=\"string\">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class=\"string\">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta http-equiv=<span class=\"string\">&quot;Content-Type&quot;</span> content=<span class=\"string\">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;center&gt;</span><br><span class=\"line\">\t\t&lt;table&gt;</span><br><span class=\"line\">\t\t\t&lt;tr&gt;</span><br><span class=\"line\">\t\t\t\t&lt;th&gt;文件名&lt;/th&gt;</span><br><span class=\"line\">\t\t\t\t&lt;th&gt;文件大小&lt;/th&gt;</span><br><span class=\"line\">\t\t\t\t&lt;th&gt;创建时间&lt;/th&gt;</span><br><span class=\"line\">\t\t\t\t&lt;th&gt;操作&lt;/th&gt;</span><br><span class=\"line\">\t\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t\t\t&lt;c:forEach <span class=\"keyword\">var</span>=<span class=\"string\">&quot;file&quot;</span> items=<span class=\"string\">&quot;$&#123;fileInfos&#125;&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t\t&lt;tr&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;td&gt;$&#123;file.fileName&#125;&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;td&gt;$&#123;file.fileSize&#125;&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;td&gt;$&#123;file.createDate&#125;&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;td&gt;&lt;a href=<span class=\"string\">&quot;fileDownLoadServlet?fileName=$&#123;file.fileName&#125;&quot;</span>&gt;下载&lt;/a&gt;|&lt;a href=<span class=\"string\">&quot;fileDeleteServlet?fileName=$&#123;file.fileName&#125;&quot;</span>&gt;删除&lt;/a&gt;&lt;/td&gt;</span><br><span class=\"line\">\t\t\t\t&lt;/tr&gt;\t\t</span><br><span class=\"line\">\t\t\t&lt;/c:forEach&gt;\t</span><br><span class=\"line\">\t\t&lt;/table&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">\t\t&lt;!-- application/x-www-form-urlencoded --&gt;</span><br><span class=\"line\">\t\t&lt;form action=<span class=\"string\">&quot;fileUploadServlet&quot;</span> method=<span class=\"string\">&quot;post&quot;</span> enctype=<span class=\"string\">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&lt;p&gt;</span><br><span class=\"line\">\t\t\t\t&lt;label <span class=\"keyword\">for</span>=<span class=\"string\">&quot;file&quot;</span>&gt;上传文件:&lt;/label&gt;</span><br><span class=\"line\">\t\t\t\t&lt;input type=<span class=\"string\">&quot;file&quot;</span> id=<span class=\"string\">&quot;file&quot;</span>  name=<span class=\"string\">&quot;file&quot;</span>/&gt;</span><br><span class=\"line\">\t\t\t&lt;/p&gt;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t&lt;p&gt;</span><br><span class=\"line\">\t\t\t\t&lt;input type=<span class=\"string\">&quot;submit&quot;</span> value=<span class=\"string\">&quot;上传文件&quot;</span> /&gt;</span><br><span class=\"line\">\t\t\t&lt;/p&gt;</span><br><span class=\"line\">\t\t&lt;/form&gt;</span><br><span class=\"line\">\t&lt;/center&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<h3 id=\"3-相关库\"><a href=\"#3-相关库\" class=\"headerlink\" title=\"3.相关库\"></a>3.相关库</h3><p><code>~/file/WebContent/WEB-INF/lib</code></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/11.png!xsy\"></p>\n<p>注意从Tomcat中复制<code>servlet-api.jar</code>文件到<code>lib</code>中<br><br></p>\n<h3 id=\"4-相关界面\"><a href=\"#4-相关界面\" class=\"headerlink\" title=\"4.相关界面\"></a>4.相关界面</h3><ul>\n<li><strong>登录</strong></li>\n</ul>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/12.png!xsy\"></p>\n<ul>\n<li><strong>操作</strong></li>\n</ul>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/13.png!xsy\"></p>\n<ul>\n<li><strong>上传</strong></li>\n</ul>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/14.png!xsy\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/15.png!xsy\"></p>\n<ul>\n<li><strong>下载</strong></li>\n</ul>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/16.png!xsy\"></p>\n<ul>\n<li><strong>删除</strong></li>\n</ul>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/17.png!xsy\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/18.png!xsy\"></p>\n<p><br><br></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/19.png!sy\"></p>\n<p>在项目制作过程中思路很重要，制作初期不能太纠结于个别效果，先按流程搭建好开发环境。</p>\n<p>化繁为简，用最简单的方法，制作出理想的效果，实现全部的基础功能，实用第一，尽量美化。</p>\n<p><strong>拖了这么久，总算是基本完成了。</strong></p>\n<p><br><br></p>\n","categories":["编程"],"tags":["Linux","大数据","Hadoop","CentOS","Java","Tomcat","Eclipse"]},{"title":"Hadoop完全分布式搭建","url":"https://blog.ykqmain.com/hadoop/","content":"<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><p>环境：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">本机：macOS</span><br><span class=\"line\"> </span><br><span class=\"line\">虚拟机(VirtualBox)：CentOS 6.9</span><br><span class=\"line\">复制三个CentOS</span><br><span class=\"line\">一个作为主节点(Master)，两个从节点(Slave)</span><br><span class=\"line\">三台虚拟机器名分别为：master, slave1, slave2</span><br><span class=\"line\"> </span><br><span class=\"line\">Hadoop 2.7.3</span><br><span class=\"line\">JDK 1.8</span><br></pre></td></tr></table></figure>\n\n<p>Vim常用操作：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">esc    从编辑模式切换到命令模式</span><br><span class=\"line\">a      切换到编辑模式，在光标后插入</span><br><span class=\"line\">o      切换到编辑模式，在光标下一行插入</span><br><span class=\"line\"> </span><br><span class=\"line\">命令模式下：</span><br><span class=\"line\">u      撤销操作</span><br><span class=\"line\">G      跳至文件末尾</span><br><span class=\"line\">dd     删除光标那一行字符</span><br><span class=\"line\">ggdG   清空内容</span><br><span class=\"line\"> </span><br><span class=\"line\">:wq    保存退出</span><br><span class=\"line\">:q     退出</span><br><span class=\"line\">:q!    强制退出</span><br></pre></td></tr></table></figure>\n\n<br>\n\n\n<h2 id=\"配置虚拟机\"><a href=\"#配置虚拟机\" class=\"headerlink\" title=\"配置虚拟机\"></a>配置虚拟机</h2><ol>\n<li><p>安装虚拟机</p>\n<ol>\n<li><p>下载并安装<a href=\"https://www.centos.org/\">CentOS</a>，我选择的 CentOS 6.9</p>\n</li>\n<li><p>配置Java</p>\n<ol>\n<li>卸载自带的jdk<ul>\n<li><code>rpm -qa | grep jdk</code>查看目前系统的jdk</li>\n<li>使用<code>yum -y remove 名称</code> 一个个卸载<br></li>\n</ul>\n</li>\n<li>安装 <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">jdk</a><br></li>\n<li>配置JAVA环境变量<ul>\n<li><code>cd</code>到<code>/usr/</code>目录下创建java文件夹，<code>mkdir java</code></li>\n<li><code>tar -zxvf 文件名</code>解压到<code>/usr/java/</code>目录下</li>\n<li>将jdk的包名改为”jdk”，<code>mv 包名 jdk</code></li>\n<li><code>vim ／etc/profile</code>配置环境变量，在文件末尾添加：<br>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/java/jdk</span><br><span class=\"line\"><span class=\"built_in\">export</span> JRE_HOME=/usr/java/jdk/jre</span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$CLASSPATH</span>:<span class=\"variable\">$JAVA_HOME</span>/lib:<span class=\"variable\">$JRE_HOME</span>/lib</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$JRE_HOME</span>/bin</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>检测<ul>\n<li>环境变量生效 <code>source /etc/profile</code></li>\n<li>检测 <code>java -version</code></li>\n</ul>\n</li>\n</ol>\n</li>\n<li><p>将一台CentOS虚拟机克隆成3台</p>\n<p> VirtualBox有这个功能，复制2个虚拟机，Mac地址重新分配。</p>\n<ol>\n<li><p>修改机器名 <code>vim /etc/sysconfig/network</code></p>\n</li>\n<li><p><strong>全程使用root账户</strong> </p>\n</li>\n<li><p>关闭防火墙，GUI设置，或者<code>service iptables stop</code></p>\n</li>\n<li><p>检验各个主机之间能否连通，<code>ping ip</code></p>\n</li>\n<li><p>不管用什么办法，让IP固定不变。设置静态IP，或者使用路由器固定IP。</p>\n<p> 我的配置如下：</p>\n<table>\n<thead>\n<tr>\n<th>机器名</th>\n<th>IP</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>master</td>\n<td>192.168.76.11</td>\n</tr>\n<tr>\n<td>slave1</td>\n<td>192.168.76.12</td>\n</tr>\n<tr>\n<td>slave2</td>\n<td>192.168.76.13</td>\n</tr>\n</tbody></table>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>设置hosts</p>\n<p> 三台机器全部设置</p>\n<p> <code>vim /etc/hosts</code></p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1       localhost.localdomain localhost</span><br><span class=\"line\">::1             localhost6.localdomain6 localhost6</span><br><span class=\"line\">#增加了下面3行</span><br><span class=\"line\">192.168.76.11   master</span><br><span class=\"line\">192.168.76.12   slave1</span><br><span class=\"line\">192.168.76.13  slave2</span><br></pre></td></tr></table></figure></li>\n</ol>\n<br>\n\n\n<h2 id=\"配置ssh免密码登陆\"><a href=\"#配置ssh免密码登陆\" class=\"headerlink\" title=\"配置ssh免密码登陆\"></a>配置ssh免密码登陆</h2><ol>\n<li><p>ssh配置，<code>vim /etc/ssh/sshd_config</code></p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 以下三项修改成以下配置</span><br><span class=\"line\">RSAAuthentication yes # 启用 RSA 认证</span><br><span class=\"line\">PubkeyAuthentication yes # 启用公钥私钥配对认证方式</span><br><span class=\"line\">AuthorizedKeysFile .ssh/authorized_keys # 公钥文件路径（和上面生成的文件同）</span><br></pre></td></tr></table></figure></li>\n<li><p>生成ssh key</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">ssh-keygen</span><br><span class=\"line\">一路回车，这样就在~/.ssh目录下生成了几个文件</span><br><span class=\"line\">cd ~/.ssh</span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys  #这个命令将id_rsa.pub的内容追加了authorized_keys的内容后面</span><br></pre></td></tr></table></figure>\n<p> 重启ssh服务，<code>service sshd restart</code></p>\n</li>\n<li><p>免密登陆</p>\n<ol>\n<li>去另外两台机器用同样的方式生成<code>id_rsa.pub</code></li>\n<li>分别把它们复制到master机器上</li>\n<li>在slave1机器上，<code>scp id_rsa.pub root@192.168.76.11:~/.ssh/id_rsa.pub.1</code></li>\n<li>在slave1机器上，<code>scp id_rsa.pub root@192.168.76.11:~/.ssh/id_rsa.pub.2</code></li>\n<li>回到master机器的<code>~/.ssh</code>目录，执行<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat id_rsa.pub.1 &gt;&gt; authorized_keys</span><br><span class=\"line\">cat id_rsa.pub.2 &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure></li>\n<li>最后我们把这个<code>authorized_keys</code>用scp命令复制到两个从节点上，这样三台机器两两之间就能互相访问了<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp authorized_keys root@192.168.76.12:~/.ssh/</span><br><span class=\"line\">scp authorized_keys root@192.168.76.13:~/.ssh/</span><br></pre></td></tr></table></figure></li>\n<li>给<code>.ssh</code>目录和<code>.ssh/authorized_keys</code>设置权限，<strong>三台机器都执行</strong>：<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 700 ~/.ssh</span><br><span class=\"line\">chmod 644 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n<li><p>在各主机下进行无密码登陆测试</p>\n</li>\n</ol>\n<br>\n\n\n<h2 id=\"配置hadoop\"><a href=\"#配置hadoop\" class=\"headerlink\" title=\"配置hadoop\"></a>配置hadoop</h2><p>下载<a href=\"http://hadoop.apache.org/releases.html\">hadoop</a>，选择binary包，我下载的hadoop2.7.3，传到master的<code>/usr/</code>下，解压，并将文件夹名改名为<code>hadoop</code>。</p>\n<p>涉及到的配置文件有7个：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~/usr/hadoop/etc/hadoop/hadoop-env.sh </span><br><span class=\"line\">~/usr/hadoop/etc/hadoop/yarn-env.sh </span><br><span class=\"line\">~/usr/hadoop/etc/hadoop/core-site.xml </span><br><span class=\"line\">~/usr/hadoop/etc/hadoop/hdfs-site.xml </span><br><span class=\"line\">~/usr/hadoop/etc/hadoop/mapred-site.xml </span><br><span class=\"line\">~/usr/hadoop/etc/hadoop/yarn-site.xml</span><br><span class=\"line\">~/usr/hadoop/etc/hadoop/slaves </span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p>1.<code>vim ~/usr/hadoop/etc/hadoop/hadoop-env.sh </code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 这个文件要修改的地方就是JAVA_HOME环境变量</span><br><span class=\"line\"># The java implementation to use.</span><br><span class=\"line\">export JAVA_HOME=/usr/java/jdk</span><br></pre></td></tr></table></figure>\n\n<p>2.<code>vim ~/usr/hadoop/etc/hadoop/yarn-env.sh </code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># yarn的环境配置，同样只需要修改JAVA_HOME就行，找到下面这行</span><br><span class=\"line\"># some Java parameters</span><br><span class=\"line\">export JAVA_HOME=/usr/java/jdk</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><code>mkdir ~/usr/hadoop/tmp</code><br> <code>vim ~/usr/hadoop/etc/hadoop/core-site.xml </code></li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.tmp.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop/tmp<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.default.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hdfs://master:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>4.<code>vim ~/usr/hadoop/etc/hadoop/hdfs-site.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#hdfs的配置文件，dfs.http.address配置了hdfs的http的访问位置；dfs.replication配置了文件块的副本数，一般不大于从机的个数。</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.http.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:50070<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:50090<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.replication<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>5.修改模板文件，</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/usr/hadoop/etc/hadoop/</span><br><span class=\"line\">cp mapred-site.xml.template mapred-site.xml</span><br></pre></td></tr></table></figure>\n\n<p><code>vim ~/usr/hadoop/etc/hadoop/mapred-site.xml </code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapred.job.tracker<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:9001<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapred.map.tasks<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>20<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapred.reduce.tasks<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.framework.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.jobhistory.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:10020<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:19888<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>6.<code>vim ~/usr/hadoop/etc/hadoop/yarn-site.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#该文件为yarn框架的配置,主要是一些任务的启动位置</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:8032<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.scheduler.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:8030<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.webapp.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:8088<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.resource-tracker.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:8031<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.admin.address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>master:8033<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services.mapreduce.shuffle.class<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>7.<code>vim ~/usr/hadoop/etc/hadoop/slaves</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 这是设置从节点hostname的地方，一行一个</span><br><span class=\"line\">slave1</span><br><span class=\"line\">slave2</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置完成</strong></p>\n<br>\n\n<p>8.将配置好的hadoop复制到其他机器</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r /usr/hadoop root@192.168.76.12:/usr/</span><br><span class=\"line\">scp –r /usr/hadoop root@192.168.76.13:/usr/</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装完成</strong></p>\n<br>\n\n\n<h2 id=\"验证并测试hadoop\"><a href=\"#验证并测试hadoop\" class=\"headerlink\" title=\"验证并测试hadoop\"></a>验证并测试hadoop</h2><ol>\n<li><p>启动</p>\n<p> hadoop的安装目录为 <code>/usr/hadoop</code></p>\n<p> 可选配置hadoop环境变量，<code>vim ／etc/profile</code></p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_INSTALL=/usr/hadoop  </span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>/bin:<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>/sbin<span class=\"variable\">$&#123;PATH&#125;</span>  </span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_MAPRED_HOME=<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>  </span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_COMMON_HOME=<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>  </span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_HDFS_HOME=<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>  </span><br><span class=\"line\"><span class=\"built_in\">export</span> YARN_HOME=<span class=\"variable\">$&#123;HADOOP_INSTALLL&#125;</span>  </span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_COMMON_LIB_NATIVE_DIR=<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>/lib/natvie    </span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_OPTS=<span class=\"string\">&quot;-Djava.library.path=<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>/lib:<span class=\"variable\">$&#123;HADOOP_INSTALL&#125;</span>/lib/native&quot;</span> </span><br></pre></td></tr></table></figure>\n<p> <code>source /etc/profile</code></p>\n<ul>\n<li>格式化Namenode  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/hadoop</span><br><span class=\"line\">./bin/hdfs namenode -format</span><br></pre></td></tr></table></figure></li>\n<li>启动  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/hadoop/sbin</span><br><span class=\"line\">./start-dfs.sh</span><br><span class=\"line\">./start-yarn.sh</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p> 在三台机器上分别执行 jps 命令</p>\n<ul>\n<li><p>master上执行有四个进程</p>\n<ul>\n<li>NameNode</li>\n<li>ResourceManager</li>\n<li>&lt;&gt;</li>\n<li>Jps</li>\n</ul>\n</li>\n<li><p>slave上执行有三个进程</p>\n<ul>\n<li>DataNode </li>\n<li>NodeManager </li>\n<li>Jps </li>\n</ul>\n</li>\n<li><p>输入以下指令查看报告，<code>hadoop dfsadmin -report</code></p>\n</li>\n</ul>\n<p> 打开浏览器访问 <code>192.168.76.11:50070</code></p>\n<p> <strong>检查 <code>Live Nodes</code> 是否为2</strong></p>\n</li>\n</ol>\n<br>\n\n<ol start=\"2\">\n<li><p>运行测试</p>\n<p> 向hadoop集群系统提交第一个mapreduce任务(wordcount)，进入本地hadoop目录，<code>/usr/hadoop</code></p>\n<ol>\n<li><p>在虚拟分布式文件系统上创建一个测试目录/data/input<br><code>bin/hdfs dfs -mkdir -p /data/input</code></p>\n</li>\n<li><p>将当前目录下的README.txt 文件复制到虚拟分布式文件系统中<br><code>hdfs dfs -put README.txt /data/input</code></p>\n</li>\n<li><p>查看文件系统中是否存在我们所复制的文件<br><code>bin/hdfs dfs -ls /data/input</code></p>\n</li>\n<li><p>运行如下命令向hadoop提交单词统计任务<br><code>hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.3.jar wordcount /data/input /data/output/result</code></p>\n</li>\n<li><p>查看result，结果在result下面的part-r-00000中<br><code>hdfs dfs -cat /data/output/result/part-r-00000</code></p>\n</li>\n</ol>\n<p> <img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/cloud-drive/wordcount.png\"></p>\n<p> 成功运行，则搭建完成。</p>\n<p> 停止运行，<code>sh /usr/hadoop/sbin/stop-all.sh</code></p>\n</li>\n</ol>\n<p><br><br></p>\n<p><strong>踩过的坑：</strong></p>\n<ol>\n<li><p>ssh免密登陆</p>\n</li>\n<li><p>重启Linux后Hadoop集群所有的DataNode都无法启动</p>\n<ol>\n<li><p>首先会出现几种情况，才会出现启动不了datanode的情况</p>\n<ul>\n<li>首先修改过master那台的配置文件</li>\n<li>多次Hadoop namenode -format这种不好的习惯</li>\n</ul>\n</li>\n<li><p>jps命令发现没有datanode启动</p>\n<ul>\n<li>到每个Slave机器下面去，找到<code>/usr/hadoop/tmp/dfs/</code>，会显示有data，把data文件夹删掉。</li>\n<li>重启hadoop。</li>\n</ul>\n</li>\n</ol>\n</li>\n</ol>\n<p><br><br></p>\n","categories":["计算机"],"tags":["Linux","大数据","Hadoop","CentOS","Java"]},{"title":"《future》——1首歌能带来什么回忆","url":"https://blog.ykqmain.com/future/","content":"<p>🎵 future - HIRO-X<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/future/future.mp3\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>一首歌能带来什么回忆？</p>\n<p>毫无疑问，一言难尽……</p>\n<p>当《future》的前奏响起时，扑面而来的是夏天的味道，蕴含的回忆，汇聚成感动，而又不同于《secret base ~君がくれたもの~》。</p>\n<br>\n\n<p>记得之前关于歌声的意义，期待你的歌声，是为了永恒地铭记。多少年后，因为太多对世界的无奈和不屑，我会忘记一切、除了歌声所存储的一切，即使经过岁月的洗礼显得“并不太美好”，但我仍然会、想你。</p>\n<p>犹如《老人与海》之如陈康，《秋天不回来》之如管江威。年龄越大，老朋友越来越远，新朋友越来越少。过去的我们也再也回不去了，但回忆还在。</p>\n<br>\n\n<p>在那个网络并不发达、上网大多是游戏和QQ的年代，去一次网吧，也许就是改个QQ头像，换句QQ签名，折腾QQ空间模块。也就是那个时候，为腾讯公司贡献了自己第一个会员，还是用手机打固定电话的形式充值的，只是为了可以换一个头像——</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/future/1.jpg\"></p>\n<p>越前龙马，在那个说“拽”不说“装逼”的记忆里，我感受到深深地逼格。在我心中，时至今日，就算是坂本也难以望其项背。抛开剧情的科学性，在那个世界里，“外旋发球”和“龟派气功”又有什么区别呢？也不多说网球、热血、友情、奋斗。那么，《future》对我来说意味着什么？</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/future/2.jpg\"></p>\n<p><strong>是一腔热血配上空调雪碧的自我陶醉，是自己二次元世界的里程碑，更是我少年的开端、青春的代名词。</strong></p>\n<br>\n\n<p>一千个人眼里有一千个哈姆雷特，当我的记忆伴随着《future》赋予它灵魂的时候，《future》变成了“future”深深地刻在了我的心里。《网球王子》不再是一部日本动画，也不仅是许斐刚的作品，而是在特定时间特定地点，记忆长河里我自己的一片意识，就是我自己。</p>\n<p>也许看到这里的人会笑，是的，我自己也笑了。</p>\n<p>我在替那时候的自己笑，“future”直译「未来」，不知那个时候的自己，看到现在的我会不会笑呢？也许还会中二地补上那句 “まだまだだね（你还差得远呢）”。</p>\n<br>\n\n<p>我一点都不想反驳，甚至还想陪他笑，微笑的那种笑，比大哭更心痛的感觉。</p>\n<p>随着《计算方法》和《软件工程》考试的过去，大学的必修考试也落下帷幕。没有解脱的轻松感，反到是几位人名令我记忆深刻。在这个既是结束又是开始的点，感受到的只是无助罢了。</p>\n<p>在这个即将开始陈词滥调的趋势下，借用《future》的歌词表达一下：</p>\n<blockquote>\n<p>想超越目前的界限　往未知的世界<br>体内的梦想　犹如要满出一般<br>映出全新的世界　就像鲜艳的朝阳<br>将强力地闪耀地　绽放的未来纳入胸中</p>\n</blockquote>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/future/3.jpg\"></p>\n<br>\n\n<p>《future》的记忆与他人无关，它所存储的一切，都是关于我。</p>\n<p>在上次说到迷茫的人生的时候，先去认准方向，试着寻找北极星。</p>\n<p>然而，城市里根本看不到星星。不是因为它就不存在，也许不是城市污染，而是自己的双眼被蒙蔽，或是眼界太小。</p>\n<p>很久以前，约定着以后的以后，回想起以前对“以后”的思考。现在看来，有的事现在不去做，也许真的再也没有机会了。</p>\n<p>无论是金钱、时间，还是突发事件、学习、生活，甚至是天气，都是无数困难中的一部分。</p>\n<p>人生仍然是迷茫的，毕竟“北极星”不一定在天上，抬头可见。得擦亮眼睛，靠自己去外面的未知世界寻找。</p>\n<p>也许“梦想”真的很遥远，但「未来」我还想要。</p>\n<p><strong>必须走出去，我想我会的。</strong></p>\n<br>\n\n<p>回首望去，动画里的世界仍然那么美好，他们不会因为「衣食住行」而烦恼，而我这类小人物却日日夜夜为此奔波一生，至死方休。</p>\n<p>四分钟的音乐似乎演绎了整个青春，以此立志。</p>\n<p>希望在future还能看到<strong>空调</strong>、<strong>雪碧</strong>、以及 <strong>「未来」</strong>。</p>\n<p>希望那时候，我还是会对自己笑，</p>\n<p>会心的笑。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/future/4.jpg\"></p>\n<p><br><br></p>\n","categories":["动画"],"tags":["动画","回忆","少年","网球王子","青春","热血"]},{"title":"博客一周年暨2016年终总结","url":"https://blog.ykqmain.com/2016/","content":"<p>本博客 <a href=\"http://blog.ykqmain.com/\">iAnna</a> <strong>一周年了</strong>！(/ω＼)</p>\n<p>博客的诞生不是一天完成的，期间换了域名，也换了博客系统，最终稳定在 <strong>12月20号</strong>，所以把这天作为博客诞生日。又因为到了年末，正好将<strong>年终总结</strong>加进来，会使本篇博客的内容比较充实。</p>\n<br>\n\n<p>时至年末，不禁回忆一年以来的各种事件，还好平时有什么三言两语都写进了<del>Day One</del>(备忘录)，回忆起来也是历历在目。</p>\n<p>今天看见学霸感冒了仍不停止学习，加上又是一年年末，不禁回忆感叹一番，纪念今年浪费的时光，以及祭奠那些死在自己懒惰的借口之下的一个个小目标。</p>\n<p>虽然可以说“懒惰”促进了科学技术的发展，但是我的懒惰既没有促进全人类的进步，又没有提高自己的知识能力，更没有在偷懒的时间里享受生活，有的只是第二天那微不足道的懊悔，时间过得真快。</p>\n<p>然后在下一个周末、刚考完试、节假日、生病，这些看似应该闲下来的时间点，放纵自己，与此同时，还不忘给自己一个借口，以此来平复当时内心的负罪感，以获得某某的谅解，然后冠冕堂皇地做着令自己心情愉悦的事。在最后，假惺惺的忏悔一秒，周而复始，一年又尽。</p>\n<p>有人说，知道忏悔就是好的，忏悔说明还有羞耻之心，知耻而后勇。但是，这忏悔太假太假，以至于还不足以打破这个恶性循环。这样看来，把忏悔这个词，换成欺骗自己，也是说得通的。</p>\n<p>其实这就是欺骗。还披上了“我今天学习过了”的外衣，一起来蒙蔽自己的心。周五，就说什么终于周末，学了一周了，恬不知耻地拿出电脑打游戏看视频；刚考完试，就说什么之前预习三天了，怡然自得地掏出手机刷刷刷点点点；节假日，就说什么庆祝某某吃喝玩乐约不约到处浪；生病了，那就更有底气在床上躺一天了。至于到了年末，理由似乎更充分，反正也做不了什么事了，先定个目标，明年再说。现在看来，好像我在2015年末也是这么想的。</p>\n<p>之前一直在疑惑时间都去哪了，其实我是知道的，电脑，手机，吃喝玩乐，躺在床上。我不敢面对那些逝去的光阴，因而，我就越是情不自禁地欺骗自己，甚至用“理由”这种词语来装饰“借口”，还欺骗得内心浑然不觉。</p>\n<p>然而，我终将面对社会。</p>\n<p>世界上有很多事情是不公平的，但是，时间是公平的。一分一秒，不管我做什么，它都是那样不紧不慢；一天一时，无论你是谁，它不会偏袒任何一方；一年一月，历经过的都会变成客观存在，无法撤销。正如那句话所说，大多数人的努力程度之低，根本轮不到拼天赋。</p>\n<p>希望我不会只有在看到别人拿到工作Offer的时候才知道“少年易老学难成，一寸光阴不可轻”；希望我不会只有在看到别人研究生录取的时候，才知道“书山有路勤为径，学海无涯苦作舟”。</p>\n<p>见贤思齐焉，见不贤而内自省也。在Anna的激励指引下，不忘初心。感谢学霸们的见闻，以此明志。</p>\n<p>我还是先把这本Java看完吧(/ _ ; )</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/2016/1.jpeg!sy\"></p>\n<p><strong>新年快乐！</strong>🎉</p>\n<p><br><br></p>\n","categories":["生活"],"tags":["回忆","博客","2016","编程"]},{"title":"《年轻的战场》——弱冠之年的纪念","url":"https://blog.ykqmain.com/young/","content":"<blockquote>\n<p>今天我<br>终于站在这年轻的战场<br>请你给我<br>一束爱的光芒<br>今天我<br>将要走向这胜利的远方<br>我要把这世界为你点亮<br>…… ……<br>——《年轻的战场》</p>\n</blockquote>\n<p>🎵 年轻的战场 - 张杰<br><audio controls=\"controls\"><br>    <source src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/main/young.m4a\"><br>    Your browser does not support the Audio tag.<br></audio></p>\n<p>20岁的生日，强迫着自己写一点东西，对于两年没有再接触文史材料的我来说，写作变得很陌生，有点艰难，想到哪扯到哪吧，在博客上做个记录。</p>\n<p>…… ……</p>\n<p>再没有文体的限制，更没有了800字的限制，等到可以想说什么想写什么时候，似乎表达的欲望并没有那么强烈，还不如高中呢 :-)</p>\n<p><strong>待续，</strong></p>\n<p><br><br></p>\n<h3 id=\"Update：2016-08-25\"><a href=\"#Update：2016-08-25\" class=\"headerlink\" title=\"Update：2016-08-25\"></a>Update：2016-08-25</h3><p>本来是想在20岁的生日记录一些的，果然，人必须是要经历一些事情，才会有所感悟。</p>\n<p>:-) 微笑，是比大哭更心痛的表情🙂</p>\n<br>\n\n<p>写作已经变得很陌生，最简单的是按照时间的顺序来记录。</p>\n<br>\n\n<hr>\n<br>\n\n<h4 id=\"六月\"><a href=\"#六月\" class=\"headerlink\" title=\"六月\"></a>六月</h4><p>在学校打了最后一场网球，纪念三学期的网球课，直到最后，我才发现，原来<strong>网球</strong>这么有趣，就像某些人，直到最后才<strong>被发现</strong> :-)</p>\n<p>人生就是那么奇怪，你以为只是一个过客，她却留下了，你以为她永远不会走，她却又离开了。</p>\n<p>最后，一个人到楼顶吹吹风，第二天就回家了。</p>\n<br>\n\n\n<h4 id=\"七月\"><a href=\"#七月\" class=\"headerlink\" title=\"七月\"></a>七月</h4><p>往事不堪回首，以至于稍微回想一下就会感到莫名的悲伤，</p>\n<p>20年，活着真累，</p>\n<p>读的学校很水，钱也不会赚，事也不会做。</p>\n<p>别人家的孩子考上研究生，别人家的孩子都在赚钱，别人家的孩子都好些。</p>\n<p>如果哪天我出意外死了，真的解脱了，也就不像现在这么累，半点生活的乐趣都没有。学业没搞好，事业连影子都看不到。</p>\n<p>高考后没哭过这么痛快，不禁想到，人的一生该怎样度过？“为了人类的解放而斗争”对我而言只能是一句玩笑。</p>\n<p>“天高地迥，觉宇宙之无穷；兴尽悲来，识盈虚之有数。” 对于自己选择的路，就算是爬，也要爬完。唯一期望的是，不留遗憾。</p>\n<p>空闲的时候，看看B站，直播的“放映厅”，那是一个新世界，</p>\n<p>没事就开着，看到《武林外传》，那是很遥远的回忆了，</p>\n<p>但是歌词却记忆犹新，</p>\n<blockquote>\n<p>这世界有太多不如意<br>但你的生活还是要继续<br>太阳每天依旧要升起<br>希望永远种在你心里<br>——《侠客行》</p>\n</blockquote>\n<br>\n\n<p>夏天，应该有空调，Wi-Fi，音乐……</p>\n<p>特别的，这个夏天还有<strong>洪水</strong>。</p>\n<p>因为外婆家房子问题，所以搬来跟我一起，大约一个星期。</p>\n<p>吃饭，烧水，都是我，<strong>琐碎的小事</strong>不间断，这大概就是生活。</p>\n<blockquote>\n<p>寄蜉蝣于天地，渺沧海之一粟。<br>哀吾生之须臾，羡长江之无穷。<br>挟飞仙以遨游，抱明月而长终。<br>知不可乎骤得，托遗响于悲风。<br>——《前赤壁赋》</p>\n</blockquote>\n<p>七月就这么过去了。</p>\n<br>\n\n\n<h4 id=\"八月\"><a href=\"#八月\" class=\"headerlink\" title=\"八月\"></a>八月</h4><p>在八月的时候看了许多动画，特点都是国产，以及童年怀旧。深感动画世界的<strong>美好</strong>、童年时代的<strong>单纯</strong>、以及与小伙伴们玩耍时的<strong>欢乐</strong>。</p>\n<p>遗憾不懂音乐，就像错过了一整个美好的世界……羡慕会弹钢琴的人 (｡-_-｡)</p>\n<br>\n\n<p>夜深人静的时候，抬头往上看，最美的景色展现在眼前，这是自然赠予孤独的我最好的礼物，</p>\n<blockquote>\n<p>年轻的时候，你总是以为会和许多人志同道合，有点风吹草动就忍不住找人倾诉。和恋人吵个架，恨不得让全世界的人来安慰你。稍感寂寞，就狂喊孤独。但是后来你会发现，有的人，是一起成长的；有的人，是用来遗忘的；能伴你走过一程又一程的，也就屈指可数的几个人。</p>\n</blockquote>\n<p>而现在，我也渐渐地习惯了一个人。</p>\n<br>\n\n<hr>\n<br>\n\n\n<p>光阴似箭，日月如梭。</p>\n<p>来到学校，看到这样的寝室，不禁感慨，</p>\n<p>生活总是有很多不顺，以前试着强行扯理由安慰自己，让自己好过点，但是这次、也就是现在，我已经想不出任何理由来平复我的心，心很累，真的累了。</p>\n<p>坐在寝室里，再看看学费，</p>\n<p>心里再一凉。</p>\n<p>对不起父母的血汗钱，</p>\n<p>心累，心凉，心痛，</p>\n<p>愧疚，难受，想哭。</p>\n<p>未来很迷茫，道路是未知的。</p>\n<br>\n\n<p>傍晚的风很暖，学校门口的那条街又新开了很多店面，热闹非凡，</p>\n<p>而我，<strong>离人群越来越远了</strong>。</p>\n<p><br><br></p>\n","categories":["文章"],"tags":["青春","纪念","记录","成长"]},{"title":"NASM汇编的\"hello, world\"","url":"https://blog.ykqmain.com/nasm/","content":"<p>最近学了汇编语言，8086(发布1978年，16位)，MASM汇编器。结果就是，好像跟没学一样，完、全、搞、不、懂  _(:3」∠)_ </p>\n<p>毫无疑问汇编是有用的，也不能装懂，也没有兴趣，也没有那么多时间去折腾，索性就放弃它，应付过了考试就好。</p>\n<p>但也想象征下的写一个“hello, world”来纪念一下，然而，没想到的是，就这一个“hello, world”我也搞不定，看来放弃它是正确的选择。<br><br></p>\n<p>因为我用Mac，所以MASM是用不了的，又因为不同的CPU，不同的汇编器，汇编的语法也不同，所以书本是没啥参考的了。</p>\n<p>Mac自带<a href=\"http://www.nasm.us/\">NASM</a>，使用它来汇编，使用<code>ld</code>来连接。</p>\n<p>即使上网搜索也很难搞定NASM汇编的 “hello, world”，最后通过用英文Google找到了相关代码。</p>\n<br>\n\n<h3 id=\"Straight-Line-“hello-world”\"><a href=\"#Straight-Line-“hello-world”\" class=\"headerlink\" title=\"Straight Line “hello, world”\"></a>Straight Line “hello, world”</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">; hello.asm - a &quot;hello, world&quot; program using NASM</span><br><span class=\"line\"></span><br><span class=\"line\">; nasm -f macho hello.asm </span><br><span class=\"line\">;Assemble the above source to an object file, hello.o, in the Mach-O format.</span><br><span class=\"line\"></span><br><span class=\"line\">; ld -o hello -e mystart hello.o</span><br><span class=\"line\">;Link the object file to produce the hello executable. (Calling this step &quot;linking&quot; when there is only one object file is a bit weird.)</span><br><span class=\"line\"></span><br><span class=\"line\">; ./hello</span><br><span class=\"line\">;Run the executable.</span><br><span class=\"line\"></span><br><span class=\"line\">; echo $?</span><br><span class=\"line\">;Check the exit status in Bash.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">section .text</span><br><span class=\"line\"></span><br><span class=\"line\">global mystart                ; make the main function externally visible</span><br><span class=\"line\"></span><br><span class=\"line\">mystart:</span><br><span class=\"line\"></span><br><span class=\"line\">; 1 print &quot;hello, world&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">    ; 1a prepare the arguments for the system call to write</span><br><span class=\"line\">    push dword mylen          ; message length                           </span><br><span class=\"line\">    push dword mymsg          ; message to write</span><br><span class=\"line\">    push dword 1              ; file descriptor value</span><br><span class=\"line\"></span><br><span class=\"line\">    ; 1b make the system call to write</span><br><span class=\"line\">    mov eax, 0x4              ; system call number for write</span><br><span class=\"line\">    sub esp, 4                ; OS X (and BSD) system calls needs &quot;extra space&quot; on stack</span><br><span class=\"line\">    int 0x80                  ; make the actual system call</span><br><span class=\"line\"></span><br><span class=\"line\">    ; 1c clean up the stack</span><br><span class=\"line\">    add esp, 16               ; 3 args * 4 bytes/arg + 4 bytes extra space = 16 bytes</span><br><span class=\"line\"></span><br><span class=\"line\">; 2 exit the program</span><br><span class=\"line\"></span><br><span class=\"line\">    ; 2a prepare the argument for the sys call to exit</span><br><span class=\"line\">    push dword 0              ; exit status returned to the operating system</span><br><span class=\"line\"></span><br><span class=\"line\">    ; 2b make the call to sys call to exit</span><br><span class=\"line\">    mov eax, 0x1              ; system call number for exit</span><br><span class=\"line\">    sub esp, 4                ; OS X (and BSD) system calls needs &quot;extra space&quot; on stack</span><br><span class=\"line\">    int 0x80                  ; make the system call</span><br><span class=\"line\"></span><br><span class=\"line\">    ; 2c no need to clean up the stack because no code here would executed: already exited</span><br><span class=\"line\"></span><br><span class=\"line\">section .data</span><br><span class=\"line\"></span><br><span class=\"line\">    mymsg db &quot;hello, Assembly Language! (｡•ˇ‸ˇ•｡) ... and, say goodbye. _(:3」∠)_&quot;, 0xa  ; string with a carriage-return</span><br><span class=\"line\">    mylen equ $-mymsg         ; string length in bytes</span><br></pre></td></tr></table></figure>\n\n\n<br>\n\n<p>汇编后缀为<code>.asm</code>, 注释为 <code>;</code> (分号之后的一行内字符视为注释)</p>\n<p>打开终端，(当前文件夹下, 或完整路径)</p>\n<p>Assemble: <code>nasm -f macho hello.asm</code><br>Link: <code>ld -o hello -e mystart hello.o</code><br>Run: <code>./hello</code></p>\n<p>其他说明直接看代码内注释。</p>\n<br>\n\n<p><em>hello, Assembly Language!</em><br><em>… …</em><br><em>and,</em><br><em>Goodbye~</em></p>\n<hr>\n<br>\n\n<p>通过汇编的学习，更加深刻地认识到一些事：</p>\n<ul>\n<li>选对教材很重要</li>\n<li>Google很重要</li>\n<li>英语也很重要，用英文Google更重要</li>\n<li>不适合的不强求，该放弃的就得放弃</li>\n</ul>\n<br>\n\n<p>//参考：</p>\n<ul>\n<li>如果想入门汇编，建议使用王爽的《汇编语言》</li>\n<li><a href=\"http://peter.michaux.ca/articles/assembly-hello-world-for-os-x\">Assembly “hello, world” for OS X</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Netwide_Assembler\">NASM</a></li>\n</ul>\n<p><br><br></p>\n","categories":["编程"],"tags":["汇编","Assembly","NASM"]},{"title":"《游戏王》——吹过了我们的青春","url":"https://blog.ykqmain.com/ygo/","content":"<p>这几天逛B站，看到了《游戏王GX》，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/1.jpg\"></p>\n<p>无比的怀念，于是简单地重温了一下……</p>\n<span id=\"more\"></span>\n\n\n<p>看完之后，心中有很多想说的，有点心塞。毕竟游戏王是童年的一部分，但是很无奈不会写，作文太差。</p>\n<p>发了几条推特，感觉不足以纪念我的游戏王，自己又不会长篇大论，所以……</p>\n<p>上网找了一些评论之类的，觉得这个讲的还不错，先复制粘贴，再写一些自己的想法。</p>\n<blockquote>\n<p>//直接转载，<a href=\"http://tieba.baidu.com/p/3520410680\">游戏王ygocore吧</a></p>\n</blockquote>\n<p>看完了这篇评论，无法平静自己的内心，不能入睡。下面是一些闲扯：</p>\n<p>想到当年，貌似是二年级就开始玩游戏王（当然都是盗版），直到六年级达到巅峰，几乎全班男生都在中午和课间来上几盘，周末更是带上自己心爱的卡组，去同学家里能玩一下午不腻。小伙伴比较多，我们甚至无视规则“发明”了多人决斗，欢乐无限。</p>\n<p>那段时间，所有的零花钱都在买卡上了，虽然都是盗版（那时候根本不知道什么正版盗版），真的是很快乐（这也是十代最后找到的东西），特别是拆包的心情，我无法表达，估计大家也都有体验。邻家的小伙伴是个小土豪，按箱买，我们只能按包买。</p>\n<p>谈到卡组，就不得不提自己的卡组。因为当时主流是《游戏王GX》，所以游城十代不得不被我们提起，或者说借鉴。为啥那么叼？（后来我们才发现，<strong>神抽</strong>，<strong>印卡</strong>，<strong>口胡</strong>，<strong>主角光环</strong>造就了游城十代想赢就输不了，输了是剧情需要的局面）当时我还一心想收齐E－hero卡组，很快就发现，卧槽，只要<strong>融合</strong>挂了（旋风，沙尘暴什么的太多），这场决斗基本就输了，哪怕后来的新空间，我也尝试过，再也不对主角的卡组抱有任何希望了。</p>\n<p>因为年龄原因，大家都不太懂的规则，造就了，很多人的卡组不能称之为卡组，而是“卡堆”，一些无需配合的变态卡组成的，能破坏魔法陷阱的卡太多了，还不带重样的，而怪兽低级攻击力可怕，高级不但攻击力惊人还有变态效果，更重要的是，这些卡，都不需要连锁，是单独发挥作用的。这样一来，真的就很没有决斗的乐趣了，期间我也尝试过这样的卡组，的确，胜率感人，玩过的游戏王的都懂。但是，这样真的很无趣。动画里的人的卡组都是有连锁和主题的，这样的卡组真的很像一个伙伴，才会感到决斗的乐趣。我希望组一个真正的卡组来玩，而不是一堆卡的拼凑，我发现了<strong>D-hero</strong>，初见这套卡组就喜欢上，效果都很不错。后来，我基本集齐了这套卡组，并伴随我走到了游戏王生活的尽头。到现在，我还好好地保存着这套卡组，以及剩下的一百来张卡。</p>\n<p>《游戏王DM》是在黑白漫画书中度过的，我当时还用白纸画过黑魔导。GX才是真正伴随了我的一段童年，话说还真是我引起了我们小学的游戏王热。而游戏王的岁月最终也伴随了小学毕业而消失在我的生活中（初中已经没人陪我玩了，更重要的是，游戏王之后出了新的动画，没有时间，也没有渠道看，更没有精力再去买卡学新规则了）。所以我只看过两部游戏王，对其认知了永远停留在了GX，但也足够了。</p>\n<p>童年家长管的是比较严的，不像现在有网络可以随便看，那时候只有电视，而且《游戏王GX》是没有在电视台上播放的，都是租的CD看，即使如此，每次看到GX还是会激动一小会。当然，在这种情况下， 是不可能把GX 180集看完的。</p>\n<p>最近才补上了这GX的最后一场决斗：</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/2.jpg\"></p>\n<p><strong>决斗在“奥特曼”冲向天空龙的时刻结束了……</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/3.jpg\"></p>\n<p>…………</p>\n<p>那之后，十代开始他的旅行，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/4.jpg\"></p>\n<p>到这里，GX的故事结束了。</p>\n<br>\n\n<hr>\n<br>\n\n<p>然而本篇博客不能结束。</p>\n<p>以上是关于决斗本身的一点回忆，虽然游戏王被称为“游基王”，但我仍然觉得是有女主角的。</p>\n<p>这就是另一点令我心塞的地方，那就是<a href=\"http://baike.baidu.com/view/1098113.htm\"><strong>天上院明日香</strong></a>，她并没有跟十代在一起。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/5.jpg\"></p>\n<p>说起来，明日香也算是我童年的女神之一。即使小时候的我不太懂这些，但我都看出来了明日香是喜欢十代的。（我都看出来了）</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/6.jpg\"></p>\n<p>前面说过，童年是没有看完GX的，当然也不知道他们的结局是怎样的，当我最近补了一下，心里是崩溃的！不过看的多了，也就知道这是大多数动漫的套路，爱而不得，才能深入人心。</p>\n<p>看到这里我的心是久久不能平静的，</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/7.jpg\"></p>\n<p>在网上找到了GX的情感线介绍，来自  “天上院明日香吧” <a href=\"http://tieba.baidu.com/p/1378354017\">细节分析明日香感情发展</a> , 有兴趣的可以看看。</p>\n<p>最后，是这张纸条安慰了一下我幼小的心灵：</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/8.jpg\"></p>\n<blockquote>\n<p>吹雪说：明日香就交给你了<br>明日香说：将来一定会见面的<br>（万丈目，翔，剑山，礼，校长，老师都很有爱）</p>\n</blockquote>\n<p>我相信，他们们一定会再见面的，感谢作者给了我这最后一份希望，美好的东西总是令人向往的。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/0.jpg\"></p>\n<br>\n\n<p>到这里，真的就要结束了，<strong>一篇博客不足以承载那份童年的美好时光，却也没有更好的方式来纪念。。。。。。</strong></p>\n<p>想到老了以后，看着这篇博客，把珍藏的卡拿出来观赏，会是怎样的心情呢？</p>\n<p>再见，希望能再见到你。</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/9.jpg\"></p>\n<p><strong>The End</strong></p>\n<p>//B站传送门：<a href=\"https://www.bilibili.com/video/BV1sb411b7cd\">游戏王GX</a></p>\n<br>\n\n\n<p><strong>Update：</strong> 又见女神，ARC-V 103</p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/ygo/10.png\"></p>\n<p>（神奇宝贝也喜欢拉小光出来啊～🤔）</p>\n<p><br><br></p>\n","categories":["动画"],"tags":["童年","动画","游戏","回忆","卡牌"]},{"title":"C语言结构体","url":"https://blog.ykqmain.com/c/","content":"<p>寒假为了巩固基础, 简单复习了一下C和C++。</p>\n<p>C语言基本看完了, 想到大一的一个 <em>C语言课程设计报告</em> , 当时还有一个问题没有解决就交上去了, 那就是将内容作为结构体保存到文件中。<br>(我当时实现的是, 将所有内容当做一个个的字符进行保存和读取。)</p>\n<p>最近着手解决这个遗留问题, 当时的要求是这样的:</p>\n<blockquote>\n<p>图书信息管理系统设计</p>\n<p>图书信息包括：登录号、书名、作者名、分类号、出版单位、出版时间、价格等。</p>\n<p>试设计一图书信息管理系统，使之能提供以下功能：</p>\n<ol>\n<li>系统以菜单方式工作</li>\n<li>图书信息录入功能(图书信息用文件保存)－－输入</li>\n<li>图书信息浏览功能－－输出</li>\n<li>图书信息查询功能－－算法<ul>\n<li>按书名查询</li>\n<li>按作者名查询</li>\n</ul>\n</li>\n<li>图书信息的删除与修改(可选项)</li>\n</ol>\n</blockquote>\n<h3 id=\"读取信息到结构体\"><a href=\"#读取信息到结构体\" class=\"headerlink\" title=\"读取信息到结构体\"></a>读取信息到结构体</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">char</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> h;</span><br><span class=\"line\">    <span class=\"keyword\">float</span> f;</span><br><span class=\"line\">&#125;st;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">in</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    FILE *fp;</span><br><span class=\"line\">    st sa, sb;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *str = <span class=\"string\">&quot;abcdefg&quot;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%c&quot;</span>, &amp;sa.c);</span><br><span class=\"line\">    fflush(<span class=\"built_in\">stdin</span>);</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;sa.h);</span><br><span class=\"line\">    fflush(<span class=\"built_in\">stdin</span>); </span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%f&quot;</span>, &amp;sa.f);</span><br><span class=\"line\">    fflush(<span class=\"built_in\">stdin</span>);</span><br><span class=\"line\">    fp = fopen(<span class=\"string\">&quot;st.txt&quot;</span>, <span class=\"string\">&quot;w+&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fp)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;errror!\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;sa:c=%c,h=%d,f=%f\\n&quot;</span>, sa.c, sa.h, sa.f);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;sizeof(sa)=%d:&amp;c=%x,&amp;h=%x,&amp;f=%x\\n&quot;</span>,</span><br><span class=\"line\">        <span class=\"keyword\">sizeof</span>(sa), &amp;sa.c, &amp;sa.h, &amp;sa.f);</span><br><span class=\"line\">    fwrite(&amp;sa, <span class=\"keyword\">sizeof</span>(sa), <span class=\"number\">1</span>, fp);</span><br><span class=\"line\">    rewind(fp);</span><br><span class=\"line\">    fread(&amp;sb, <span class=\"keyword\">sizeof</span>(sb), <span class=\"number\">1</span>, fp);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;sb:c=%c,h=%d,,f=%f\\n&quot;</span>, sb.c, sb.h, sb.f);</span><br><span class=\"line\"></span><br><span class=\"line\">    fclose(fp);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">out</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    FILE *fp;</span><br><span class=\"line\">    st sb;</span><br><span class=\"line\">    fp = fopen(<span class=\"string\">&quot;st.txt&quot;</span>, <span class=\"string\">&quot;r&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fp)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;errror!\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fread(&amp;sb, <span class=\"keyword\">sizeof</span>(sb), <span class=\"number\">1</span>, fp);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;sb:c=%c,h=%d,f=%f\\n&quot;</span>,</span><br><span class=\"line\">        sb.c, sb.h, sb.f);</span><br><span class=\"line\">    <span class=\"comment\">//printf(&quot;sizeof(sb)=%d:&amp;c=%x,&amp;h=%x,&amp;f=%x\\n&quot;, sizeof(sb), &amp;sb.c, &amp;sb.h,&amp;sb.f);</span></span><br><span class=\"line\"></span><br><span class=\"line\">    fclose(fp);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;输入：\\n&quot;</span>);</span><br><span class=\"line\">    in();</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;输出：\\n&quot;</span>);</span><br><span class=\"line\">    out();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n<p>作为八年级就接触到的人生中第一门编程语言, 时至今日, 我仍然觉得, C是<strong>最难的</strong>一门计算机高级语言，毕竟我只会在一个黑框框里面把C当计算器使用。</p>\n<p>到这里, 终于可以跟C告一段落了, 不知道下次再见是什么时候（其实我再也不想用C了）。</p>\n<p><br><br></p>\n","categories":["编程"],"tags":["C","C语言","结构体","文件"]},{"title":"利器","url":"https://blog.ykqmain.com/liqi/","content":"<p>今天看到一个有意思的项目 <a href=\"http://liqi.io/community\">利器社群计划</a> ，借此机会，我也分享一下自己使用的一些小工具……</p>\n<p><mark><em><strong>Update: 2022-01</strong></em></mark></p>\n<br>\n\n\n<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>常用ID<strong>「秋风木叶」</strong>，简称<strong>“秋叶”</strong>，取自《楚辞·九歌·湘夫人》：</p>\n<blockquote>\n<p>袅袅兮秋风，洞庭波兮木叶下。</p>\n</blockquote>\n<p>也用<code>Yang</code>这个称呼。🤓</p>\n<h4 id=\"兴趣和爱好：\"><a href=\"#兴趣和爱好：\" class=\"headerlink\" title=\"兴趣和爱好：\"></a>兴趣和爱好：</h4><ul>\n<li>📖 历史</li>\n<li>💻 计算机</li>\n<li>📺 动画</li>\n</ul>\n<br>\n\n\n<h2 id=\"在用哪些硬件？\"><a href=\"#在用哪些硬件？\" class=\"headerlink\" title=\"在用哪些硬件？\"></a>在用哪些硬件？</h2><ul>\n<li><strong> iPhone 12 [Nana]</strong><ul>\n<li>🎧 AirPods 2</li>\n</ul>\n</li>\n<li><strong> MacBook Pro (13-inch, M1, 2020) (16+256) [Anna]</strong><ul>\n<li>🖥️ Dell U2720QM</li>\n<li>⌨️ NuPhy Air75</li>\n<li>🖱️ Logitech MX Anywhere 3</li>\n<li>🎮 8BitDo Pro 2</li>\n</ul>\n</li>\n</ul>\n<br>\n\n\n<h2 id=\"软件呢？\"><a href=\"#软件呢？\" class=\"headerlink\" title=\"软件呢？\"></a>软件呢？</h2><p><strong>我喜欢精简，系统自带的软件足够好则优先使用；免费或开源的软件其次；最后才是买断制软件；订阅制软件几乎不考虑。</strong></p>\n<p><strong>在满足自己所需要功能的前提下，将自己的互联网帐号降到最低，涉及到的平台和APP减到最少。</strong></p>\n<p><strong>macOS 11 (Big Sur)</strong></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/liqi/macOS11.png!sy\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/liqi/macOS-1.png!sy\"></p>\n<p><img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/liqi/macOS-2.png!sy\"></p>\n<br>\n\n<ol>\n<li><p>神器：<strong>终端</strong> (Terminal.app)</p>\n<p> <img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/liqi/Terminal.png!sy\"></p>\n<ul>\n<li><p><em>为什么不是<a href=\"https://www.iterm2.com/\">iTerm2</a>？</em> iTerm2目前唯一的问题就是不能识别macOS的替身文件夹，需要用<code>ln</code>命令代替，除此之外比自带的终端好用。至于为什么不选择它，即使我很怀念iTerm2的选中复制右键粘贴功能，但我确实不需要那么多的功能。</p>\n</li>\n<li><p>Xcode命令行工具 <code>xcode-select --install</code></p>\n</li>\n<li><p>终端代理</p>\n<ul>\n<li><code>export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;export ALL_PROXY=socks5://127.0.0.1:1080</code></li>\n</ul>\n</li>\n<li><p><a href=\"http://ohmyz.sh/\"><strong>oh-my-zsh</strong></a></p>\n<ul>\n<li><a href=\"https://github.com/zsh-users/zsh-syntax-highlighting\">zsh-syntax-highlighting</a><ul>\n<li><code>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</code></li>\n</ul>\n</li>\n<li><a href=\"https://github.com/zsh-users/zsh-completions\">zsh-completions</a><ul>\n<li><code> git clone https://github.com/zsh-users/zsh-completions $&#123;ZSH_CUSTOM:=~/.oh-my-zsh/custom&#125;/plugins/zsh-completions</code></li>\n</ul>\n</li>\n<li><a href=\"https://github.com/zsh-users/zsh-autosuggestions\">zsh-autosuggestions</a><ul>\n<li><code>git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><a href=\"https://brew.sh/\"><strong>Homebrew</strong></a> (<code>/opt/homebrew</code>)</p>\n<ul>\n<li><a href=\"https://www.gnu.org/software/wget\">wget</a></li>\n<li><a href=\"https://httpie.io/\">httpie</a></li>\n<li><a href=\"http://mama.indstate.edu/users/ice/tree\">Tree</a></li>\n<li><a href=\"https://ffmpeg.org/\">FFmpeg</a></li>\n<li><a href=\"https://github.com/beeftornado/homebrew-rmtree\">homebrew-rmtree</a></li>\n<li><a href=\"https://github.com/dylanaraps/neofetch\">neofetch</a></li>\n<li><a href=\"https://github.com/tj/n\"><strong>n</strong></a> (Node.js version management)<ul>\n<li><code>sudo chown -R $(whoami) /usr/local/n</code></li>\n<li><code>sudo chown -R $(whoami) /usr/local/bin /usr/local/lib /usr/local/include /usr/local/share</code></li>\n<li><code>n lts</code> (<a href=\"https://nodejs.org/zh-cn/\">Node.js</a>)<ul>\n<li><code>npm install -g tldr</code> (<a href=\"https://github.com/tldr-pages/tldr\">tldr-pages</a>)</li>\n<li><code>npm install -g hexo-cli</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><a href=\"https://www.python.org/\"><strong>Python</strong></a></p>\n<ul>\n<li>flake8</li>\n<li>black</li>\n<li>pip-autoremove</li>\n<li>requests</li>\n<li>beautifulsoup4</li>\n<li>openpyxl</li>\n<li>pandas</li>\n<li>pillow</li>\n<li>matplotlib</li>\n<li>jieba</li>\n<li>wordcloud</li>\n<li>python-docx</li>\n<li>mysql-connector-python</li>\n<li>sqlmodel</li>\n<li>fastapi</li>\n<li>uvicorn</li>\n</ul>\n</li>\n<li><p><a href=\"https://www.oracle.com/java/technologies/downloads/\">JDK</a> (<a href=\"https://adoptium.net/\">OpenJDK</a>)</p>\n</li>\n<li><p><a href=\"https://dev.mysql.com/downloads/\">MySQL</a> (<code>/etc/my.cnf</code>)</p>\n</li>\n<li><p><a href=\"https://www.rust-lang.org/zh-CN/\"><del>Rust</del></a> (从入门到放弃)</p>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"2\">\n<li><p>浏览器</p>\n<ul>\n<li>主要 <strong>Safari</strong><ul>\n<li><a href=\"https://adguard.com/zh_cn/adguard-safari/overview.html\">AdGuard</a> 或 <a href=\"https://adblockersafari.com/\">AdBlocker Pro</a> [App Store]</li>\n<li><a href=\"https://www.tampermonkey.net/\">Tampermonkey</a> [App Store]<ul>\n<li><a href=\"https://greasyfork.org/zh-CN\"><em>Greasy Fork</em></a><ul>\n<li><a href=\"https://greasyfork.org/zh-CN/scripts/1682-google-hit-hider-by-domain-search-filter-block-sites\">Google Hit Hider by Domain</a> (<a href=\"https://github.com/iorate/ublacklist\"><em>uBlacklist</em></a>)</li>\n<li><a href=\"https://greasyfork.org/zh-CN/scripts/375858-bilibili-autowide\">Bilibili AutoWide</a></li>\n<li><a href=\"https://greasyfork.org/zh-CN/scripts/372516-bilibili-merged-flv-mp4-ass-enhance\">bilibili merged flv+mp4+ass+enhance</a></li>\n<li><a href=\"https://greasyfork.org/zh-CN/scripts/405130-%E6%96%87%E6%9C%AC%E9%80%89%E4%B8%AD%E5%A4%8D%E5%88%B6\">文本选中复制</a><br>&nbsp;</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>情怀 <a href=\"https://www.mozilla.org/en-US/firefox/all/#product-desktop-release\"><strong>Firefox</strong></a><ul>\n<li><a href=\"https://github.com/gorhill/uBlock\">uBlock Origin</a></li>\n<li><a href=\"https://www.tampermonkey.net/\">Tampermonkey</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"3\">\n<li><p>编辑器:</p>\n<ul>\n<li><p><a href=\"https://www.sublimetext.com/\"><strong>Sublime Text</strong></a><br>  <img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/liqi/Sublime.png!sy\"></p>\n<ul>\n<li><a href=\"https://packagecontrol.io/\">Package Control</a>：<a href=\"https://github.com/ykqmain/Config/blob/master/Sublime/Package%20Control.sublime-settings\"><strong>myPlugins</strong></a></li>\n<li>字体：<a href=\"https://github.com/adobe-fonts/source-code-pro\">SourceCodePro-Regular 14</a></li>\n<li>主题：Adaptive/Mariana</li>\n</ul>\n</li>\n<li><p>兜兜转转还是回到了最初的Sublime，并购买License支持了一下。我认为编辑器和IDE应该分工明确，一个快而准，一个大而全，各司其职。Sublime对我而言是足够且有意义的，希望Sublime能一直陪伴我吧，转行以后估计不常写代码了，也就用用Python，使用Sublime有一种愉悦的感觉，更重要的还是陪伴。</p>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"4\">\n<li><p>IDE:</p>\n<p> 在我以后的生活工作中可能不再需要IDE了，保留记录、怀念一下。</p>\n<ul>\n<li><a href=\"https://code.visualstudio.com/\">VS Code</a> (<a href=\"https://github.com/features/codespaces\"><em>GitHub Codespaces</em></a>)</li>\n<li><a href=\"https://www.jetbrains.com/\"><del>JetBrains</del></a></li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"5\">\n<li><p>Developer Tools:</p>\n<ul>\n<li><a href=\"https://dbeaver.io/\">DBeaver</a> (database tool) (<a href=\"https://www.eclipse.org/\">Eclipse</a>的纪念)</li>\n<li><a href=\"https://www.sourcetreeapp.com/\">Sourcetree</a> (Git GUI)</li>\n<li><a href=\"https://paw.cloud/\">Paw</a> (API tool)</li>\n<li><a href=\"https://www.wireshark.org/\">Wireshark</a> (network protocol analyzer)</li>\n<li><a href=\"https://cyberduck.io/\">Cyberduck</a> (libre server and cloud storage browser)</li>\n<li><a href=\"https://www.teamviewer.com/en/\">TeamViewer</a> (remote control)</li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"6\">\n<li><p>笔记:</p>\n<ul>\n<li><strong>备忘录.app</strong></li>\n<li>文本编辑.app (.txt)</li>\n<li>Sublime (.md)</li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"7\">\n<li><p>文档</p>\n<ul>\n<li>预览.app</li>\n<li>iWork [App Store]</li>\n<li><a href=\"https://www.wps.cn/\"><strong>WPS Office</strong></a> [App Store]</li>\n<li><a href=\"https://pdfexpert.com/\">PDF Expert</a> (PDF工具)</li>\n<li><a href=\"https://www.toketaware.com/\">iThoughtsX</a> (思维导图)<br>&nbsp;</li>\n<li><a href=\"https://www.pixelmator.com/pro/\"><strong>Pixelmator Pro</strong></a> (<del>Adobe Photoshop</del>) (干掉PS之后，达成「软件全部正版化」成就😌) [App Store]</li>\n<li>GarageBand [App Store]</li>\n<li>iMovie [App Store]</li>\n<li><a href=\"https://handbrake.fr/\">HandBrake</a> (视频转码)</li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"8\">\n<li><p>影音娱乐</p>\n<ul>\n<li>照片.app (iCloud的核心)</li>\n<li><a href=\"https://www.apple.com/itunes/\"><del>iTunes</del></a></li>\n<li>音乐.app</li>\n<li>播客.app</li>\n<li><strong>QQ音乐</strong> (MAS版本也可以使用媒体键) [App Store]<br>&nbsp;</li>\n<li>腾讯视频 [App Store]</li>\n<li>优酷 [App Store]</li>\n<li>爱奇艺 [App Store]<br>&nbsp;</li>\n<li><a href=\"http://www.videolan.org/\">VLC</a> (播放器)</li>\n<li><a href=\"https://github.com/iina/iina\">IINA</a> (播放器)</li>\n<li><a href=\"https://obsproject.com/zh-cn\">OBS</a> (直播串流和录屏)</li>\n<li>QuickTime Player<br>&nbsp;</li>\n<li><a href=\"https://openemu.org/\">OpenEmu</a>(Experimental) (video game emulation)</li>\n<li><a href=\"https://store.steampowered.com/\">Steam</a><ul>\n<li><a href=\"https://www.wesnoth.org/\">The Battle for Wesnoth</a> (turn-based strategy game with a high fantasy theme) [App Store]</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n\n<ol start=\"9\">\n<li><p>工具</p>\n<ul>\n<li><a href=\"https://weixin.qq.com/\">微信</a> [App Store]</li>\n<li><a href=\"https://im.qq.com/\">QQ</a> [App Store]</li>\n<li><a href=\"https://www.feishu.cn/\">飞书</a> (邮箱和个人项目管理)</li>\n<li><a href=\"https://ranchero.com/netnewswire\"><strong>NetNewsWire</strong></a> (RSS阅读器)<br>&nbsp;</li>\n<li><a href=\"https://www.keka.io/zh-cn\"><strong>Keka</strong></a> (压缩软件) (MAS版本支持一下) [App Store]</li>\n<li>Amphetamine (Keep Mac awake) [App Store]</li>\n<li><a href=\"https://freemacsoft.net/appcleaner\">AppCleaner</a> (卸载工具)</li>\n<li><a href=\"https://github.com/MonitorControl/MonitorControl\">MonitorControl</a> (外接显示器工具)<br>&nbsp;</li>\n<li><a href=\"https://github.com/ykqmain?tab=stars\"><strong><em>其他软件</em></strong></a></li>\n</ul>\n</li>\n</ol>\n<br>\n\n<p><strong>如无必要，勿增实体。要钱没有，一切从简。</strong><br><a href=\"https://github.com/ykqmain/Config\"><strong><font color=\"#ffc0cb\"><u>myConfig</u></font></strong></a></p>\n<br>\n\n\n<h2 id=\"推荐一件生活中的利器\"><a href=\"#推荐一件生活中的利器\" class=\"headerlink\" title=\"推荐一件生活中的利器\"></a>推荐一件生活中的利器</h2><p>生活不可无书，一手书香、一手MacBook，世界尽在掌中。</p>\n<p>推荐一套对我影响较深的书：</p>\n<img src=\"https://ianna.oss-cn-hangzhou.aliyuncs.com/liqi/sj.jpeg!sy\" width=\"720\">\n\n<blockquote>\n<p>天下熙熙，皆为利来；天下攘攘，皆为利往。</p>\n</blockquote>\n<p><br><br></p>\n","categories":["计算机"],"tags":["工具","SoftWare","Apple","Mac","macOS","iPhone","iOS","APP"]},{"title":"第一个网页","url":"https://blog.ykqmain.com/hello/","content":"<p>已拥有一台服务器，系统为 CentOS 6。</p>\n<ul>\n<li>打开<code>终端</code>，登录服务器：<code>ssh -p 端口 root@IP</code></li>\n<li>输入密码</li>\n</ul>\n<span id=\"more\"></span>\n\n<br>\n\n<h2 id=\"安装Apache\"><a href=\"#安装Apache\" class=\"headerlink\" title=\"安装Apache\"></a>安装Apache</h2><ol>\n<li><p>安装方式<br>CentOS安装Apache服务可以有两种方式，一种是用yum安装，一种是从官网下载源代码进行安装。这里使用yum安装。</p>\n</li>\n<li><p>输入<code>sudo yum install httpd -y</code><br>（采用该方式进行安装配置文件的默认路径为：<code>/etc/httpd/conf/httpd.conf</code>）</p>\n</li>\n<li><p>编辑配置文件，输入<code>vi /etc/httpd/conf/httpd.conf</code></p>\n</li>\n<li><p>找到如下内容<code>#ServerName www.example.com:80</code>，改为<code>ServerName localhost:80</code></p>\n</li>\n<li><p>重启一下Apache，<code>service httpd restart</code>即可。</p>\n<p>常见Apache操作：</p>\n<ul>\n<li><code>service httpd start</code> 启动</li>\n<li><code>service httpd stop</code> 停止</li>\n<li><code>service httpd restart</code> 重启</li>\n<li><code>service httpd status</code>  状态</li>\n</ul>\n</li>\n<li><p>测试是否安装成功，在本地的浏览器中输入<code>http://IP</code> ，如果出现 <code>Apache 2 Test Page powered by CentOS</code>，说明成功。</p>\n<p>如果出现错误，那就可能是iptables的问题：</p>\n<p>编辑 iptables配置，<code>vi /etc/sysconfig/iptables</code> ，</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT</span><br></pre></td></tr></table></figure>\n\n<p>然后重启iptables、Apache。</p>\n<p>常见iptables操作：</p>\n<ul>\n<li><code>service iptables status</code> 查看当前规则</li>\n<li><code>service iptables restart</code> 重启</li>\n<li><code>service iptables stop</code> 禁用</li>\n</ul>\n</li>\n</ol>\n<p><strong>最后设置Apache开机自启 <code>chkconfig iptables on </code></strong></p>\n<p>//参考：<a href=\"http://www.linuxidc.com/Linux/2014-01/95256.htm\">CentOS Apache服务器安装与配置</a><br><br></p>\n<h2 id=\"安装MySQL\"><a href=\"#安装MySQL\" class=\"headerlink\" title=\"安装MySQL\"></a>安装MySQL</h2><ol>\n<li><p>安装方式<br>仍然是通过yum安装，查看版本信息<code>yum list | grep mysql</code> ，安装<code>yum install -y mysql-server mysql mysql-deve</code> ，查看安装好的版本<code>rpm -qi mysql-server</code> 。</p>\n</li>\n<li><p>通过<code>service mysqld start</code> 命令启动mysql服务。</p>\n</li>\n<li><p>第一次会提示很多信息，重启mysql <code>service mysqld restart</code></p>\n</li>\n<li><p><strong>最后设置MySQL开机自启 <code>chkconfig mysqld on</code></strong><br>（配置文件在 <code>/etc/my.cnf</code>）</p>\n<br></li>\n</ol>\n<hr>\n<br>\n\n<p>回到本地，编辑或创建一个名为 <code>index.html</code> 的文件，这个HTML文件就是首页。HTML中的多媒体的路径要用<strong>服务器上的相对路径</strong>或者<strong>外链</strong>。</p>\n<p><strong>将这个<code>index.html</code>送到服务器上的<code>/var/www/html</code>目录下即可</strong>，在本地和服务器传文件有很多方法，比如：scp、ftp、sftp…</p>\n<ul>\n<li>scp的方法：<code>scp -P 端口 本地文件路径 root@IP:服务器路径</code></li>\n</ul>\n<p>在浏览器输入服务器IP或者域名就可以看到最新效果。<br><br></p>\n<p><strong>Enjoy it!</strong></p>\n<p><br><br></p>\n","categories":["计算机"],"tags":["Linux","Apache","服务器","Web"]},{"title":"category","url":"https://blog.ykqmain.com/category/index.html","content":"","categories":[],"tags":[]},{"title":"TimeLine","url":"https://blog.ykqmain.com/TimeLine/index.html","content":"","categories":[],"tags":[]},{"title":"about","url":"https://blog.ykqmain.com/about/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"https://blog.ykqmain.com/link/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"https://blog.ykqmain.com/tag/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"https://blog.ykqmain.com/css/personal-style.css","content":"html.page-home {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('https://ianna.oss-cn-hangzhou.aliyuncs.com/main/bg.png');\n  background-color: transparent;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  /*background: linear-gradient( #1abc9c, transparent), linear-gradient( 90deg, skyblue, transparent), linear-gradient( -90deg, coral, transparent);*/\n  /*background-blend-mode: screen;*/\n  /*background: linear-gradient(to left, #5f2c82, #49a09d);*/\n}","categories":[],"tags":[]},{"title":"search","url":"https://blog.ykqmain.com/search/index.html","content":"","categories":[],"tags":[]}]